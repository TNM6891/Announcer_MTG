var TC=t=>{throw TypeError(t)};var Ws=(t,e,i)=>e.has(t)?TC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i);function xC(t,e){for(var i=0;i<e.length;i++){const o=e[i];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(o,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();function qh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yd={exports:{}},ea={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function bC(){if(y0)return ea;y0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:t,type:o,key:c,ref:s!==void 0?s:null,props:l}}return ea.Fragment=e,ea.jsx=i,ea.jsxs=i,ea}var v0;function CC(){return v0||(v0=1,yd.exports=bC()),yd.exports}var x=CC(),vd={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function EC(){if(_0)return Ne;_0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function M(N,J,ce){this.props=N,this.context=J,this.refs=R,this.updater=ce||A}M.prototype.isReactComponent={},M.prototype.setState=function(N,J){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,J,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function k(){}k.prototype=M.prototype;function w(N,J,ce){this.props=N,this.context=J,this.refs=R,this.updater=ce||A}var O=w.prototype=new k;O.constructor=w,E(O,M.prototype),O.isPureReactComponent=!0;var G=Array.isArray;function $(){}var V={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function Y(N,J,ce){var W=ce.ref;return{$$typeof:t,type:N,key:J,ref:W!==void 0?W:null,props:ce}}function me(N,J){return Y(N.type,J,N.props)}function ge(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function Ee(N){var J={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ce){return J[ce]})}var U=/\/+/g;function ne(N,J){return typeof N=="object"&&N!==null&&N.key!=null?Ee(""+N.key):J.toString(36)}function j(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then($,$):(N.status="pending",N.then(function(J){N.status==="pending"&&(N.status="fulfilled",N.value=J)},function(J){N.status==="pending"&&(N.status="rejected",N.reason=J)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function D(N,J,ce,W,fe){var se=typeof N;(se==="undefined"||se==="boolean")&&(N=null);var ae=!1;if(N===null)ae=!0;else switch(se){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(N.$$typeof){case t:case e:ae=!0;break;case y:return ae=N._init,D(ae(N._payload),J,ce,W,fe)}}if(ae)return fe=fe(N),ae=W===""?"."+ne(N,0):W,G(fe)?(ce="",ae!=null&&(ce=ae.replace(U,"$&/")+"/"),D(fe,J,ce,"",function(Ct){return Ct})):fe!=null&&(ge(fe)&&(fe=me(fe,ce+(fe.key==null||N&&N.key===fe.key?"":(""+fe.key).replace(U,"$&/")+"/")+ae)),J.push(fe)),1;ae=0;var Ae=W===""?".":W+":";if(G(N))for(var we=0;we<N.length;we++)W=N[we],se=Ae+ne(W,we),ae+=D(W,J,ce,se,fe);else if(we=b(N),typeof we=="function")for(N=we.call(N),we=0;!(W=N.next()).done;)W=W.value,se=Ae+ne(W,we++),ae+=D(W,J,ce,se,fe);else if(se==="object"){if(typeof N.then=="function")return D(j(N),J,ce,W,fe);throw J=String(N),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ae}function z(N,J,ce){if(N==null)return N;var W=[],fe=0;return D(N,W,"","",function(se){return J.call(ce,se,fe++)}),W}function oe(N){if(N._status===-1){var J=N._result;J=J(),J.then(function(ce){(N._status===0||N._status===-1)&&(N._status=1,N._result=ce)},function(ce){(N._status===0||N._status===-1)&&(N._status=2,N._result=ce)}),N._status===-1&&(N._status=0,N._result=J)}if(N._status===1)return N._result.default;throw N._result}var ue=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},de={map:z,forEach:function(N,J,ce){z(N,function(){J.apply(this,arguments)},ce)},count:function(N){var J=0;return z(N,function(){J++}),J},toArray:function(N){return z(N,function(J){return J})||[]},only:function(N){if(!ge(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ne.Activity=_,Ne.Children=de,Ne.Component=M,Ne.Fragment=i,Ne.Profiler=s,Ne.PureComponent=w,Ne.StrictMode=o,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(N){return V.H.useMemoCache(N)}},Ne.cache=function(N){return function(){return N.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(N,J,ce){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var W=E({},N.props),fe=N.key;if(J!=null)for(se in J.key!==void 0&&(fe=""+J.key),J)!re.call(J,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&J.ref===void 0||(W[se]=J[se]);var se=arguments.length-2;if(se===1)W.children=ce;else if(1<se){for(var ae=Array(se),Ae=0;Ae<se;Ae++)ae[Ae]=arguments[Ae+2];W.children=ae}return Y(N.type,fe,W)},Ne.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ne.createElement=function(N,J,ce){var W,fe={},se=null;if(J!=null)for(W in J.key!==void 0&&(se=""+J.key),J)re.call(J,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(fe[W]=J[W]);var ae=arguments.length-2;if(ae===1)fe.children=ce;else if(1<ae){for(var Ae=Array(ae),we=0;we<ae;we++)Ae[we]=arguments[we+2];fe.children=Ae}if(N&&N.defaultProps)for(W in ae=N.defaultProps,ae)fe[W]===void 0&&(fe[W]=ae[W]);return Y(N,se,fe)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(N){return{$$typeof:d,render:N}},Ne.isValidElement=ge,Ne.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:oe}},Ne.memo=function(N,J){return{$$typeof:m,type:N,compare:J===void 0?null:J}},Ne.startTransition=function(N){var J=V.T,ce={};V.T=ce;try{var W=N(),fe=V.S;fe!==null&&fe(ce,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then($,ue)}catch(se){ue(se)}finally{J!==null&&ce.types!==null&&(J.types=ce.types),V.T=J}},Ne.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Ne.use=function(N){return V.H.use(N)},Ne.useActionState=function(N,J,ce){return V.H.useActionState(N,J,ce)},Ne.useCallback=function(N,J){return V.H.useCallback(N,J)},Ne.useContext=function(N){return V.H.useContext(N)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(N,J){return V.H.useDeferredValue(N,J)},Ne.useEffect=function(N,J){return V.H.useEffect(N,J)},Ne.useEffectEvent=function(N){return V.H.useEffectEvent(N)},Ne.useId=function(){return V.H.useId()},Ne.useImperativeHandle=function(N,J,ce){return V.H.useImperativeHandle(N,J,ce)},Ne.useInsertionEffect=function(N,J){return V.H.useInsertionEffect(N,J)},Ne.useLayoutEffect=function(N,J){return V.H.useLayoutEffect(N,J)},Ne.useMemo=function(N,J){return V.H.useMemo(N,J)},Ne.useOptimistic=function(N,J){return V.H.useOptimistic(N,J)},Ne.useReducer=function(N,J,ce){return V.H.useReducer(N,J,ce)},Ne.useRef=function(N){return V.H.useRef(N)},Ne.useState=function(N){return V.H.useState(N)},Ne.useSyncExternalStore=function(N,J,ce){return V.H.useSyncExternalStore(N,J,ce)},Ne.useTransition=function(){return V.H.useTransition()},Ne.version="19.2.3",Ne}var S0;function Fh(){return S0||(S0=1,vd.exports=EC()),vd.exports}var le=Fh();const AC=qh(le);var _d={exports:{}},ta={},Sd={exports:{}},Td={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function RC(){return T0||(T0=1,(function(t){function e(D,z){var oe=D.length;D.push(z);e:for(;0<oe;){var ue=oe-1>>>1,de=D[ue];if(0<s(de,z))D[ue]=z,D[oe]=de,oe=ue;else break e}}function i(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var z=D[0],oe=D.pop();if(oe!==z){D[0]=oe;e:for(var ue=0,de=D.length,N=de>>>1;ue<N;){var J=2*(ue+1)-1,ce=D[J],W=J+1,fe=D[W];if(0>s(ce,oe))W<de&&0>s(fe,ce)?(D[ue]=fe,D[W]=oe,ue=W):(D[ue]=ce,D[J]=oe,ue=J);else if(W<de&&0>s(fe,oe))D[ue]=fe,D[W]=oe,ue=W;else break e}}return z}function s(D,z){var oe=D.sortIndex-z.sortIndex;return oe!==0?oe:D.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],m=[],y=1,_=null,S=3,b=!1,A=!1,E=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function O(D){for(var z=i(m);z!==null;){if(z.callback===null)o(m);else if(z.startTime<=D)o(m),z.sortIndex=z.expirationTime,e(p,z);else break;z=i(m)}}function G(D){if(E=!1,O(D),!A)if(i(p)!==null)A=!0,$||($=!0,Ee());else{var z=i(m);z!==null&&j(G,z.startTime-D)}}var $=!1,V=-1,re=5,Y=-1;function me(){return R?!0:!(t.unstable_now()-Y<re)}function ge(){if(R=!1,$){var D=t.unstable_now();Y=D;var z=!0;try{e:{A=!1,E&&(E=!1,k(V),V=-1),b=!0;var oe=S;try{t:{for(O(D),_=i(p);_!==null&&!(_.expirationTime>D&&me());){var ue=_.callback;if(typeof ue=="function"){_.callback=null,S=_.priorityLevel;var de=ue(_.expirationTime<=D);if(D=t.unstable_now(),typeof de=="function"){_.callback=de,O(D),z=!0;break t}_===i(p)&&o(p),O(D)}else o(p);_=i(p)}if(_!==null)z=!0;else{var N=i(m);N!==null&&j(G,N.startTime-D),z=!1}}break e}finally{_=null,S=oe,b=!1}z=void 0}}finally{z?Ee():$=!1}}}var Ee;if(typeof w=="function")Ee=function(){w(ge)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ne=U.port2;U.port1.onmessage=ge,Ee=function(){ne.postMessage(null)}}else Ee=function(){M(ge,0)};function j(D,z){V=M(function(){D(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(D){switch(S){case 1:case 2:case 3:var z=3;break;default:z=S}var oe=S;S=z;try{return D()}finally{S=oe}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var oe=S;S=D;try{return z()}finally{S=oe}},t.unstable_scheduleCallback=function(D,z,oe){var ue=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ue+oe:ue):oe=ue,D){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=oe+de,D={id:y++,callback:z,priorityLevel:D,startTime:oe,expirationTime:de,sortIndex:-1},oe>ue?(D.sortIndex=oe,e(m,D),i(p)===null&&D===i(m)&&(E?(k(V),V=-1):E=!0,j(G,oe-ue))):(D.sortIndex=de,e(p,D),A||b||(A=!0,$||($=!0,Ee()))),D},t.unstable_shouldYield=me,t.unstable_wrapCallback=function(D){var z=S;return function(){var oe=S;S=z;try{return D.apply(this,arguments)}finally{S=oe}}}})(Td)),Td}var x0;function wC(){return x0||(x0=1,Sd.exports=RC()),Sd.exports}var xd={exports:{}},Qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0;function MC(){if(b0)return Qt;b0=1;var t=Fh();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,m,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:p,containerInfo:m,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Qt.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,y)},Qt.flushSync=function(p){var m=c.T,y=o.p;try{if(c.T=null,o.p=2,p)return p()}finally{c.T=m,o.p=y,o.d.f()}},Qt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(p,m))},Qt.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},Qt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,_=d(y,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?o.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:b}):y==="script"&&o.d.X(p,{crossOrigin:_,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Qt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(p)},Qt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,_=d(y,m.crossOrigin);o.d.L(p,y,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Qt.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=d(m.as,m.crossOrigin);o.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(p)},Qt.requestFormReset=function(p){o.d.r(p)},Qt.unstable_batchedUpdates=function(p,m){return p(m)},Qt.useFormState=function(p,m,y){return c.H.useFormState(p,m,y)},Qt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Qt.version="19.2.3",Qt}var C0;function NC(){if(C0)return xd.exports;C0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xd.exports=MC(),xd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function IC(){if(E0)return ta;E0=1;var t=wC(),e=Fh(),i=NC();function o(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(o(188))}function m(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(o(188));return r!==n?null:n}for(var a=n,u=r;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return p(g),n;if(v===u)return p(g),r;v=v.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=v;else{for(var T=!1,C=g.child;C;){if(C===a){T=!0,a=g,u=v;break}if(C===u){T=!0,u=g,a=v;break}C=C.sibling}if(!T){for(C=v.child;C;){if(C===a){T=!0,a=v,u=g;break}if(C===u){T=!0,u=v,a=g;break}C=C.sibling}if(!T)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:r}function y(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=y(n),r!==null)return r;n=n.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),w=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function Ee(n){return n===null||typeof n!="object"?null:(n=ge&&n[ge]||n["@@iterator"],typeof n=="function"?n:null)}var U=Symbol.for("react.client.reference");function ne(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===U?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case E:return"Fragment";case M:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case $:return"SuspenseList";case Y:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case w:return n.displayName||"Context";case k:return(n._context.displayName||"Context")+".Consumer";case O:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return r=n.displayName||null,r!==null?r:ne(n.type)||"Memo";case re:r=n._payload,n=n._init;try{return ne(n(r))}catch{}}return null}var j=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},ue=[],de=-1;function N(n){return{current:n}}function J(n){0>de||(n.current=ue[de],ue[de]=null,de--)}function ce(n,r){de++,ue[de]=n.current,n.current=r}var W=N(null),fe=N(null),se=N(null),ae=N(null);function Ae(n,r){switch(ce(se,r),ce(fe,n),ce(W,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Gy(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Gy(r),n=Vy(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(W),ce(W,n)}function we(){J(W),J(fe),J(se)}function Ct(n){n.memoizedState!==null&&ce(ae,n);var r=W.current,a=Vy(r,n.type);r!==a&&(ce(fe,n),ce(W,a))}function Xe(n){fe.current===n&&(J(W),J(fe)),ae.current===n&&(J(ae),Xs._currentValue=oe)}var It,fn;function it(n){if(It===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);It=r&&r[1]||"",fn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+n+fn}var ot=!1;function rt(n,r){if(!n||ot)return"";ot=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(X){var K=X}Reflect.construct(n,[],te)}else{try{te.call()}catch(X){K=X}n.call(te.prototype)}}else{try{throw Error()}catch(X){K=X}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),T=v[0],C=v[1];if(T&&C){var I=T.split(`
`),q=C.split(`
`);for(g=u=0;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;for(;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;if(u===I.length||g===q.length)for(u=I.length-1,g=q.length-1;1<=u&&0<=g&&I[u]!==q[g];)g--;for(;1<=u&&0<=g;u--,g--)if(I[u]!==q[g]){if(u!==1||g!==1)do if(u--,g--,0>g||I[u]!==q[g]){var Q=`
`+I[u].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=u&&0<=g);break}}}finally{ot=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?it(a):""}function tn(n,r){switch(n.tag){case 26:case 27:case 5:return it(n.type);case 16:return it("Lazy");case 13:return n.child!==r&&r!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return rt(n.type,!1);case 11:return rt(n.type.render,!1);case 1:return rt(n.type,!0);case 31:return it("Activity");default:return""}}function st(n){try{var r="",a=null;do r+=tn(n,a),a=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Dt=Object.prototype.hasOwnProperty,Dn=t.unstable_scheduleCallback,ei=t.unstable_cancelCallback,dn=t.unstable_shouldYield,dt=t.unstable_requestPaint,Ve=t.unstable_now,mt=t.unstable_getCurrentPriorityLevel,St=t.unstable_ImmediatePriority,ie=t.unstable_UserBlockingPriority,he=t.unstable_NormalPriority,ke=t.unstable_LowPriority,Je=t.unstable_IdlePriority,Tt=t.log,nn=t.unstable_setDisableYieldValue,Ht=null,Xt=null;function qt(n){if(typeof Tt=="function"&&nn(n),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(Ht,n)}catch{}}var at=Math.clz32?Math.clz32:Bi,ic=Math.log,as=Math.LN2;function Bi(n){return n>>>=0,n===0?32:31-(ic(n)/as|0)|0}var za=256,Oa=262144,Ba=4194304;function _o(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ga(n,r,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var C=u&134217727;return C!==0?(u=C&~v,u!==0?g=_o(u):(T&=C,T!==0?g=_o(T):a||(a=C&~n,a!==0&&(g=_o(a))))):(C=u&~v,C!==0?g=_o(C):T!==0?g=_o(T):a||(a=u&~n,a!==0&&(g=_o(a)))),g===0?0:r!==0&&r!==g&&(r&v)===0&&(v=g&-g,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:g}function ls(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function lx(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tp(){var n=Ba;return Ba<<=1,(Ba&62914560)===0&&(Ba=4194304),n}function oc(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function us(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ux(n,r,a,u,g,v){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var C=n.entanglements,I=n.expirationTimes,q=n.hiddenUpdates;for(a=T&~a;0<a;){var Q=31-at(a),te=1<<Q;C[Q]=0,I[Q]=-1;var K=q[Q];if(K!==null)for(q[Q]=null,Q=0;Q<K.length;Q++){var X=K[Q];X!==null&&(X.lane&=-536870913)}a&=~te}u!==0&&xp(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(T&~r))}function xp(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-at(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function bp(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var u=31-at(a),g=1<<u;g&r|n[u]&r&&(n[u]|=r),a&=~g}}function Cp(n,r){var a=r&-r;return a=(a&42)!==0?1:rc(a),(a&(n.suspendedLanes|r))!==0?0:a}function rc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function sc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ep(){var n=z.p;return n!==0?n:(n=window.event,n===void 0?32:c0(n.type))}function Ap(n,r){var a=z.p;try{return z.p=n,r()}finally{z.p=a}}var Gi=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Gi,hn="__reactProps$"+Gi,er="__reactContainer$"+Gi,ac="__reactEvents$"+Gi,cx="__reactListeners$"+Gi,fx="__reactHandles$"+Gi,Rp="__reactResources$"+Gi,cs="__reactMarker$"+Gi;function lc(n){delete n[Ft],delete n[hn],delete n[ac],delete n[cx],delete n[fx]}function tr(n){var r=n[Ft];if(r)return r;for(var a=n.parentNode;a;){if(r=a[er]||a[Ft]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=$y(n);n!==null;){if(a=n[Ft])return a;n=$y(n)}return r}n=a,a=n.parentNode}return null}function nr(n){if(n=n[Ft]||n[er]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function fs(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(o(33))}function ir(n){var r=n[Rp];return r||(r=n[Rp]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function zt(n){n[cs]=!0}var wp=new Set,Mp={};function So(n,r){or(n,r),or(n+"Capture",r)}function or(n,r){for(Mp[n]=r,n=0;n<r.length;n++)wp.add(r[n])}var dx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Np={},Ip={};function hx(n){return Dt.call(Ip,n)?!0:Dt.call(Np,n)?!1:dx.test(n)?Ip[n]=!0:(Np[n]=!0,!1)}function Va(n,r,a){if(hx(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Ha(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function fi(n,r,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+u)}}function kn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Dp(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function px(n,r,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return g.call(this)},set:function(T){a=""+T,v.call(this,T)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function uc(n){if(!n._valueTracker){var r=Dp(n)?"checked":"value";n._valueTracker=px(n,r,""+n[r])}}function kp(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return n&&(u=Dp(n)?n.checked?"true":"false":n.value),n=u,n!==a?(r.setValue(n),!0):!1}function qa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var mx=/[\n"\\]/g;function Un(n){return n.replace(mx,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function cc(n,r,a,u,g,v,T,C){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),r!=null?T==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+kn(r)):n.value!==""+kn(r)&&(n.value=""+kn(r)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),r!=null?fc(n,T,kn(r)):a!=null?fc(n,T,kn(a)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+kn(C):n.removeAttribute("name")}function Up(n,r,a,u,g,v,T,C){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){uc(n);return}a=a!=null?""+kn(a):"",r=r!=null?""+kn(r):a,C||r===n.value||(n.value=r),n.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=C?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),uc(n)}function fc(n,r,a){r==="number"&&qa(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function rr(n,r,a,u){if(n=n.options,r){r={};for(var g=0;g<a.length;g++)r["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=r.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+kn(a),r=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}r!==null||n[g].disabled||(r=n[g])}r!==null&&(r.selected=!0)}}function Pp(n,r,a){if(r!=null&&(r=""+kn(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+kn(a):""}function Lp(n,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(o(92));if(j(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=kn(r),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),uc(n)}function sr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var gx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zp(n,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,a):typeof a!="number"||a===0||gx.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function Op(n,r,a){if(r!=null&&typeof r!="object")throw Error(o(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&a[g]!==u&&zp(n,g,u)}else for(var v in r)r.hasOwnProperty(v)&&zp(n,v,r[v])}function dc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(n){return vx.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function di(){}var hc=null;function pc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ar=null,lr=null;function Bp(n){var r=nr(n);if(r&&(n=r.stateNode)){var a=n[hn]||null;e:switch(n=r.stateNode,r.type){case"input":if(cc(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Un(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==n&&u.form===n.form){var g=u[hn]||null;if(!g)throw Error(o(90));cc(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===n.form&&kp(u)}break e;case"textarea":Pp(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&rr(n,!!a.multiple,r,!1)}}}var mc=!1;function Gp(n,r,a){if(mc)return n(r,a);mc=!0;try{var u=n(r);return u}finally{if(mc=!1,(ar!==null||lr!==null)&&(Il(),ar&&(r=ar,n=lr,lr=ar=null,Bp(r),n)))for(r=0;r<n.length;r++)Bp(n[r])}}function ds(n,r){var a=n.stateNode;if(a===null)return null;var u=a[hn]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=!1;if(hi)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){gc=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{gc=!1}var Vi=null,yc=null,Ja=null;function Vp(){if(Ja)return Ja;var n,r=yc,a=r.length,u,g="value"in Vi?Vi.value:Vi.textContent,v=g.length;for(n=0;n<a&&r[n]===g[n];n++);var T=a-n;for(u=1;u<=T&&r[a-u]===g[v-u];u++);return Ja=g.slice(n,1<u?1-u:void 0)}function Ka(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ya(){return!0}function Hp(){return!1}function pn(n){function r(a,u,g,v,T){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ya:Hp,this.isPropagationStopped=Hp,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ya)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ya)},persist:function(){},isPersistent:Ya}),r}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$a=pn(To),ps=_({},To,{view:0,detail:0}),_x=pn(ps),vc,_c,ms,Xa=_({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ms&&(ms&&n.type==="mousemove"?(vc=n.screenX-ms.screenX,_c=n.screenY-ms.screenY):_c=vc=0,ms=n),vc)},movementY:function(n){return"movementY"in n?n.movementY:_c}}),qp=pn(Xa),Sx=_({},Xa,{dataTransfer:0}),Tx=pn(Sx),xx=_({},ps,{relatedTarget:0}),Sc=pn(xx),bx=_({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),Cx=pn(bx),Ex=_({},To,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ax=pn(Ex),Rx=_({},To,{data:0}),Fp=pn(Rx),wx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ix(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Nx[n])?!!r[n]:!1}function Tc(){return Ix}var Dx=_({},ps,{key:function(n){if(n.key){var r=wx[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ka(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Mx[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(n){return n.type==="keypress"?Ka(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ka(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),kx=pn(Dx),Ux=_({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jp=pn(Ux),Px=_({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),Lx=pn(Px),zx=_({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ox=pn(zx),Bx=_({},Xa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Gx=pn(Bx),Vx=_({},To,{newState:0,oldState:0}),Hx=pn(Vx),qx=[9,13,27,32],xc=hi&&"CompositionEvent"in window,gs=null;hi&&"documentMode"in document&&(gs=document.documentMode);var Fx=hi&&"TextEvent"in window&&!gs,Kp=hi&&(!xc||gs&&8<gs&&11>=gs),Yp=" ",$p=!1;function Xp(n,r){switch(n){case"keyup":return qx.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ur=!1;function Jx(n,r){switch(n){case"compositionend":return Qp(r);case"keypress":return r.which!==32?null:($p=!0,Yp);case"textInput":return n=r.data,n===Yp&&$p?null:n;default:return null}}function Kx(n,r){if(ur)return n==="compositionend"||!xc&&Xp(n,r)?(n=Vp(),Ja=yc=Vi=null,ur=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Kp&&r.locale!=="ko"?null:r.data;default:return null}}var Yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Yx[n.type]:r==="textarea"}function jp(n,r,a,u){ar?lr?lr.push(u):lr=[u]:ar=u,r=Ol(r,"onChange"),0<r.length&&(a=new $a("onChange","change",null,a,u),n.push({event:a,listeners:r}))}var ys=null,vs=null;function $x(n){Uy(n,0)}function Qa(n){var r=fs(n);if(kp(r))return n}function Wp(n,r){if(n==="change")return r}var em=!1;if(hi){var bc;if(hi){var Cc="oninput"in document;if(!Cc){var tm=document.createElement("div");tm.setAttribute("oninput","return;"),Cc=typeof tm.oninput=="function"}bc=Cc}else bc=!1;em=bc&&(!document.documentMode||9<document.documentMode)}function nm(){ys&&(ys.detachEvent("onpropertychange",im),vs=ys=null)}function im(n){if(n.propertyName==="value"&&Qa(vs)){var r=[];jp(r,vs,n,pc(n)),Gp($x,r)}}function Xx(n,r,a){n==="focusin"?(nm(),ys=r,vs=a,ys.attachEvent("onpropertychange",im)):n==="focusout"&&nm()}function Qx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qa(vs)}function Zx(n,r){if(n==="click")return Qa(r)}function jx(n,r){if(n==="input"||n==="change")return Qa(r)}function Wx(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var xn=typeof Object.is=="function"?Object.is:Wx;function _s(n,r){if(xn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Dt.call(r,g)||!xn(n[g],r[g]))return!1}return!0}function om(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rm(n,r){var a=om(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=r&&u>=r)return{node:a,offset:r-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=om(a)}}function sm(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?sm(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function am(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=qa(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=qa(n.document)}return r}function Ec(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var eb=hi&&"documentMode"in document&&11>=document.documentMode,cr=null,Ac=null,Ss=null,Rc=!1;function lm(n,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rc||cr==null||cr!==qa(u)||(u=cr,"selectionStart"in u&&Ec(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ss&&_s(Ss,u)||(Ss=u,u=Ol(Ac,"onSelect"),0<u.length&&(r=new $a("onSelect","select",null,r,a),n.push({event:r,listeners:u}),r.target=cr)))}function xo(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var fr={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionrun:xo("Transition","TransitionRun"),transitionstart:xo("Transition","TransitionStart"),transitioncancel:xo("Transition","TransitionCancel"),transitionend:xo("Transition","TransitionEnd")},wc={},um={};hi&&(um=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function bo(n){if(wc[n])return wc[n];if(!fr[n])return n;var r=fr[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in um)return wc[n]=r[a];return n}var cm=bo("animationend"),fm=bo("animationiteration"),dm=bo("animationstart"),tb=bo("transitionrun"),nb=bo("transitionstart"),ib=bo("transitioncancel"),hm=bo("transitionend"),pm=new Map,Mc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mc.push("scrollEnd");function Kn(n,r){pm.set(n,r),So(r,[n])}var Za=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Pn=[],dr=0,Nc=0;function ja(){for(var n=dr,r=Nc=dr=0;r<n;){var a=Pn[r];Pn[r++]=null;var u=Pn[r];Pn[r++]=null;var g=Pn[r];Pn[r++]=null;var v=Pn[r];if(Pn[r++]=null,u!==null&&g!==null){var T=u.pending;T===null?g.next=g:(g.next=T.next,T.next=g),u.pending=g}v!==0&&mm(a,g,v)}}function Wa(n,r,a,u){Pn[dr++]=n,Pn[dr++]=r,Pn[dr++]=a,Pn[dr++]=u,Nc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ic(n,r,a,u){return Wa(n,r,a,u),el(n)}function Co(n,r){return Wa(n,null,null,r),el(n)}function mm(n,r,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,v=n.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&r!==null&&(g=31-at(a),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[r]:u.push(r),r.lane=a|536870912),v):null}function el(n){if(50<Hs)throw Hs=0,Vf=null,Error(o(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var hr={};function ob(n,r,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(n,r,a,u){return new ob(n,r,a,u)}function Dc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pi(n,r){var a=n.alternate;return a===null?(a=bn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function gm(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function tl(n,r,a,u,g,v){var T=0;if(u=n,typeof n=="function")Dc(n)&&(T=1);else if(typeof n=="string")T=uC(n,a,W.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Y:return n=bn(31,a,r,g),n.elementType=Y,n.lanes=v,n;case E:return Eo(a.children,g,v,r);case R:T=8,g|=24;break;case M:return n=bn(12,a,r,g|2),n.elementType=M,n.lanes=v,n;case G:return n=bn(13,a,r,g),n.elementType=G,n.lanes=v,n;case $:return n=bn(19,a,r,g),n.elementType=$,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w:T=10;break e;case k:T=9;break e;case O:T=11;break e;case V:T=14;break e;case re:T=16,u=null;break e}T=29,a=Error(o(130,n===null?"null":typeof n,"")),u=null}return r=bn(T,a,r,g),r.elementType=n,r.type=u,r.lanes=v,r}function Eo(n,r,a,u){return n=bn(7,n,u,r),n.lanes=a,n}function kc(n,r,a){return n=bn(6,n,null,r),n.lanes=a,n}function ym(n){var r=bn(18,null,null,0);return r.stateNode=n,r}function Uc(n,r,a){return r=bn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var vm=new WeakMap;function Ln(n,r){if(typeof n=="object"&&n!==null){var a=vm.get(n);return a!==void 0?a:(r={value:n,source:r,stack:st(r)},vm.set(n,r),r)}return{value:n,source:r,stack:st(r)}}var pr=[],mr=0,nl=null,Ts=0,zn=[],On=0,Hi=null,ti=1,ni="";function mi(n,r){pr[mr++]=Ts,pr[mr++]=nl,nl=n,Ts=r}function _m(n,r,a){zn[On++]=ti,zn[On++]=ni,zn[On++]=Hi,Hi=n;var u=ti;n=ni;var g=32-at(u)-1;u&=~(1<<g),a+=1;var v=32-at(r)+g;if(30<v){var T=g-g%5;v=(u&(1<<T)-1).toString(32),u>>=T,g-=T,ti=1<<32-at(r)+g|a<<g|u,ni=v+n}else ti=1<<v|a<<g|u,ni=n}function Pc(n){n.return!==null&&(mi(n,1),_m(n,1,0))}function Lc(n){for(;n===nl;)nl=pr[--mr],pr[mr]=null,Ts=pr[--mr],pr[mr]=null;for(;n===Hi;)Hi=zn[--On],zn[On]=null,ni=zn[--On],zn[On]=null,ti=zn[--On],zn[On]=null}function Sm(n,r){zn[On++]=ti,zn[On++]=ni,zn[On++]=Hi,ti=r.id,ni=r.overflow,Hi=n}var Jt=null,lt=null,Oe=!1,qi=null,Bn=!1,zc=Error(o(519));function Fi(n){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xs(Ln(r,n)),zc}function Tm(n){var r=n.stateNode,a=n.type,u=n.memoizedProps;switch(r[Ft]=n,r[hn]=u,a){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(a=0;a<Fs.length;a++)Pe(Fs[a],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Pe("invalid",r),Up(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",r);break;case"textarea":Pe("invalid",r),Lp(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||Oy(r.textContent,a)?(u.popover!=null&&(Pe("beforetoggle",r),Pe("toggle",r)),u.onScroll!=null&&Pe("scroll",r),u.onScrollEnd!=null&&Pe("scrollend",r),u.onClick!=null&&(r.onclick=di),r=!0):r=!1,r||Fi(n,!0)}function xm(n){for(Jt=n.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Jt=Jt.return}}function gr(n){if(n!==Jt)return!1;if(!Oe)return xm(n),Oe=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||nd(n.type,n.memoizedProps)),a=!a),a&&lt&&Fi(n),xm(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));lt=Yy(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));lt=Yy(n)}else r===27?(r=lt,oo(n.type)?(n=ad,ad=null,lt=n):lt=r):lt=Jt?Vn(n.stateNode.nextSibling):null;return!0}function Ao(){lt=Jt=null,Oe=!1}function Oc(){var n=qi;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),qi=null),n}function xs(n){qi===null?qi=[n]:qi.push(n)}var Bc=N(null),Ro=null,gi=null;function Ji(n,r,a){ce(Bc,r._currentValue),r._currentValue=a}function yi(n){n._currentValue=Bc.current,J(Bc)}function Gc(n,r,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===a)break;n=n.return}}function Vc(n,r,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var T=g.child;v=v.firstContext;e:for(;v!==null;){var C=v;v=g;for(var I=0;I<r.length;I++)if(C.context===r[I]){v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),Gc(v.return,a,n),u||(T=null);break e}v=C.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(o(341));T.lanes|=a,v=T.alternate,v!==null&&(v.lanes|=a),Gc(T,a,n),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===n){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function yr(n,r,a,u){n=null;for(var g=r,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var C=g.type;xn(g.pendingProps.value,T.value)||(n!==null?n.push(C):n=[C])}}else if(g===ae.current){if(T=g.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Xs):n=[Xs])}g=g.return}n!==null&&Vc(r,n,a,u),r.flags|=262144}function il(n){for(n=n.firstContext;n!==null;){if(!xn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function wo(n){Ro=n,gi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Kt(n){return bm(Ro,n)}function ol(n,r){return Ro===null&&wo(n),bm(n,r)}function bm(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},gi===null){if(n===null)throw Error(o(308));gi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else gi=gi.next=r;return a}var rb=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},sb=t.unstable_scheduleCallback,ab=t.unstable_NormalPriority,Et={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hc(){return{controller:new rb,data:new Map,refCount:0}}function bs(n){n.refCount--,n.refCount===0&&sb(ab,function(){n.controller.abort()})}var Cs=null,qc=0,vr=0,_r=null;function lb(n,r){if(Cs===null){var a=Cs=[];qc=0,vr=Yf(),_r={status:"pending",value:void 0,then:function(u){a.push(u)}}}return qc++,r.then(Cm,Cm),r}function Cm(){if(--qc===0&&Cs!==null){_r!==null&&(_r.status="fulfilled");var n=Cs;Cs=null,vr=0,_r=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function ub(n,r){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<a.length;g++)(0,a[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Em=D.S;D.S=function(n,r){ly=Ve(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&lb(n,r),Em!==null&&Em(n,r)};var Mo=N(null);function Fc(){var n=Mo.current;return n!==null?n:We.pooledCache}function rl(n,r){r===null?ce(Mo,Mo.current):ce(Mo,r.pool)}function Am(){var n=Fc();return n===null?null:{parent:Et._currentValue,pool:n}}var Sr=Error(o(460)),Jc=Error(o(474)),sl=Error(o(542)),al={then:function(){}};function Rm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function wm(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(di,di),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Nm(n),n;default:if(typeof r.status=="string")r.then(di,di);else{if(n=We,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Nm(n),n}throw Io=r,Sr}}function No(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Io=a,Sr):a}}var Io=null;function Mm(){if(Io===null)throw Error(o(459));var n=Io;return Io=null,n}function Nm(n){if(n===Sr||n===sl)throw Error(o(483))}var Tr=null,Es=0;function ll(n){var r=Es;return Es+=1,Tr===null&&(Tr=[]),wm(Tr,n,r)}function As(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function ul(n,r){throw r.$$typeof===S?Error(o(525)):(n=Object.prototype.toString.call(r),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Im(n){function r(B,L){if(n){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!n)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function u(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function g(B,L){return B=pi(B,L),B.index=0,B.sibling=null,B}function v(B,L,H){return B.index=H,n?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function T(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function C(B,L,H,Z){return L===null||L.tag!==6?(L=kc(H,B.mode,Z),L.return=B,L):(L=g(L,H),L.return=B,L)}function I(B,L,H,Z){var xe=H.type;return xe===E?Q(B,L,H.props.children,Z,H.key):L!==null&&(L.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===re&&No(xe)===L.type)?(L=g(L,H.props),As(L,H),L.return=B,L):(L=tl(H.type,H.key,H.props,null,B.mode,Z),As(L,H),L.return=B,L)}function q(B,L,H,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Uc(H,B.mode,Z),L.return=B,L):(L=g(L,H.children||[]),L.return=B,L)}function Q(B,L,H,Z,xe){return L===null||L.tag!==7?(L=Eo(H,B.mode,Z,xe),L.return=B,L):(L=g(L,H),L.return=B,L)}function te(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=kc(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return H=tl(L.type,L.key,L.props,null,B.mode,H),As(H,L),H.return=B,H;case A:return L=Uc(L,B.mode,H),L.return=B,L;case re:return L=No(L),te(B,L,H)}if(j(L)||Ee(L))return L=Eo(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return te(B,ll(L),H);if(L.$$typeof===w)return te(B,ol(B,L),H);ul(B,L)}return null}function K(B,L,H,Z){var xe=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return xe!==null?null:C(B,L,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===xe?I(B,L,H,Z):null;case A:return H.key===xe?q(B,L,H,Z):null;case re:return H=No(H),K(B,L,H,Z)}if(j(H)||Ee(H))return xe!==null?null:Q(B,L,H,Z,null);if(typeof H.then=="function")return K(B,L,ll(H),Z);if(H.$$typeof===w)return K(B,L,ol(B,H),Z);ul(B,H)}return null}function X(B,L,H,Z,xe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return B=B.get(H)||null,C(L,B,""+Z,xe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return B=B.get(Z.key===null?H:Z.key)||null,I(L,B,Z,xe);case A:return B=B.get(Z.key===null?H:Z.key)||null,q(L,B,Z,xe);case re:return Z=No(Z),X(B,L,H,Z,xe)}if(j(Z)||Ee(Z))return B=B.get(H)||null,Q(L,B,Z,xe,null);if(typeof Z.then=="function")return X(B,L,H,ll(Z),xe);if(Z.$$typeof===w)return X(B,L,H,ol(L,Z),xe);ul(L,Z)}return null}function ve(B,L,H,Z){for(var xe=null,He=null,Te=L,De=L=0,ze=null;Te!==null&&De<H.length;De++){Te.index>De?(ze=Te,Te=null):ze=Te.sibling;var qe=K(B,Te,H[De],Z);if(qe===null){Te===null&&(Te=ze);break}n&&Te&&qe.alternate===null&&r(B,Te),L=v(qe,L,De),He===null?xe=qe:He.sibling=qe,He=qe,Te=ze}if(De===H.length)return a(B,Te),Oe&&mi(B,De),xe;if(Te===null){for(;De<H.length;De++)Te=te(B,H[De],Z),Te!==null&&(L=v(Te,L,De),He===null?xe=Te:He.sibling=Te,He=Te);return Oe&&mi(B,De),xe}for(Te=u(Te);De<H.length;De++)ze=X(Te,B,De,H[De],Z),ze!==null&&(n&&ze.alternate!==null&&Te.delete(ze.key===null?De:ze.key),L=v(ze,L,De),He===null?xe=ze:He.sibling=ze,He=ze);return n&&Te.forEach(function(uo){return r(B,uo)}),Oe&&mi(B,De),xe}function Ce(B,L,H,Z){if(H==null)throw Error(o(151));for(var xe=null,He=null,Te=L,De=L=0,ze=null,qe=H.next();Te!==null&&!qe.done;De++,qe=H.next()){Te.index>De?(ze=Te,Te=null):ze=Te.sibling;var uo=K(B,Te,qe.value,Z);if(uo===null){Te===null&&(Te=ze);break}n&&Te&&uo.alternate===null&&r(B,Te),L=v(uo,L,De),He===null?xe=uo:He.sibling=uo,He=uo,Te=ze}if(qe.done)return a(B,Te),Oe&&mi(B,De),xe;if(Te===null){for(;!qe.done;De++,qe=H.next())qe=te(B,qe.value,Z),qe!==null&&(L=v(qe,L,De),He===null?xe=qe:He.sibling=qe,He=qe);return Oe&&mi(B,De),xe}for(Te=u(Te);!qe.done;De++,qe=H.next())qe=X(Te,B,De,qe.value,Z),qe!==null&&(n&&qe.alternate!==null&&Te.delete(qe.key===null?De:qe.key),L=v(qe,L,De),He===null?xe=qe:He.sibling=qe,He=qe);return n&&Te.forEach(function(SC){return r(B,SC)}),Oe&&mi(B,De),xe}function je(B,L,H,Z){if(typeof H=="object"&&H!==null&&H.type===E&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var xe=H.key;L!==null;){if(L.key===xe){if(xe=H.type,xe===E){if(L.tag===7){a(B,L.sibling),Z=g(L,H.props.children),Z.return=B,B=Z;break e}}else if(L.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===re&&No(xe)===L.type){a(B,L.sibling),Z=g(L,H.props),As(Z,H),Z.return=B,B=Z;break e}a(B,L);break}else r(B,L);L=L.sibling}H.type===E?(Z=Eo(H.props.children,B.mode,Z,H.key),Z.return=B,B=Z):(Z=tl(H.type,H.key,H.props,null,B.mode,Z),As(Z,H),Z.return=B,B=Z)}return T(B);case A:e:{for(xe=H.key;L!==null;){if(L.key===xe)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),Z=g(L,H.children||[]),Z.return=B,B=Z;break e}else{a(B,L);break}else r(B,L);L=L.sibling}Z=Uc(H,B.mode,Z),Z.return=B,B=Z}return T(B);case re:return H=No(H),je(B,L,H,Z)}if(j(H))return ve(B,L,H,Z);if(Ee(H)){if(xe=Ee(H),typeof xe!="function")throw Error(o(150));return H=xe.call(H),Ce(B,L,H,Z)}if(typeof H.then=="function")return je(B,L,ll(H),Z);if(H.$$typeof===w)return je(B,L,ol(B,H),Z);ul(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),Z=g(L,H),Z.return=B,B=Z):(a(B,L),Z=kc(H,B.mode,Z),Z.return=B,B=Z),T(B)):a(B,L)}return function(B,L,H,Z){try{Es=0;var xe=je(B,L,H,Z);return Tr=null,xe}catch(Te){if(Te===Sr||Te===sl)throw Te;var He=bn(29,Te,null,B.mode);return He.lanes=Z,He.return=B,He}finally{}}}var Do=Im(!0),Dm=Im(!1),Ki=!1;function Kc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yc(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Yi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $i(n,r,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=el(n),mm(n,null,a),r}return Wa(n,u,r,a),el(n)}function Rs(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,a|=u,r.lanes=a,bp(n,a)}}function $c(n,r){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=T:v=v.next=T,a=a.next}while(a!==null);v===null?g=v=r:v=v.next=r}else g=v=r;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Xc=!1;function ws(){if(Xc){var n=_r;if(n!==null)throw n}}function Ms(n,r,a,u){Xc=!1;var g=n.updateQueue;Ki=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var I=C,q=I.next;I.next=null,T===null?v=q:T.next=q,T=I;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,C=Q.lastBaseUpdate,C!==T&&(C===null?Q.firstBaseUpdate=q:C.next=q,Q.lastBaseUpdate=I))}if(v!==null){var te=g.baseState;T=0,Q=q=I=null,C=v;do{var K=C.lane&-536870913,X=K!==C.lane;if(X?(Le&K)===K:(u&K)===K){K!==0&&K===vr&&(Xc=!0),Q!==null&&(Q=Q.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ve=n,Ce=C;K=r;var je=a;switch(Ce.tag){case 1:if(ve=Ce.payload,typeof ve=="function"){te=ve.call(je,te,K);break e}te=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ce.payload,K=typeof ve=="function"?ve.call(je,te,K):ve,K==null)break e;te=_({},te,K);break e;case 2:Ki=!0}}K=C.callback,K!==null&&(n.flags|=64,X&&(n.flags|=8192),X=g.callbacks,X===null?g.callbacks=[K]:X.push(K))}else X={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Q===null?(q=Q=X,I=te):Q=Q.next=X,T|=K;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;X=C,C=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);Q===null&&(I=te),g.baseState=I,g.firstBaseUpdate=q,g.lastBaseUpdate=Q,v===null&&(g.shared.lanes=0),Wi|=T,n.lanes=T,n.memoizedState=te}}function km(n,r){if(typeof n!="function")throw Error(o(191,n));n.call(r)}function Um(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)km(a[n],r)}var xr=N(null),cl=N(0);function Pm(n,r){n=Ai,ce(cl,n),ce(xr,r),Ai=n|r.baseLanes}function Qc(){ce(cl,Ai),ce(xr,xr.current)}function Zc(){Ai=cl.current,J(xr),J(cl)}var Cn=N(null),Gn=null;function Xi(n){var r=n.alternate;ce(xt,xt.current&1),ce(Cn,n),Gn===null&&(r===null||xr.current!==null||r.memoizedState!==null)&&(Gn=n)}function jc(n){ce(xt,xt.current),ce(Cn,n),Gn===null&&(Gn=n)}function Lm(n){n.tag===22?(ce(xt,xt.current),ce(Cn,n),Gn===null&&(Gn=n)):Qi()}function Qi(){ce(xt,xt.current),ce(Cn,Cn.current)}function En(n){J(Cn),Gn===n&&(Gn=null),J(xt)}var xt=N(0);function fl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||rd(a)||sd(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vi=0,Ie=null,Qe=null,At=null,dl=!1,br=!1,ko=!1,hl=0,Ns=0,Cr=null,cb=0;function gt(){throw Error(o(321))}function Wc(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!xn(n[a],r[a]))return!1;return!0}function ef(n,r,a,u,g,v){return vi=v,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,D.H=n===null||n.memoizedState===null?_g:gf,ko=!1,v=a(u,g),ko=!1,br&&(v=Om(r,a,u,g)),zm(n),v}function zm(n){D.H=ks;var r=Qe!==null&&Qe.next!==null;if(vi=0,At=Qe=Ie=null,dl=!1,Ns=0,Cr=null,r)throw Error(o(300));n===null||Rt||(n=n.dependencies,n!==null&&il(n)&&(Rt=!0))}function Om(n,r,a,u){Ie=n;var g=0;do{if(br&&(Cr=null),Ns=0,br=!1,25<=g)throw Error(o(301));if(g+=1,At=Qe=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}D.H=Sg,v=r(a,u)}while(br);return v}function fb(){var n=D.H,r=n.useState()[0];return r=typeof r.then=="function"?Is(r):r,n=n.useState()[0],(Qe!==null?Qe.memoizedState:null)!==n&&(Ie.flags|=1024),r}function tf(){var n=hl!==0;return hl=0,n}function nf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function of(n){if(dl){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}dl=!1}vi=0,At=Qe=Ie=null,br=!1,Ns=hl=0,Cr=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ie.memoizedState=At=n:At=At.next=n,At}function bt(){if(Qe===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=Qe.next;var r=At===null?Ie.memoizedState:At.next;if(r!==null)At=r,Qe=n;else{if(n===null)throw Ie.alternate===null?Error(o(467)):Error(o(310));Qe=n,n={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},At===null?Ie.memoizedState=At=n:At=At.next=n}return At}function pl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Is(n){var r=Ns;return Ns+=1,Cr===null&&(Cr=[]),n=wm(Cr,n,r),r=Ie,(At===null?r.memoizedState:At.next)===null&&(r=r.alternate,D.H=r===null||r.memoizedState===null?_g:gf),n}function ml(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Is(n);if(n.$$typeof===w)return Kt(n)}throw Error(o(438,String(n)))}function rf(n){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Ie.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=pl(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),u=0;u<n;u++)a[u]=me;return r.index++,a}function _i(n,r){return typeof r=="function"?r(n):r}function gl(n){var r=bt();return sf(r,Qe,n)}function sf(n,r,a){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}r.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{r=g.next;var C=T=null,I=null,q=r,Q=!1;do{var te=q.lane&-536870913;if(te!==q.lane?(Le&te)===te:(vi&te)===te){var K=q.revertLane;if(K===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),te===vr&&(Q=!0);else if((vi&K)===K){q=q.next,K===vr&&(Q=!0);continue}else te={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(C=I=te,T=v):I=I.next=te,Ie.lanes|=K,Wi|=K;te=q.action,ko&&a(v,te),v=q.hasEagerState?q.eagerState:a(v,te)}else K={lane:te,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(C=I=K,T=v):I=I.next=K,Ie.lanes|=te,Wi|=te;q=q.next}while(q!==null&&q!==r);if(I===null?T=v:I.next=C,!xn(v,n.memoizedState)&&(Rt=!0,Q&&(a=_r,a!==null)))throw a;n.memoizedState=v,n.baseState=T,n.baseQueue=I,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function af(n){var r=bt(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,v=r.memoizedState;if(g!==null){a.pending=null;var T=g=g.next;do v=n(v,T.action),T=T.next;while(T!==g);xn(v,r.memoizedState)||(Rt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,u]}function Bm(n,r,a){var u=Ie,g=bt(),v=Oe;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=r();var T=!xn((Qe||g).memoizedState,a);if(T&&(g.memoizedState=a,Rt=!0),g=g.queue,cf(Hm.bind(null,u,g,n),[n]),g.getSnapshot!==r||T||At!==null&&At.memoizedState.tag&1){if(u.flags|=2048,Er(9,{destroy:void 0},Vm.bind(null,u,g,a,r),null),We===null)throw Error(o(349));v||(vi&127)!==0||Gm(u,r,a)}return a}function Gm(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=pl(),Ie.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Vm(n,r,a,u){r.value=a,r.getSnapshot=u,qm(r)&&Fm(n)}function Hm(n,r,a){return a(function(){qm(r)&&Fm(n)})}function qm(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!xn(n,a)}catch{return!0}}function Fm(n){var r=Co(n,2);r!==null&&_n(r,n,2)}function lf(n){var r=on();if(typeof n=="function"){var a=n;if(n=a(),ko){qt(!0);try{a()}finally{qt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:n},r}function Jm(n,r,a,u){return n.baseState=a,sf(n,Qe,typeof u=="function"?u:_i)}function db(n,r,a,u,g){if(_l(n))throw Error(o(485));if(n=r.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};D.T!==null?a(!0):v.isTransition=!1,u(v),a=r.pending,a===null?(v.next=r.pending=v,Km(r,v)):(v.next=a.next,r.pending=a.next=v)}}function Km(n,r){var a=r.action,u=r.payload,g=n.state;if(r.isTransition){var v=D.T,T={};D.T=T;try{var C=a(g,u),I=D.S;I!==null&&I(T,C),Ym(n,r,C)}catch(q){uf(n,r,q)}finally{v!==null&&T.types!==null&&(v.types=T.types),D.T=v}}else try{v=a(g,u),Ym(n,r,v)}catch(q){uf(n,r,q)}}function Ym(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){$m(n,r,u)},function(u){return uf(n,r,u)}):$m(n,r,a)}function $m(n,r,a){r.status="fulfilled",r.value=a,Xm(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,Km(n,a)))}function uf(n,r,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Xm(r),r=r.next;while(r!==u)}n.action=null}function Xm(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Qm(n,r){return r}function Zm(n,r){if(Oe){var a=We.formState;if(a!==null){e:{var u=Ie;if(Oe){if(lt){t:{for(var g=lt,v=Bn;g.nodeType!==8;){if(!v){g=null;break t}if(g=Vn(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){lt=Vn(g.nextSibling),u=g.data==="F!";break e}}Fi(u)}u=!1}u&&(r=a[0])}}return a=on(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qm,lastRenderedState:r},a.queue=u,a=gg.bind(null,Ie,u),u.dispatch=a,u=lf(!1),v=mf.bind(null,Ie,!1,u.queue),u=on(),g={state:r,dispatch:null,action:n,pending:null},u.queue=g,a=db.bind(null,Ie,g,v,a),g.dispatch=a,u.memoizedState=n,[r,a,!1]}function jm(n){var r=bt();return Wm(r,Qe,n)}function Wm(n,r,a){if(r=sf(n,r,Qm)[0],n=gl(_i)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Is(r)}catch(T){throw T===Sr?sl:T}else u=r;r=bt();var g=r.queue,v=g.dispatch;return a!==r.memoizedState&&(Ie.flags|=2048,Er(9,{destroy:void 0},hb.bind(null,g,a),null)),[u,v,n]}function hb(n,r){n.action=r}function eg(n){var r=bt(),a=Qe;if(a!==null)return Wm(r,a,n);bt(),r=r.memoizedState,a=bt();var u=a.queue.dispatch;return a.memoizedState=n,[r,u,!1]}function Er(n,r,a,u){return n={tag:n,create:a,deps:u,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=pl(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,r.lastEffect=n),n}function tg(){return bt().memoizedState}function yl(n,r,a,u){var g=on();Ie.flags|=n,g.memoizedState=Er(1|r,{destroy:void 0},a,u===void 0?null:u)}function vl(n,r,a,u){var g=bt();u=u===void 0?null:u;var v=g.memoizedState.inst;Qe!==null&&u!==null&&Wc(u,Qe.memoizedState.deps)?g.memoizedState=Er(r,v,a,u):(Ie.flags|=n,g.memoizedState=Er(1|r,v,a,u))}function ng(n,r){yl(8390656,8,n,r)}function cf(n,r){vl(2048,8,n,r)}function pb(n){Ie.flags|=4;var r=Ie.updateQueue;if(r===null)r=pl(),Ie.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function ig(n){var r=bt().memoizedState;return pb({ref:r,nextImpl:n}),function(){if((Ke&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function og(n,r){return vl(4,2,n,r)}function rg(n,r){return vl(4,4,n,r)}function sg(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function ag(n,r,a){a=a!=null?a.concat([n]):null,vl(4,4,sg.bind(null,r,n),a)}function ff(){}function lg(n,r){var a=bt();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Wc(r,u[1])?u[0]:(a.memoizedState=[n,r],n)}function ug(n,r){var a=bt();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Wc(r,u[1]))return u[0];if(u=n(),ko){qt(!0);try{n()}finally{qt(!1)}}return a.memoizedState=[u,r],u}function df(n,r,a){return a===void 0||(vi&1073741824)!==0&&(Le&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=cy(),Ie.lanes|=n,Wi|=n,a)}function cg(n,r,a,u){return xn(a,r)?a:xr.current!==null?(n=df(n,a,u),xn(n,r)||(Rt=!0),n):(vi&42)===0||(vi&1073741824)!==0&&(Le&261930)===0?(Rt=!0,n.memoizedState=a):(n=cy(),Ie.lanes|=n,Wi|=n,r)}function fg(n,r,a,u,g){var v=z.p;z.p=v!==0&&8>v?v:8;var T=D.T,C={};D.T=C,mf(n,!1,r,a);try{var I=g(),q=D.S;if(q!==null&&q(C,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=ub(I,u);Ds(n,r,Q,wn(n))}else Ds(n,r,u,wn(n))}catch(te){Ds(n,r,{then:function(){},status:"rejected",reason:te},wn())}finally{z.p=v,T!==null&&C.types!==null&&(T.types=C.types),D.T=T}}function mb(){}function hf(n,r,a,u){if(n.tag!==5)throw Error(o(476));var g=dg(n).queue;fg(n,g,r,oe,a===null?mb:function(){return hg(n),a(u)})}function dg(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:oe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function hg(n){var r=dg(n);r.next===null&&(r=n.alternate.memoizedState),Ds(n,r.next.queue,{},wn())}function pf(){return Kt(Xs)}function pg(){return bt().memoizedState}function mg(){return bt().memoizedState}function gb(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=wn();n=Yi(a);var u=$i(r,n,a);u!==null&&(_n(u,r,a),Rs(u,r,a)),r={cache:Hc()},n.payload=r;return}r=r.return}}function yb(n,r,a){var u=wn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},_l(n)?yg(r,a):(a=Ic(n,r,a,u),a!==null&&(_n(a,n,u),vg(a,r,u)))}function gg(n,r,a){var u=wn();Ds(n,r,a,u)}function Ds(n,r,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(_l(n))yg(r,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var T=r.lastRenderedState,C=v(T,a);if(g.hasEagerState=!0,g.eagerState=C,xn(C,T))return Wa(n,r,g,0),We===null&&ja(),!1}catch{}finally{}if(a=Ic(n,r,g,u),a!==null)return _n(a,n,u),vg(a,r,u),!0}return!1}function mf(n,r,a,u){if(u={lane:2,revertLane:Yf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},_l(n)){if(r)throw Error(o(479))}else r=Ic(n,a,u,2),r!==null&&_n(r,n,2)}function _l(n){var r=n.alternate;return n===Ie||r!==null&&r===Ie}function yg(n,r){br=dl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function vg(n,r,a){if((a&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,a|=u,r.lanes=a,bp(n,a)}}var ks={readContext:Kt,use:ml,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};ks.useEffectEvent=gt;var _g={readContext:Kt,use:ml,useCallback:function(n,r){return on().memoizedState=[n,r===void 0?null:r],n},useContext:Kt,useEffect:ng,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,yl(4194308,4,sg.bind(null,r,n),a)},useLayoutEffect:function(n,r){return yl(4194308,4,n,r)},useInsertionEffect:function(n,r){yl(4,2,n,r)},useMemo:function(n,r){var a=on();r=r===void 0?null:r;var u=n();if(ko){qt(!0);try{n()}finally{qt(!1)}}return a.memoizedState=[u,r],u},useReducer:function(n,r,a){var u=on();if(a!==void 0){var g=a(r);if(ko){qt(!0);try{a(r)}finally{qt(!1)}}}else g=r;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=yb.bind(null,Ie,n),[u.memoizedState,n]},useRef:function(n){var r=on();return n={current:n},r.memoizedState=n},useState:function(n){n=lf(n);var r=n.queue,a=gg.bind(null,Ie,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:ff,useDeferredValue:function(n,r){var a=on();return df(a,n,r)},useTransition:function(){var n=lf(!1);return n=fg.bind(null,Ie,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var u=Ie,g=on();if(Oe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),We===null)throw Error(o(349));(Le&127)!==0||Gm(u,r,a)}g.memoizedState=a;var v={value:a,getSnapshot:r};return g.queue=v,ng(Hm.bind(null,u,v,n),[n]),u.flags|=2048,Er(9,{destroy:void 0},Vm.bind(null,u,v,a,r),null),a},useId:function(){var n=on(),r=We.identifierPrefix;if(Oe){var a=ni,u=ti;a=(u&~(1<<32-at(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=hl++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=cb++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:pf,useFormState:Zm,useActionState:Zm,useOptimistic:function(n){var r=on();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=mf.bind(null,Ie,!0,a),a.dispatch=r,[n,r]},useMemoCache:rf,useCacheRefresh:function(){return on().memoizedState=gb.bind(null,Ie)},useEffectEvent:function(n){var r=on(),a={impl:n};return r.memoizedState=a,function(){if((Ke&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},gf={readContext:Kt,use:ml,useCallback:lg,useContext:Kt,useEffect:cf,useImperativeHandle:ag,useInsertionEffect:og,useLayoutEffect:rg,useMemo:ug,useReducer:gl,useRef:tg,useState:function(){return gl(_i)},useDebugValue:ff,useDeferredValue:function(n,r){var a=bt();return cg(a,Qe.memoizedState,n,r)},useTransition:function(){var n=gl(_i)[0],r=bt().memoizedState;return[typeof n=="boolean"?n:Is(n),r]},useSyncExternalStore:Bm,useId:pg,useHostTransitionStatus:pf,useFormState:jm,useActionState:jm,useOptimistic:function(n,r){var a=bt();return Jm(a,Qe,n,r)},useMemoCache:rf,useCacheRefresh:mg};gf.useEffectEvent=ig;var Sg={readContext:Kt,use:ml,useCallback:lg,useContext:Kt,useEffect:cf,useImperativeHandle:ag,useInsertionEffect:og,useLayoutEffect:rg,useMemo:ug,useReducer:af,useRef:tg,useState:function(){return af(_i)},useDebugValue:ff,useDeferredValue:function(n,r){var a=bt();return Qe===null?df(a,n,r):cg(a,Qe.memoizedState,n,r)},useTransition:function(){var n=af(_i)[0],r=bt().memoizedState;return[typeof n=="boolean"?n:Is(n),r]},useSyncExternalStore:Bm,useId:pg,useHostTransitionStatus:pf,useFormState:eg,useActionState:eg,useOptimistic:function(n,r){var a=bt();return Qe!==null?Jm(a,Qe,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:rf,useCacheRefresh:mg};Sg.useEffectEvent=ig;function yf(n,r,a,u){r=n.memoizedState,a=a(u,r),a=a==null?r:_({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var vf={enqueueSetState:function(n,r,a){n=n._reactInternals;var u=wn(),g=Yi(u);g.payload=r,a!=null&&(g.callback=a),r=$i(n,g,u),r!==null&&(_n(r,n,u),Rs(r,n,u))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var u=wn(),g=Yi(u);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=$i(n,g,u),r!==null&&(_n(r,n,u),Rs(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=wn(),u=Yi(a);u.tag=2,r!=null&&(u.callback=r),r=$i(n,u,a),r!==null&&(_n(r,n,a),Rs(r,n,a))}};function Tg(n,r,a,u,g,v,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,T):r.prototype&&r.prototype.isPureReactComponent?!_s(a,u)||!_s(g,v):!0}function xg(n,r,a,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==n&&vf.enqueueReplaceState(r,r.state,null)}function Uo(n,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(n=n.defaultProps){a===r&&(a=_({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function bg(n){Za(n)}function Cg(n){console.error(n)}function Eg(n){Za(n)}function Sl(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Ag(n,r,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function _f(n,r,a){return a=Yi(a),a.tag=3,a.payload={element:null},a.callback=function(){Sl(n,r)},a}function Rg(n){return n=Yi(n),n.tag=3,n}function wg(n,r,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){Ag(r,a,u)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){Ag(r,a,u),typeof g!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function vb(n,r,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&yr(r,a,g,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?Dl():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===al?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Ff(n,u,g)),!1;case 22:return a.flags|=65536,u===al?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Ff(n,u,g)),!1}throw Error(o(435,a.tag))}return Ff(n,u,g),Dl(),!1}if(Oe)return r=Cn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==zc&&(n=Error(o(422),{cause:u}),xs(Ln(n,a)))):(u!==zc&&(r=Error(o(423),{cause:u}),xs(Ln(r,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Ln(u,a),g=_f(n.stateNode,u,g),$c(n,g),yt!==4&&(yt=2)),!1;var v=Error(o(520),{cause:u});if(v=Ln(v,a),Vs===null?Vs=[v]:Vs.push(v),yt!==4&&(yt=2),r===null)return!0;u=Ln(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=_f(a.stateNode,u,n),$c(a,n),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(eo===null||!eo.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Rg(g),wg(g,n,a,u),$c(a,g),!1}a=a.return}while(a!==null);return!1}var Sf=Error(o(461)),Rt=!1;function Yt(n,r,a,u){r.child=n===null?Dm(r,null,a,u):Do(r,n.child,a,u)}function Mg(n,r,a,u,g){a=a.render;var v=r.ref;if("ref"in u){var T={};for(var C in u)C!=="ref"&&(T[C]=u[C])}else T=u;return wo(r),u=ef(n,r,a,T,v,g),C=tf(),n!==null&&!Rt?(nf(n,r,g),Si(n,r,g)):(Oe&&C&&Pc(r),r.flags|=1,Yt(n,r,u,g),r.child)}function Ng(n,r,a,u,g){if(n===null){var v=a.type;return typeof v=="function"&&!Dc(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,Ig(n,r,v,u,g)):(n=tl(a.type,null,u,r,r.mode,g),n.ref=r.ref,n.return=r,r.child=n)}if(v=n.child,!wf(n,g)){var T=v.memoizedProps;if(a=a.compare,a=a!==null?a:_s,a(T,u)&&n.ref===r.ref)return Si(n,r,g)}return r.flags|=1,n=pi(v,u),n.ref=r.ref,n.return=r,r.child=n}function Ig(n,r,a,u,g){if(n!==null){var v=n.memoizedProps;if(_s(v,u)&&n.ref===r.ref)if(Rt=!1,r.pendingProps=u=v,wf(n,g))(n.flags&131072)!==0&&(Rt=!0);else return r.lanes=n.lanes,Si(n,r,g)}return Tf(n,r,a,u,g)}function Dg(n,r,a,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,n!==null){for(u=r.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,r.child=null;return kg(n,r,v,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&rl(r,v!==null?v.cachePool:null),v!==null?Pm(r,v):Qc(),Lm(r);else return u=r.lanes=536870912,kg(n,r,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(rl(r,v.cachePool),Pm(r,v),Qi(),r.memoizedState=null):(n!==null&&rl(r,null),Qc(),Qi());return Yt(n,r,g,a),r.child}function Us(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function kg(n,r,a,u,g){var v=Fc();return v=v===null?null:{parent:Et._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},n!==null&&rl(r,null),Qc(),Lm(r),n!==null&&yr(n,r,u,!0),r.childLanes=g,null}function Tl(n,r){return r=bl({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Ug(n,r,a){return Do(r,n.child,null,a),n=Tl(r,r.pendingProps),n.flags|=2,En(r),r.memoizedState=null,n}function _b(n,r,a){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Oe){if(u.mode==="hidden")return n=Tl(r,u),r.lanes=536870912,Us(null,n);if(jc(r),(n=lt)?(n=Ky(n,Bn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Hi!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},a=ym(n),a.return=r,r.child=a,Jt=r,lt=null)):n=null,n===null)throw Fi(r);return r.lanes=536870912,null}return Tl(r,u)}var v=n.memoizedState;if(v!==null){var T=v.dehydrated;if(jc(r),g)if(r.flags&256)r.flags&=-257,r=Ug(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(o(558));else if(Rt||yr(n,r,a,!1),g=(a&n.childLanes)!==0,Rt||g){if(u=We,u!==null&&(T=Cp(u,a),T!==0&&T!==v.retryLane))throw v.retryLane=T,Co(n,T),_n(u,n,T),Sf;Dl(),r=Ug(n,r,a)}else n=v.treeContext,lt=Vn(T.nextSibling),Jt=r,Oe=!0,qi=null,Bn=!1,n!==null&&Sm(r,n),r=Tl(r,u),r.flags|=4096;return r}return n=pi(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function xl(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Tf(n,r,a,u,g){return wo(r),a=ef(n,r,a,u,void 0,g),u=tf(),n!==null&&!Rt?(nf(n,r,g),Si(n,r,g)):(Oe&&u&&Pc(r),r.flags|=1,Yt(n,r,a,g),r.child)}function Pg(n,r,a,u,g,v){return wo(r),r.updateQueue=null,a=Om(r,u,a,g),zm(n),u=tf(),n!==null&&!Rt?(nf(n,r,v),Si(n,r,v)):(Oe&&u&&Pc(r),r.flags|=1,Yt(n,r,a,v),r.child)}function Lg(n,r,a,u,g){if(wo(r),r.stateNode===null){var v=hr,T=a.contextType;typeof T=="object"&&T!==null&&(v=Kt(T)),v=new a(u,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=vf,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=u,v.state=r.memoizedState,v.refs={},Kc(r),T=a.contextType,v.context=typeof T=="object"&&T!==null?Kt(T):hr,v.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(yf(r,a,T,u),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&vf.enqueueReplaceState(v,v.state,null),Ms(r,u,v,g),ws(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){v=r.stateNode;var C=r.memoizedProps,I=Uo(a,C);v.props=I;var q=v.context,Q=a.contextType;T=hr,typeof Q=="object"&&Q!==null&&(T=Kt(Q));var te=a.getDerivedStateFromProps;Q=typeof te=="function"||typeof v.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,Q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C||q!==T)&&xg(r,v,u,T),Ki=!1;var K=r.memoizedState;v.state=K,Ms(r,u,v,g),ws(),q=r.memoizedState,C||K!==q||Ki?(typeof te=="function"&&(yf(r,a,te,u),q=r.memoizedState),(I=Ki||Tg(r,a,I,u,K,q,T))?(Q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=q),v.props=u,v.state=q,v.context=T,u=I):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{v=r.stateNode,Yc(n,r),T=r.memoizedProps,Q=Uo(a,T),v.props=Q,te=r.pendingProps,K=v.context,q=a.contextType,I=hr,typeof q=="object"&&q!==null&&(I=Kt(q)),C=a.getDerivedStateFromProps,(q=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==te||K!==I)&&xg(r,v,u,I),Ki=!1,K=r.memoizedState,v.state=K,Ms(r,u,v,g),ws();var X=r.memoizedState;T!==te||K!==X||Ki||n!==null&&n.dependencies!==null&&il(n.dependencies)?(typeof C=="function"&&(yf(r,a,C,u),X=r.memoizedState),(Q=Ki||Tg(r,a,Q,u,K,X,I)||n!==null&&n.dependencies!==null&&il(n.dependencies))?(q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,X,I),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,X,I)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=X),v.props=u,v.state=X,v.context=I,u=Q):(typeof v.componentDidUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&K===n.memoizedState||(r.flags|=1024),u=!1)}return v=u,xl(n,r),u=(r.flags&128)!==0,v||u?(v=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,n!==null&&u?(r.child=Do(r,n.child,null,g),r.child=Do(r,null,a,g)):Yt(n,r,a,g),r.memoizedState=v.state,n=r.child):n=Si(n,r,g),n}function zg(n,r,a,u){return Ao(),r.flags|=256,Yt(n,r,a,u),r.child}var xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(n){return{baseLanes:n,cachePool:Am()}}function Cf(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Rn),n}function Og(n,r,a){var u=r.pendingProps,g=!1,v=(r.flags&128)!==0,T;if((T=v)||(T=n!==null&&n.memoizedState===null?!1:(xt.current&2)!==0),T&&(g=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,n===null){if(Oe){if(g?Xi(r):Qi(),(n=lt)?(n=Ky(n,Bn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Hi!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},a=ym(n),a.return=r,r.child=a,Jt=r,lt=null)):n=null,n===null)throw Fi(r);return sd(n)?r.lanes=32:r.lanes=536870912,null}var C=u.children;return u=u.fallback,g?(Qi(),g=r.mode,C=bl({mode:"hidden",children:C},g),u=Eo(u,g,a,null),C.return=r,u.return=r,C.sibling=u,r.child=C,u=r.child,u.memoizedState=bf(a),u.childLanes=Cf(n,T,a),r.memoizedState=xf,Us(null,u)):(Xi(r),Ef(r,C))}var I=n.memoizedState;if(I!==null&&(C=I.dehydrated,C!==null)){if(v)r.flags&256?(Xi(r),r.flags&=-257,r=Af(n,r,a)):r.memoizedState!==null?(Qi(),r.child=n.child,r.flags|=128,r=null):(Qi(),C=u.fallback,g=r.mode,u=bl({mode:"visible",children:u.children},g),C=Eo(C,g,a,null),C.flags|=2,u.return=r,C.return=r,u.sibling=C,r.child=u,Do(r,n.child,null,a),u=r.child,u.memoizedState=bf(a),u.childLanes=Cf(n,T,a),r.memoizedState=xf,r=Us(null,u));else if(Xi(r),sd(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var q=T.dgst;T=q,u=Error(o(419)),u.stack="",u.digest=T,xs({value:u,source:null,stack:null}),r=Af(n,r,a)}else if(Rt||yr(n,r,a,!1),T=(a&n.childLanes)!==0,Rt||T){if(T=We,T!==null&&(u=Cp(T,a),u!==0&&u!==I.retryLane))throw I.retryLane=u,Co(n,u),_n(T,n,u),Sf;rd(C)||Dl(),r=Af(n,r,a)}else rd(C)?(r.flags|=192,r.child=n.child,r=null):(n=I.treeContext,lt=Vn(C.nextSibling),Jt=r,Oe=!0,qi=null,Bn=!1,n!==null&&Sm(r,n),r=Ef(r,u.children),r.flags|=4096);return r}return g?(Qi(),C=u.fallback,g=r.mode,I=n.child,q=I.sibling,u=pi(I,{mode:"hidden",children:u.children}),u.subtreeFlags=I.subtreeFlags&65011712,q!==null?C=pi(q,C):(C=Eo(C,g,a,null),C.flags|=2),C.return=r,u.return=r,u.sibling=C,r.child=u,Us(null,u),u=r.child,C=n.child.memoizedState,C===null?C=bf(a):(g=C.cachePool,g!==null?(I=Et._currentValue,g=g.parent!==I?{parent:I,pool:I}:g):g=Am(),C={baseLanes:C.baseLanes|a,cachePool:g}),u.memoizedState=C,u.childLanes=Cf(n,T,a),r.memoizedState=xf,Us(n.child,u)):(Xi(r),a=n.child,n=a.sibling,a=pi(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,n!==null&&(T=r.deletions,T===null?(r.deletions=[n],r.flags|=16):T.push(n)),r.child=a,r.memoizedState=null,a)}function Ef(n,r){return r=bl({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function bl(n,r){return n=bn(22,n,null,r),n.lanes=0,n}function Af(n,r,a){return Do(r,n.child,null,a),n=Ef(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Bg(n,r,a){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Gc(n.return,r,a)}function Rf(n,r,a,u,g,v){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:v}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=a,T.tailMode=g,T.treeForkCount=v)}function Gg(n,r,a){var u=r.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var T=xt.current,C=(T&2)!==0;if(C?(T=T&1|2,r.flags|=128):T&=1,ce(xt,T),Yt(n,r,u,a),u=Oe?Ts:0,!C&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Bg(n,a,r);else if(n.tag===19)Bg(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=r.child,g=null;a!==null;)n=a.alternate,n!==null&&fl(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=r.child,r.child=null):(g=a.sibling,a.sibling=null),Rf(r,!1,g,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=r.child,r.child=null;g!==null;){if(n=g.alternate,n!==null&&fl(n)===null){r.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Rf(r,!0,a,null,v,u);break;case"together":Rf(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Si(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Wi|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(yr(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(o(153));if(r.child!==null){for(n=r.child,a=pi(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=pi(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function wf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&il(n)))}function Sb(n,r,a){switch(r.tag){case 3:Ae(r,r.stateNode.containerInfo),Ji(r,Et,n.memoizedState.cache),Ao();break;case 27:case 5:Ct(r);break;case 4:Ae(r,r.stateNode.containerInfo);break;case 10:Ji(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,jc(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Xi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Og(n,r,a):(Xi(r),n=Si(n,r,a),n!==null?n.sibling:null);Xi(r);break;case 19:var g=(n.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(yr(n,r,a,!1),u=(a&r.childLanes)!==0),g){if(u)return Gg(n,r,a);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ce(xt,xt.current),u)break;return null;case 22:return r.lanes=0,Dg(n,r,a,r.pendingProps);case 24:Ji(r,Et,n.memoizedState.cache)}return Si(n,r,a)}function Vg(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Rt=!0;else{if(!wf(n,a)&&(r.flags&128)===0)return Rt=!1,Sb(n,r,a);Rt=(n.flags&131072)!==0}else Rt=!1,Oe&&(r.flags&1048576)!==0&&_m(r,Ts,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(n=No(r.elementType),r.type=n,typeof n=="function")Dc(n)?(u=Uo(n,u),r.tag=1,r=Lg(null,r,n,u,a)):(r.tag=0,r=Tf(null,r,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===O){r.tag=11,r=Mg(null,r,n,u,a);break e}else if(g===V){r.tag=14,r=Ng(null,r,n,u,a);break e}}throw r=ne(n)||n,Error(o(306,r,""))}}return r;case 0:return Tf(n,r,r.type,r.pendingProps,a);case 1:return u=r.type,g=Uo(u,r.pendingProps),Lg(n,r,u,g,a);case 3:e:{if(Ae(r,r.stateNode.containerInfo),n===null)throw Error(o(387));u=r.pendingProps;var v=r.memoizedState;g=v.element,Yc(n,r),Ms(r,u,null,a);var T=r.memoizedState;if(u=T.cache,Ji(r,Et,u),u!==v.cache&&Vc(r,[Et],a,!0),ws(),u=T.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=zg(n,r,u,a);break e}else if(u!==g){g=Ln(Error(o(424)),r),xs(g),r=zg(n,r,u,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(lt=Vn(n.firstChild),Jt=r,Oe=!0,qi=null,Bn=!0,a=Dm(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ao(),u===g){r=Si(n,r,a);break e}Yt(n,r,u,a)}r=r.child}return r;case 26:return xl(n,r),n===null?(a=jy(r.type,null,r.pendingProps,null))?r.memoizedState=a:Oe||(a=r.type,n=r.pendingProps,u=Bl(se.current).createElement(a),u[Ft]=r,u[hn]=n,$t(u,a,n),zt(u),r.stateNode=u):r.memoizedState=jy(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ct(r),n===null&&Oe&&(u=r.stateNode=Xy(r.type,r.pendingProps,se.current),Jt=r,Bn=!0,g=lt,oo(r.type)?(ad=g,lt=Vn(u.firstChild)):lt=g),Yt(n,r,r.pendingProps.children,a),xl(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Oe&&((g=u=lt)&&(u=Qb(u,r.type,r.pendingProps,Bn),u!==null?(r.stateNode=u,Jt=r,lt=Vn(u.firstChild),Bn=!1,g=!0):g=!1),g||Fi(r)),Ct(r),g=r.type,v=r.pendingProps,T=n!==null?n.memoizedProps:null,u=v.children,nd(g,v)?u=null:T!==null&&nd(g,T)&&(r.flags|=32),r.memoizedState!==null&&(g=ef(n,r,fb,null,null,a),Xs._currentValue=g),xl(n,r),Yt(n,r,u,a),r.child;case 6:return n===null&&Oe&&((n=a=lt)&&(a=Zb(a,r.pendingProps,Bn),a!==null?(r.stateNode=a,Jt=r,lt=null,n=!0):n=!1),n||Fi(r)),null;case 13:return Og(n,r,a);case 4:return Ae(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=Do(r,null,u,a):Yt(n,r,u,a),r.child;case 11:return Mg(n,r,r.type,r.pendingProps,a);case 7:return Yt(n,r,r.pendingProps,a),r.child;case 8:return Yt(n,r,r.pendingProps.children,a),r.child;case 12:return Yt(n,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Ji(r,r.type,u.value),Yt(n,r,u.children,a),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,wo(r),g=Kt(g),u=u(g),r.flags|=1,Yt(n,r,u,a),r.child;case 14:return Ng(n,r,r.type,r.pendingProps,a);case 15:return Ig(n,r,r.type,r.pendingProps,a);case 19:return Gg(n,r,a);case 31:return _b(n,r,a);case 22:return Dg(n,r,a,r.pendingProps);case 24:return wo(r),u=Kt(Et),n===null?(g=Fc(),g===null&&(g=We,v=Hc(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),r.memoizedState={parent:u,cache:g},Kc(r),Ji(r,Et,g)):((n.lanes&a)!==0&&(Yc(n,r),Ms(r,null,null,a),ws()),g=n.memoizedState,v=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Ji(r,Et,u)):(u=v.cache,Ji(r,Et,u),u!==g.cache&&Vc(r,[Et],a,!0))),Yt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function Ti(n){n.flags|=4}function Mf(n,r,a,u,g){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(py())n.flags|=8192;else throw Io=al,Jc}else n.flags&=-16777217}function Hg(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!i0(r))if(py())n.flags|=8192;else throw Io=al,Jc}function Cl(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Tp():536870912,n.lanes|=r,Mr|=r)}function Ps(n,r){if(!Oe)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ut(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(r)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,r}function Tb(n,r,a){var u=r.pendingProps;switch(Lc(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),yi(Et),we(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(gr(r)?Ti(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Oc())),ut(r),null;case 26:var g=r.type,v=r.memoizedState;return n===null?(Ti(r),v!==null?(ut(r),Hg(r,v)):(ut(r),Mf(r,g,null,u,a))):v?v!==n.memoizedState?(Ti(r),ut(r),Hg(r,v)):(ut(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ti(r),ut(r),Mf(r,g,n,u,a)),null;case 27:if(Xe(r),a=se.current,g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Ti(r);else{if(!u){if(r.stateNode===null)throw Error(o(166));return ut(r),null}n=W.current,gr(r)?Tm(r):(n=Xy(g,u,a),r.stateNode=n,Ti(r))}return ut(r),null;case 5:if(Xe(r),g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Ti(r);else{if(!u){if(r.stateNode===null)throw Error(o(166));return ut(r),null}if(v=W.current,gr(r))Tm(r);else{var T=Bl(se.current);switch(v){case 1:v=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=T.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?T.createElement(g,{is:u.is}):T.createElement(g)}}v[Ft]=r,v[hn]=u;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)v.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=v;e:switch($t(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ti(r)}}return ut(r),Mf(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Ti(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(o(166));if(n=se.current,gr(r)){if(n=r.stateNode,a=r.memoizedProps,u=null,g=Jt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[Ft]=r,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Oy(n.nodeValue,a)),n||Fi(r,!0)}else n=Bl(n).createTextNode(u),n[Ft]=r,r.stateNode=n}return ut(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(u=gr(r),a!==null){if(n===null){if(!u)throw Error(o(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[Ft]=r}else Ao(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),n=!1}else a=Oc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(En(r),r):(En(r),null);if((r.flags&128)!==0)throw Error(o(558))}return ut(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=gr(r),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(o(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[Ft]=r}else Ao(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),g=!1}else g=Oc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(En(r),r):(En(r),null)}return En(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),Cl(r,r.updateQueue),ut(r),null);case 4:return we(),n===null&&Zf(r.stateNode.containerInfo),ut(r),null;case 10:return yi(r.type),ut(r),null;case 19:if(J(xt),u=r.memoizedState,u===null)return ut(r),null;if(g=(r.flags&128)!==0,v=u.rendering,v===null)if(g)Ps(u,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(v=fl(n),v!==null){for(r.flags|=128,Ps(u,!1),n=v.updateQueue,r.updateQueue=n,Cl(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)gm(a,n),a=a.sibling;return ce(xt,xt.current&1|2),Oe&&mi(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&Ve()>Ml&&(r.flags|=128,g=!0,Ps(u,!1),r.lanes=4194304)}else{if(!g)if(n=fl(v),n!==null){if(r.flags|=128,g=!0,n=n.updateQueue,r.updateQueue=n,Cl(r,n),Ps(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Oe)return ut(r),null}else 2*Ve()-u.renderingStartTime>Ml&&a!==536870912&&(r.flags|=128,g=!0,Ps(u,!1),r.lanes=4194304);u.isBackwards?(v.sibling=r.child,r.child=v):(n=u.last,n!==null?n.sibling=v:r.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ve(),n.sibling=null,a=xt.current,ce(xt,g?a&1|2:a&1),Oe&&mi(r,u.treeForkCount),n):(ut(r),null);case 22:case 23:return En(r),Zc(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&Cl(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),n!==null&&J(Mo),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),yi(Et),ut(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function xb(n,r){switch(Lc(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return yi(Et),we(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Xe(r),null;case 31:if(r.memoizedState!==null){if(En(r),r.alternate===null)throw Error(o(340));Ao()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(En(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Ao()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return J(xt),null;case 4:return we(),null;case 10:return yi(r.type),null;case 22:case 23:return En(r),Zc(),n!==null&&J(Mo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return yi(Et),null;case 25:return null;default:return null}}function qg(n,r){switch(Lc(r),r.tag){case 3:yi(Et),we();break;case 26:case 27:case 5:Xe(r);break;case 4:we();break;case 31:r.memoizedState!==null&&En(r);break;case 13:En(r);break;case 19:J(xt);break;case 10:yi(r.type);break;case 22:case 23:En(r),Zc(),n!==null&&J(Mo);break;case 24:yi(Et)}}function Ls(n,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var v=a.create,T=a.inst;u=v(),T.destroy=u}a=a.next}while(a!==g)}}catch(C){$e(r,r.return,C)}}function Zi(n,r,a){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var T=u.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,g=r;var I=a,q=C;try{q()}catch(Q){$e(g,I,Q)}}}u=u.next}while(u!==v)}}catch(Q){$e(r,r.return,Q)}}function Fg(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Um(r,a)}catch(u){$e(n,n.return,u)}}}function Jg(n,r,a){a.props=Uo(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){$e(n,r,u)}}function zs(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){$e(n,r,g)}}function ii(n,r){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){$e(n,r,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){$e(n,r,g)}else a.current=null}function Kg(n){var r=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){$e(n,n.return,g)}}function Nf(n,r,a){try{var u=n.stateNode;Fb(u,n.type,a,r),u[hn]=r}catch(g){$e(n,n.return,g)}}function Yg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&oo(n.type)||n.tag===4}function If(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Yg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&oo(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Df(n,r,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=di));else if(u!==4&&(u===27&&oo(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(Df(n,r,a),n=n.sibling;n!==null;)Df(n,r,a),n=n.sibling}function El(n,r,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(u!==4&&(u===27&&oo(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(El(n,r,a),n=n.sibling;n!==null;)El(n,r,a),n=n.sibling}function $g(n){var r=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);$t(r,u,a),r[Ft]=n,r[hn]=a}catch(v){$e(n,n.return,v)}}var xi=!1,wt=!1,kf=!1,Xg=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function bb(n,r){if(n=n.containerInfo,ed=Kl,n=am(n),Ec(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var T=0,C=-1,I=-1,q=0,Q=0,te=n,K=null;t:for(;;){for(var X;te!==a||g!==0&&te.nodeType!==3||(C=T+g),te!==v||u!==0&&te.nodeType!==3||(I=T+u),te.nodeType===3&&(T+=te.nodeValue.length),(X=te.firstChild)!==null;)K=te,te=X;for(;;){if(te===n)break t;if(K===a&&++q===g&&(C=T),K===v&&++Q===u&&(I=T),(X=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=X}a=C===-1||I===-1?null:{start:C,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(td={focusedElem:n,selectionRange:a},Kl=!1,Ot=r;Ot!==null;)if(r=Ot,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Ot=n;else for(;Ot!==null;){switch(r=Ot,v=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,a=r,g=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ve=Uo(a.type,g);n=u.getSnapshotBeforeUpdate(ve,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ce){$e(a,a.return,Ce)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)od(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":od(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=r.sibling,n!==null){n.return=r.return,Ot=n;break}Ot=r.return}}function Qg(n,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Ci(n,a),u&4&&Ls(5,a);break;case 1:if(Ci(n,a),u&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(T){$e(a,a.return,T)}else{var g=Uo(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(g,r,n.__reactInternalSnapshotBeforeUpdate)}catch(T){$e(a,a.return,T)}}u&64&&Fg(a),u&512&&zs(a,a.return);break;case 3:if(Ci(n,a),u&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Um(n,r)}catch(T){$e(a,a.return,T)}}break;case 27:r===null&&u&4&&$g(a);case 26:case 5:Ci(n,a),r===null&&u&4&&Kg(a),u&512&&zs(a,a.return);break;case 12:Ci(n,a);break;case 31:Ci(n,a),u&4&&Wg(n,a);break;case 13:Ci(n,a),u&4&&ey(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Db.bind(null,a),jb(n,a))));break;case 22:if(u=a.memoizedState!==null||xi,!u){r=r!==null&&r.memoizedState!==null||wt,g=xi;var v=wt;xi=u,(wt=r)&&!v?Ei(n,a,(a.subtreeFlags&8772)!==0):Ci(n,a),xi=g,wt=v}break;case 30:break;default:Ci(n,a)}}function Zg(n){var r=n.alternate;r!==null&&(n.alternate=null,Zg(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&lc(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,mn=!1;function bi(n,r,a){for(a=a.child;a!==null;)jg(n,r,a),a=a.sibling}function jg(n,r,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Ht,a)}catch{}switch(a.tag){case 26:wt||ii(a,r),bi(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||ii(a,r);var u=ht,g=mn;oo(a.type)&&(ht=a.stateNode,mn=!1),bi(n,r,a),Ks(a.stateNode),ht=u,mn=g;break;case 5:wt||ii(a,r);case 6:if(u=ht,g=mn,ht=null,bi(n,r,a),ht=u,mn=g,ht!==null)if(mn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(v){$e(a,r,v)}else try{ht.removeChild(a.stateNode)}catch(v){$e(a,r,v)}break;case 18:ht!==null&&(mn?(n=ht,Fy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),zr(n)):Fy(ht,a.stateNode));break;case 4:u=ht,g=mn,ht=a.stateNode.containerInfo,mn=!0,bi(n,r,a),ht=u,mn=g;break;case 0:case 11:case 14:case 15:Zi(2,a,r),wt||Zi(4,a,r),bi(n,r,a);break;case 1:wt||(ii(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Jg(a,r,u)),bi(n,r,a);break;case 21:bi(n,r,a);break;case 22:wt=(u=wt)||a.memoizedState!==null,bi(n,r,a),wt=u;break;default:bi(n,r,a)}}function Wg(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{zr(n)}catch(a){$e(r,r.return,a)}}}function ey(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zr(n)}catch(a){$e(r,r.return,a)}}function Cb(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Xg),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Xg),r;default:throw Error(o(435,n.tag))}}function Al(n,r){var a=Cb(n);r.forEach(function(u){if(!a.has(u)){a.add(u);var g=kb.bind(null,n,u);u.then(g,g)}})}function gn(n,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],v=n,T=r,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(oo(C.type)){ht=C.stateNode,mn=!1;break e}break;case 5:ht=C.stateNode,mn=!1;break e;case 3:case 4:ht=C.stateNode.containerInfo,mn=!0;break e}C=C.return}if(ht===null)throw Error(o(160));jg(v,T,g),ht=null,mn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)ty(r,n),r=r.sibling}var Yn=null;function ty(n,r){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(r,n),yn(n),u&4&&(Zi(3,n,n.return),Ls(3,n),Zi(5,n,n.return));break;case 1:gn(r,n),yn(n),u&512&&(wt||a===null||ii(a,a.return)),u&64&&xi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=Yn;if(gn(r,n),yn(n),u&512&&(wt||a===null||ii(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[cs]||v[Ft]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),$t(v,u,a),v[Ft]=n,zt(v),u=v;break e;case"link":var T=t0("link","href",g).get(u+(a.href||""));if(T){for(var C=0;C<T.length;C++)if(v=T[C],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(C,1);break t}}v=g.createElement(u),$t(v,u,a),g.head.appendChild(v);break;case"meta":if(T=t0("meta","content",g).get(u+(a.content||""))){for(C=0;C<T.length;C++)if(v=T[C],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(C,1);break t}}v=g.createElement(u),$t(v,u,a),g.head.appendChild(v);break;default:throw Error(o(468,u))}v[Ft]=n,zt(v),u=v}n.stateNode=u}else n0(g,n.type,n.stateNode);else n.stateNode=e0(g,u,n.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?n0(g,n.type,n.stateNode):e0(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Nf(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(r,n),yn(n),u&512&&(wt||a===null||ii(a,a.return)),a!==null&&u&4&&Nf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(r,n),yn(n),u&512&&(wt||a===null||ii(a,a.return)),n.flags&32){g=n.stateNode;try{sr(g,"")}catch(ve){$e(n,n.return,ve)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,Nf(n,g,a!==null?a.memoizedProps:g)),u&1024&&(kf=!0);break;case 6:if(gn(r,n),yn(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ve){$e(n,n.return,ve)}}break;case 3:if(Hl=null,g=Yn,Yn=Gl(r.containerInfo),gn(r,n),Yn=g,yn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{zr(r.containerInfo)}catch(ve){$e(n,n.return,ve)}kf&&(kf=!1,ny(n));break;case 4:u=Yn,Yn=Gl(n.stateNode.containerInfo),gn(r,n),yn(n),Yn=u;break;case 12:gn(r,n),yn(n);break;case 31:gn(r,n),yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Al(n,u)));break;case 13:gn(r,n),yn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wl=Ve()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Al(n,u)));break;case 22:g=n.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,q=xi,Q=wt;if(xi=q||g,wt=Q||I,gn(r,n),wt=Q,xi=q,yn(n),u&8192)e:for(r=n.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(a===null||I||xi||wt||Po(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){I=a=r;try{if(v=I.stateNode,g)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=I.stateNode;var te=I.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ve){$e(I,I.return,ve)}}}else if(r.tag===6){if(a===null){I=r;try{I.stateNode.nodeValue=g?"":I.memoizedProps}catch(ve){$e(I,I.return,ve)}}}else if(r.tag===18){if(a===null){I=r;try{var X=I.stateNode;g?Jy(X,!0):Jy(I.stateNode,!1)}catch(ve){$e(I,I.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Al(n,a))));break;case 19:gn(r,n),yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Al(n,u)));break;case 30:break;case 21:break;default:gn(r,n),yn(n)}}function yn(n){var r=n.flags;if(r&2){try{for(var a,u=n.return;u!==null;){if(Yg(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,v=If(n);El(n,v,g);break;case 5:var T=a.stateNode;a.flags&32&&(sr(T,""),a.flags&=-33);var C=If(n);El(n,C,T);break;case 3:case 4:var I=a.stateNode.containerInfo,q=If(n);Df(n,q,I);break;default:throw Error(o(161))}}catch(Q){$e(n,n.return,Q)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function ny(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;ny(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ci(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Qg(n,r.alternate,r),r=r.sibling}function Po(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Zi(4,r,r.return),Po(r);break;case 1:ii(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Jg(r,r.return,a),Po(r);break;case 27:Ks(r.stateNode);case 26:case 5:ii(r,r.return),Po(r);break;case 22:r.memoizedState===null&&Po(r);break;case 30:Po(r);break;default:Po(r)}n=n.sibling}}function Ei(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=n,v=r,T=v.flags;switch(v.tag){case 0:case 11:case 15:Ei(g,v,a),Ls(4,v);break;case 1:if(Ei(g,v,a),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(q){$e(u,u.return,q)}if(u=v,g=u.updateQueue,g!==null){var C=u.stateNode;try{var I=g.shared.hiddenCallbacks;if(I!==null)for(g.shared.hiddenCallbacks=null,g=0;g<I.length;g++)km(I[g],C)}catch(q){$e(u,u.return,q)}}a&&T&64&&Fg(v),zs(v,v.return);break;case 27:$g(v);case 26:case 5:Ei(g,v,a),a&&u===null&&T&4&&Kg(v),zs(v,v.return);break;case 12:Ei(g,v,a);break;case 31:Ei(g,v,a),a&&T&4&&Wg(g,v);break;case 13:Ei(g,v,a),a&&T&4&&ey(g,v);break;case 22:v.memoizedState===null&&Ei(g,v,a),zs(v,v.return);break;case 30:break;default:Ei(g,v,a)}r=r.sibling}}function Uf(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&bs(a))}function Pf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&bs(n))}function $n(n,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iy(n,r,a,u),r=r.sibling}function iy(n,r,a,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:$n(n,r,a,u),g&2048&&Ls(9,r);break;case 1:$n(n,r,a,u);break;case 3:$n(n,r,a,u),g&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&bs(n)));break;case 12:if(g&2048){$n(n,r,a,u),n=r.stateNode;try{var v=r.memoizedProps,T=v.id,C=v.onPostCommit;typeof C=="function"&&C(T,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){$e(r,r.return,I)}}else $n(n,r,a,u);break;case 31:$n(n,r,a,u);break;case 13:$n(n,r,a,u);break;case 23:break;case 22:v=r.stateNode,T=r.alternate,r.memoizedState!==null?v._visibility&2?$n(n,r,a,u):Os(n,r):v._visibility&2?$n(n,r,a,u):(v._visibility|=2,Ar(n,r,a,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Uf(T,r);break;case 24:$n(n,r,a,u),g&2048&&Pf(r.alternate,r);break;default:$n(n,r,a,u)}}function Ar(n,r,a,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=n,T=r,C=a,I=u,q=T.flags;switch(T.tag){case 0:case 11:case 15:Ar(v,T,C,I,g),Ls(8,T);break;case 23:break;case 22:var Q=T.stateNode;T.memoizedState!==null?Q._visibility&2?Ar(v,T,C,I,g):Os(v,T):(Q._visibility|=2,Ar(v,T,C,I,g)),g&&q&2048&&Uf(T.alternate,T);break;case 24:Ar(v,T,C,I,g),g&&q&2048&&Pf(T.alternate,T);break;default:Ar(v,T,C,I,g)}r=r.sibling}}function Os(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,u=r,g=u.flags;switch(u.tag){case 22:Os(a,u),g&2048&&Uf(u.alternate,u);break;case 24:Os(a,u),g&2048&&Pf(u.alternate,u);break;default:Os(a,u)}r=r.sibling}}var Bs=8192;function Rr(n,r,a){if(n.subtreeFlags&Bs)for(n=n.child;n!==null;)oy(n,r,a),n=n.sibling}function oy(n,r,a){switch(n.tag){case 26:Rr(n,r,a),n.flags&Bs&&n.memoizedState!==null&&cC(a,Yn,n.memoizedState,n.memoizedProps);break;case 5:Rr(n,r,a);break;case 3:case 4:var u=Yn;Yn=Gl(n.stateNode.containerInfo),Rr(n,r,a),Yn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Bs,Bs=16777216,Rr(n,r,a),Bs=u):Rr(n,r,a));break;default:Rr(n,r,a)}}function ry(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Gs(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ot=u,ay(u,n)}ry(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sy(n),n=n.sibling}function sy(n){switch(n.tag){case 0:case 11:case 15:Gs(n),n.flags&2048&&Zi(9,n,n.return);break;case 3:Gs(n);break;case 12:Gs(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Rl(n)):Gs(n);break;default:Gs(n)}}function Rl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ot=u,ay(u,n)}ry(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Zi(8,r,r.return),Rl(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Rl(r));break;default:Rl(r)}n=n.sibling}}function ay(n,r){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:Zi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:bs(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ot=u;else e:for(a=n;Ot!==null;){u=Ot;var g=u.sibling,v=u.return;if(Zg(u),u===a){Ot=null;break e}if(g!==null){g.return=v,Ot=g;break e}Ot=v}}}var Eb={getCacheForType:function(n){var r=Kt(Et),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return Kt(Et).controller.signal}},Ab=typeof WeakMap=="function"?WeakMap:Map,Ke=0,We=null,Ue=null,Le=0,Ye=0,An=null,ji=!1,wr=!1,Lf=!1,Ai=0,yt=0,Wi=0,Lo=0,zf=0,Rn=0,Mr=0,Vs=null,vn=null,Of=!1,wl=0,ly=0,Ml=1/0,Nl=null,eo=null,kt=0,to=null,Nr=null,Ri=0,Bf=0,Gf=null,uy=null,Hs=0,Vf=null;function wn(){return(Ke&2)!==0&&Le!==0?Le&-Le:D.T!==null?Yf():Ep()}function cy(){if(Rn===0)if((Le&536870912)===0||Oe){var n=Oa;Oa<<=1,(Oa&3932160)===0&&(Oa=262144),Rn=n}else Rn=536870912;return n=Cn.current,n!==null&&(n.flags|=32),Rn}function _n(n,r,a){(n===We&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)&&(Ir(n,0),no(n,Le,Rn,!1)),us(n,a),((Ke&2)===0||n!==We)&&(n===We&&((Ke&2)===0&&(Lo|=a),yt===4&&no(n,Le,Rn,!1)),oi(n))}function fy(n,r,a){if((Ke&6)!==0)throw Error(o(327));var u=!a&&(r&127)===0&&(r&n.expiredLanes)===0||ls(n,r),g=u?Mb(n,r):qf(n,r,!0),v=u;do{if(g===0){wr&&!u&&no(n,r,0,!1);break}else{if(a=n.current.alternate,v&&!Rb(a)){g=qf(n,r,!1),v=!1;continue}if(g===2){if(v=r,n.errorRecoveryDisabledLanes&v)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var C=n;g=Vs;var I=C.current.memoizedState.isDehydrated;if(I&&(Ir(C,T).flags|=256),T=qf(C,T,!1),T!==2){if(Lf&&!I){C.errorRecoveryDisabledLanes|=v,Lo|=v,g=4;break e}v=vn,vn=g,v!==null&&(vn===null?vn=v:vn.push.apply(vn,v))}g=T}if(v=!1,g!==2)continue}}if(g===1){Ir(n,0),no(n,r,0,!0);break}e:{switch(u=n,v=g,v){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:no(u,r,Rn,!ji);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(g=wl+300-Ve(),10<g)){if(no(u,r,Rn,!ji),Ga(u,0,!0)!==0)break e;Ri=r,u.timeoutHandle=Hy(dy.bind(null,u,a,vn,Nl,Of,r,Rn,Lo,Mr,ji,v,"Throttled",-0,0),g);break e}dy(u,a,vn,Nl,Of,r,Rn,Lo,Mr,ji,v,null,-0,0)}}break}while(!0);oi(n)}function dy(n,r,a,u,g,v,T,C,I,q,Q,te,K,X){if(n.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:di},oy(r,v,te);var ve=(v&62914560)===v?wl-Ve():(v&4194048)===v?ly-Ve():0;if(ve=fC(te,ve),ve!==null){Ri=v,n.cancelPendingCommit=ve(Sy.bind(null,n,r,v,a,u,g,T,C,I,Q,te,null,K,X)),no(n,v,T,!q);return}}Sy(n,r,v,a,u,g,T,C,I)}function Rb(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],v=g.getSnapshot;g=g.value;try{if(!xn(v(),g))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function no(n,r,a,u){r&=~zf,r&=~Lo,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var g=r;0<g;){var v=31-at(g),T=1<<v;u[v]=-1,g&=~T}a!==0&&xp(n,a,r)}function Il(){return(Ke&6)===0?(qs(0),!1):!0}function Hf(){if(Ue!==null){if(Ye===0)var n=Ue.return;else n=Ue,gi=Ro=null,of(n),Tr=null,Es=0,n=Ue;for(;n!==null;)qg(n.alternate,n),n=n.return;Ue=null}}function Ir(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Yb(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Ri=0,Hf(),We=n,Ue=a=pi(n.current,null),Le=r,Ye=0,An=null,ji=!1,wr=ls(n,r),Lf=!1,Mr=Rn=zf=Lo=Wi=yt=0,vn=Vs=null,Of=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var g=31-at(u),v=1<<g;r|=n[g],u&=~v}return Ai=r,ja(),a}function hy(n,r){Ie=null,D.H=ks,r===Sr||r===sl?(r=Mm(),Ye=3):r===Jc?(r=Mm(),Ye=4):Ye=r===Sf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,An=r,Ue===null&&(yt=1,Sl(n,Ln(r,n.current)))}function py(){var n=Cn.current;return n===null?!0:(Le&4194048)===Le?Gn===null:(Le&62914560)===Le||(Le&536870912)!==0?n===Gn:!1}function my(){var n=D.H;return D.H=ks,n===null?ks:n}function gy(){var n=D.A;return D.A=Eb,n}function Dl(){yt=4,ji||(Le&4194048)!==Le&&Cn.current!==null||(wr=!0),(Wi&134217727)===0&&(Lo&134217727)===0||We===null||no(We,Le,Rn,!1)}function qf(n,r,a){var u=Ke;Ke|=2;var g=my(),v=gy();(We!==n||Le!==r)&&(Nl=null,Ir(n,r)),r=!1;var T=yt;e:do try{if(Ye!==0&&Ue!==null){var C=Ue,I=An;switch(Ye){case 8:Hf(),T=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(r=!0);var q=Ye;if(Ye=0,An=null,Dr(n,C,I,q),a&&wr){T=0;break e}break;default:q=Ye,Ye=0,An=null,Dr(n,C,I,q)}}wb(),T=yt;break}catch(Q){hy(n,Q)}while(!0);return r&&n.shellSuspendCounter++,gi=Ro=null,Ke=u,D.H=g,D.A=v,Ue===null&&(We=null,Le=0,ja()),T}function wb(){for(;Ue!==null;)yy(Ue)}function Mb(n,r){var a=Ke;Ke|=2;var u=my(),g=gy();We!==n||Le!==r?(Nl=null,Ml=Ve()+500,Ir(n,r)):wr=ls(n,r);e:do try{if(Ye!==0&&Ue!==null){r=Ue;var v=An;t:switch(Ye){case 1:Ye=0,An=null,Dr(n,r,v,1);break;case 2:case 9:if(Rm(v)){Ye=0,An=null,vy(r);break}r=function(){Ye!==2&&Ye!==9||We!==n||(Ye=7),oi(n)},v.then(r,r);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Rm(v)?(Ye=0,An=null,vy(r)):(Ye=0,An=null,Dr(n,r,v,7));break;case 5:var T=null;switch(Ue.tag){case 26:T=Ue.memoizedState;case 5:case 27:var C=Ue;if(T?i0(T):C.stateNode.complete){Ye=0,An=null;var I=C.sibling;if(I!==null)Ue=I;else{var q=C.return;q!==null?(Ue=q,kl(q)):Ue=null}break t}}Ye=0,An=null,Dr(n,r,v,5);break;case 6:Ye=0,An=null,Dr(n,r,v,6);break;case 8:Hf(),yt=6;break e;default:throw Error(o(462))}}Nb();break}catch(Q){hy(n,Q)}while(!0);return gi=Ro=null,D.H=u,D.A=g,Ke=a,Ue!==null?0:(We=null,Le=0,ja(),yt)}function Nb(){for(;Ue!==null&&!dn();)yy(Ue)}function yy(n){var r=Vg(n.alternate,n,Ai);n.memoizedProps=n.pendingProps,r===null?kl(n):Ue=r}function vy(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=Pg(a,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=Pg(a,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:of(r);default:qg(a,r),r=Ue=gm(r,Ai),r=Vg(a,r,Ai)}n.memoizedProps=n.pendingProps,r===null?kl(n):Ue=r}function Dr(n,r,a,u){gi=Ro=null,of(r),Tr=null,Es=0;var g=r.return;try{if(vb(n,g,r,a,Le)){yt=1,Sl(n,Ln(a,n.current)),Ue=null;return}}catch(v){if(g!==null)throw Ue=g,v;yt=1,Sl(n,Ln(a,n.current)),Ue=null;return}r.flags&32768?(Oe||u===1?n=!0:wr||(Le&536870912)!==0?n=!1:(ji=n=!0,(u===2||u===9||u===3||u===6)&&(u=Cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),_y(r,n)):kl(r)}function kl(n){var r=n;do{if((r.flags&32768)!==0){_y(r,ji);return}n=r.return;var a=Tb(r.alternate,r,Ai);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=n}while(r!==null);yt===0&&(yt=5)}function _y(n,r){do{var a=xb(n.alternate,n);if(a!==null){a.flags&=32767,Ue=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=a}while(n!==null);yt=6,Ue=null}function Sy(n,r,a,u,g,v,T,C,I){n.cancelPendingCommit=null;do Ul();while(kt!==0);if((Ke&6)!==0)throw Error(o(327));if(r!==null){if(r===n.current)throw Error(o(177));if(v=r.lanes|r.childLanes,v|=Nc,ux(n,a,v,T,C,I),n===We&&(Ue=We=null,Le=0),Nr=r,to=n,Ri=a,Bf=v,Gf=g,uy=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Ub(he,function(){return Ey(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,g=z.p,z.p=2,T=Ke,Ke|=4;try{bb(n,r,a)}finally{Ke=T,z.p=g,D.T=u}}kt=1,Ty(),xy(),by()}}function Ty(){if(kt===1){kt=0;var n=to,r=Nr,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var u=z.p;z.p=2;var g=Ke;Ke|=4;try{ty(r,n);var v=td,T=am(n.containerInfo),C=v.focusedElem,I=v.selectionRange;if(T!==C&&C&&C.ownerDocument&&sm(C.ownerDocument.documentElement,C)){if(I!==null&&Ec(C)){var q=I.start,Q=I.end;if(Q===void 0&&(Q=q),"selectionStart"in C)C.selectionStart=q,C.selectionEnd=Math.min(Q,C.value.length);else{var te=C.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var X=K.getSelection(),ve=C.textContent.length,Ce=Math.min(I.start,ve),je=I.end===void 0?Ce:Math.min(I.end,ve);!X.extend&&Ce>je&&(T=je,je=Ce,Ce=T);var B=rm(C,Ce),L=rm(C,je);if(B&&L&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var H=te.createRange();H.setStart(B.node,B.offset),X.removeAllRanges(),Ce>je?(X.addRange(H),X.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),X.addRange(H))}}}}for(te=[],X=C;X=X.parentNode;)X.nodeType===1&&te.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<te.length;C++){var Z=te[C];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Kl=!!ed,td=ed=null}finally{Ke=g,z.p=u,D.T=a}}n.current=r,kt=2}}function xy(){if(kt===2){kt=0;var n=to,r=Nr,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var u=z.p;z.p=2;var g=Ke;Ke|=4;try{Qg(n,r.alternate,r)}finally{Ke=g,z.p=u,D.T=a}}kt=3}}function by(){if(kt===4||kt===3){kt=0,dt();var n=to,r=Nr,a=Ri,u=uy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?kt=5:(kt=0,Nr=to=null,Cy(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(eo=null),sc(a),r=r.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Ht,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=D.T,g=z.p,z.p=2,D.T=null;try{for(var v=n.onRecoverableError,T=0;T<u.length;T++){var C=u[T];v(C.value,{componentStack:C.stack})}}finally{D.T=r,z.p=g}}(Ri&3)!==0&&Ul(),oi(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===Vf?Hs++:(Hs=0,Vf=n):Hs=0,qs(0)}}function Cy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,bs(r)))}function Ul(){return Ty(),xy(),by(),Ey()}function Ey(){if(kt!==5)return!1;var n=to,r=Bf;Bf=0;var a=sc(Ri),u=D.T,g=z.p;try{z.p=32>a?32:a,D.T=null,a=Gf,Gf=null;var v=to,T=Ri;if(kt=0,Nr=to=null,Ri=0,(Ke&6)!==0)throw Error(o(331));var C=Ke;if(Ke|=4,sy(v.current),iy(v,v.current,T,a),Ke=C,qs(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Ht,v)}catch{}return!0}finally{z.p=g,D.T=u,Cy(n,r)}}function Ay(n,r,a){r=Ln(a,r),r=_f(n.stateNode,r,2),n=$i(n,r,2),n!==null&&(us(n,2),oi(n))}function $e(n,r,a){if(n.tag===3)Ay(n,n,a);else for(;r!==null;){if(r.tag===3){Ay(r,n,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(eo===null||!eo.has(u))){n=Ln(a,n),a=Rg(2),u=$i(r,a,2),u!==null&&(wg(a,u,r,n),us(u,2),oi(u));break}}r=r.return}}function Ff(n,r,a){var u=n.pingCache;if(u===null){u=n.pingCache=new Ab;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(a)||(Lf=!0,g.add(a),n=Ib.bind(null,n,r,a),r.then(n,n))}function Ib(n,r,a){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,We===n&&(Le&a)===a&&(yt===4||yt===3&&(Le&62914560)===Le&&300>Ve()-wl?(Ke&2)===0&&Ir(n,0):zf|=a,Mr===Le&&(Mr=0)),oi(n)}function Ry(n,r){r===0&&(r=Tp()),n=Co(n,r),n!==null&&(us(n,r),oi(n))}function Db(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Ry(n,a)}function kb(n,r){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(r),Ry(n,a)}function Ub(n,r){return Dn(n,r)}var Pl=null,kr=null,Jf=!1,Ll=!1,Kf=!1,io=0;function oi(n){n!==kr&&n.next===null&&(kr===null?Pl=kr=n:kr=kr.next=n),Ll=!0,Jf||(Jf=!0,Lb())}function qs(n,r){if(!Kf&&Ll){Kf=!0;do for(var a=!1,u=Pl;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var T=u.suspendedLanes,C=u.pingedLanes;v=(1<<31-at(42|n)+1)-1,v&=g&~(T&~C),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Iy(u,v))}else v=Le,v=Ga(u,u===We?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||ls(u,v)||(a=!0,Iy(u,v));u=u.next}while(a);Kf=!1}}function Pb(){wy()}function wy(){Ll=Jf=!1;var n=0;io!==0&&Kb()&&(n=io);for(var r=Ve(),a=null,u=Pl;u!==null;){var g=u.next,v=My(u,r);v===0?(u.next=null,a===null?Pl=g:a.next=g,g===null&&(kr=a)):(a=u,(n!==0||(v&3)!==0)&&(Ll=!0)),u=g}kt!==0&&kt!==5||qs(n),io!==0&&(io=0)}function My(n,r){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var T=31-at(v),C=1<<T,I=g[T];I===-1?((C&a)===0||(C&u)!==0)&&(g[T]=lx(C,r)):I<=r&&(n.expiredLanes|=C),v&=~C}if(r=We,a=Le,a=Ga(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===r&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ei(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ls(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(u!==null&&ei(u),sc(a)){case 2:case 8:a=ie;break;case 32:a=he;break;case 268435456:a=Je;break;default:a=he}return u=Ny.bind(null,n),a=Dn(a,u),n.callbackPriority=r,n.callbackNode=a,r}return u!==null&&u!==null&&ei(u),n.callbackPriority=2,n.callbackNode=null,2}function Ny(n,r){if(kt!==0&&kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ul()&&n.callbackNode!==a)return null;var u=Le;return u=Ga(n,n===We?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(fy(n,u,r),My(n,Ve()),n.callbackNode!=null&&n.callbackNode===a?Ny.bind(null,n):null)}function Iy(n,r){if(Ul())return null;fy(n,r,!0)}function Lb(){$b(function(){(Ke&6)!==0?Dn(St,Pb):wy()})}function Yf(){if(io===0){var n=vr;n===0&&(n=za,za<<=1,(za&261888)===0&&(za=256)),io=n}return io}function Dy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Fa(""+n)}function ky(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function zb(n,r,a,u,g){if(r==="submit"&&a&&a.stateNode===g){var v=Dy((g[hn]||null).action),T=u.submitter;T&&(r=(r=T[hn]||null)?Dy(r.formAction):T.getAttribute("formAction"),r!==null&&(v=r,T=null));var C=new $a("action","action",null,u,g);n.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(io!==0){var I=T?ky(g,T):new FormData(g);hf(a,{pending:!0,data:I,method:g.method,action:v},null,I)}}else typeof v=="function"&&(C.preventDefault(),I=T?ky(g,T):new FormData(g),hf(a,{pending:!0,data:I,method:g.method,action:v},v,I))},currentTarget:g}]})}}for(var $f=0;$f<Mc.length;$f++){var Xf=Mc[$f],Ob=Xf.toLowerCase(),Bb=Xf[0].toUpperCase()+Xf.slice(1);Kn(Ob,"on"+Bb)}Kn(cm,"onAnimationEnd"),Kn(fm,"onAnimationIteration"),Kn(dm,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(tb,"onTransitionRun"),Kn(nb,"onTransitionStart"),Kn(ib,"onTransitionCancel"),Kn(hm,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),So("onBeforeInput",["compositionend","keypress","textInput","paste"]),So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fs));function Uy(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var v=void 0;if(r)for(var T=u.length-1;0<=T;T--){var C=u[T],I=C.instance,q=C.currentTarget;if(C=C.listener,I!==v&&g.isPropagationStopped())break e;v=C,g.currentTarget=q;try{v(g)}catch(Q){Za(Q)}g.currentTarget=null,v=I}else for(T=0;T<u.length;T++){if(C=u[T],I=C.instance,q=C.currentTarget,C=C.listener,I!==v&&g.isPropagationStopped())break e;v=C,g.currentTarget=q;try{v(g)}catch(Q){Za(Q)}g.currentTarget=null,v=I}}}}function Pe(n,r){var a=r[ac];a===void 0&&(a=r[ac]=new Set);var u=n+"__bubble";a.has(u)||(Py(r,n,2,!1),a.add(u))}function Qf(n,r,a){var u=0;r&&(u|=4),Py(a,n,u,r)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Zf(n){if(!n[zl]){n[zl]=!0,wp.forEach(function(a){a!=="selectionchange"&&(Gb.has(a)||Qf(a,!1,n),Qf(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[zl]||(r[zl]=!0,Qf("selectionchange",!1,r))}}function Py(n,r,a,u){switch(c0(r)){case 2:var g=pC;break;case 8:g=mC;break;default:g=dd}a=g.bind(null,r,a,n),g=void 0,!gc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(r,a,{capture:!0,passive:g}):n.addEventListener(r,a,!0):g!==void 0?n.addEventListener(r,a,{passive:g}):n.addEventListener(r,a,!1)}function jf(n,r,a,u,g){var v=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var C=u.stateNode.containerInfo;if(C===g)break;if(T===4)for(T=u.return;T!==null;){var I=T.tag;if((I===3||I===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;C!==null;){if(T=tr(C),T===null)return;if(I=T.tag,I===5||I===6||I===26||I===27){u=v=T;continue e}C=C.parentNode}}u=u.return}Gp(function(){var q=v,Q=pc(a),te=[];e:{var K=pm.get(n);if(K!==void 0){var X=$a,ve=n;switch(n){case"keypress":if(Ka(a)===0)break e;case"keydown":case"keyup":X=kx;break;case"focusin":ve="focus",X=Sc;break;case"focusout":ve="blur",X=Sc;break;case"beforeblur":case"afterblur":X=Sc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Tx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Lx;break;case cm:case fm:case dm:X=Cx;break;case hm:X=Ox;break;case"scroll":case"scrollend":X=_x;break;case"wheel":X=Gx;break;case"copy":case"cut":case"paste":X=Ax;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Jp;break;case"toggle":case"beforetoggle":X=Hx}var Ce=(r&4)!==0,je=!Ce&&(n==="scroll"||n==="scrollend"),B=Ce?K!==null?K+"Capture":null:K;Ce=[];for(var L=q,H;L!==null;){var Z=L;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||B===null||(Z=ds(L,B),Z!=null&&Ce.push(Js(L,Z,H))),je)break;L=L.return}0<Ce.length&&(K=new X(K,ve,null,a,Q),te.push({event:K,listeners:Ce}))}}if((r&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",K&&a!==hc&&(ve=a.relatedTarget||a.fromElement)&&(tr(ve)||ve[er]))break e;if((X||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,X?(ve=a.relatedTarget||a.toElement,X=q,ve=ve?tr(ve):null,ve!==null&&(je=l(ve),Ce=ve.tag,ve!==je||Ce!==5&&Ce!==27&&Ce!==6)&&(ve=null)):(X=null,ve=q),X!==ve)){if(Ce=qp,Z="onMouseLeave",B="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=Jp,Z="onPointerLeave",B="onPointerEnter",L="pointer"),je=X==null?K:fs(X),H=ve==null?K:fs(ve),K=new Ce(Z,L+"leave",X,a,Q),K.target=je,K.relatedTarget=H,Z=null,tr(Q)===q&&(Ce=new Ce(B,L+"enter",ve,a,Q),Ce.target=H,Ce.relatedTarget=je,Z=Ce),je=Z,X&&ve)t:{for(Ce=Vb,B=X,L=ve,H=0,Z=B;Z;Z=Ce(Z))H++;Z=0;for(var xe=L;xe;xe=Ce(xe))Z++;for(;0<H-Z;)B=Ce(B),H--;for(;0<Z-H;)L=Ce(L),Z--;for(;H--;){if(B===L||L!==null&&B===L.alternate){Ce=B;break t}B=Ce(B),L=Ce(L)}Ce=null}else Ce=null;X!==null&&Ly(te,K,X,Ce,!1),ve!==null&&je!==null&&Ly(te,je,ve,Ce,!0)}}e:{if(K=q?fs(q):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var He=Wp;else if(Zp(K))if(em)He=jx;else{He=Qx;var Te=Xx}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?q&&dc(q.elementType)&&(He=Wp):He=Zx;if(He&&(He=He(n,q))){jp(te,He,a,Q);break e}Te&&Te(n,K,q),n==="focusout"&&q&&K.type==="number"&&q.memoizedProps.value!=null&&fc(K,"number",K.value)}switch(Te=q?fs(q):window,n){case"focusin":(Zp(Te)||Te.contentEditable==="true")&&(cr=Te,Ac=q,Ss=null);break;case"focusout":Ss=Ac=cr=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,lm(te,a,Q);break;case"selectionchange":if(eb)break;case"keydown":case"keyup":lm(te,a,Q)}var De;if(xc)e:{switch(n){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ur?Xp(n,a)&&(ze="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Kp&&a.locale!=="ko"&&(ur||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ur&&(De=Vp()):(Vi=Q,yc="value"in Vi?Vi.value:Vi.textContent,ur=!0)),Te=Ol(q,ze),0<Te.length&&(ze=new Fp(ze,n,null,a,Q),te.push({event:ze,listeners:Te}),De?ze.data=De:(De=Qp(a),De!==null&&(ze.data=De)))),(De=Fx?Jx(n,a):Kx(n,a))&&(ze=Ol(q,"onBeforeInput"),0<ze.length&&(Te=new Fp("onBeforeInput","beforeinput",null,a,Q),te.push({event:Te,listeners:ze}),Te.data=De)),zb(te,n,q,a,Q)}Uy(te,r)})}function Js(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Ol(n,r){for(var a=r+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ds(n,a),g!=null&&u.unshift(Js(n,g,v)),g=ds(n,r),g!=null&&u.push(Js(n,g,v))),n.tag===3)return u;n=n.return}return[]}function Vb(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ly(n,r,a,u,g){for(var v=r._reactName,T=[];a!==null&&a!==u;){var C=a,I=C.alternate,q=C.stateNode;if(C=C.tag,I!==null&&I===u)break;C!==5&&C!==26&&C!==27||q===null||(I=q,g?(q=ds(a,v),q!=null&&T.unshift(Js(a,q,I))):g||(q=ds(a,v),q!=null&&T.push(Js(a,q,I)))),a=a.return}T.length!==0&&n.push({event:r,listeners:T})}var Hb=/\r\n?/g,qb=/\u0000|\uFFFD/g;function zy(n){return(typeof n=="string"?n:""+n).replace(Hb,`
`).replace(qb,"")}function Oy(n,r){return r=zy(r),zy(n)===r}function Ze(n,r,a,u,g,v){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||sr(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&sr(n,""+u);break;case"className":Ha(n,"class",u);break;case"tabIndex":Ha(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ha(n,a,u);break;case"style":Op(n,u,v);break;case"data":if(r!=="object"){Ha(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Fa(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&Ze(n,r,"name",g.name,g,null),Ze(n,r,"formEncType",g.formEncType,g,null),Ze(n,r,"formMethod",g.formMethod,g,null),Ze(n,r,"formTarget",g.formTarget,g,null)):(Ze(n,r,"encType",g.encType,g,null),Ze(n,r,"method",g.method,g,null),Ze(n,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Fa(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=di);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=Fa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),Va(n,"popover",u);break;case"xlinkActuate":fi(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":fi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":fi(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":fi(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":fi(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":fi(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":fi(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":fi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":fi(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Va(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=yx.get(a)||a,Va(n,a,u))}}function Wf(n,r,a,u,g,v){switch(a){case"style":Op(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof u=="string"?sr(n,u):(typeof u=="number"||typeof u=="bigint")&&sr(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mp.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),r=a.slice(2,g?a.length-7:void 0),v=n[hn]||null,v=v!=null?v[a]:null,typeof v=="function"&&n.removeEventListener(r,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Va(n,a,u)}}}function $t(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var T=a[v];if(T!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Ze(n,r,v,T,a,null)}}g&&Ze(n,r,"srcSet",a.srcSet,a,null),u&&Ze(n,r,"src",a.src,a,null);return;case"input":Pe("invalid",n);var C=v=T=g=null,I=null,q=null;for(u in a)if(a.hasOwnProperty(u)){var Q=a[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":T=Q;break;case"checked":I=Q;break;case"defaultChecked":q=Q;break;case"value":v=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,r));break;default:Ze(n,r,u,Q,a,null)}}Up(n,v,C,I,q,T,g,!1);return;case"select":Pe("invalid",n),u=T=v=null;for(g in a)if(a.hasOwnProperty(g)&&(C=a[g],C!=null))switch(g){case"value":v=C;break;case"defaultValue":T=C;break;case"multiple":u=C;default:Ze(n,r,g,C,a,null)}r=v,a=T,n.multiple=!!u,r!=null?rr(n,!!u,r,!1):a!=null&&rr(n,!!u,a,!0);return;case"textarea":Pe("invalid",n),v=g=u=null;for(T in a)if(a.hasOwnProperty(T)&&(C=a[T],C!=null))switch(T){case"value":u=C;break;case"defaultValue":g=C;break;case"children":v=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:Ze(n,r,T,C,a,null)}Lp(n,u,g,v);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(u=a[I],u!=null))switch(I){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ze(n,r,I,u,a,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<Fs.length;u++)Pe(Fs[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(u=a[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Ze(n,r,q,u,a,null)}return;default:if(dc(r)){for(Q in a)a.hasOwnProperty(Q)&&(u=a[Q],u!==void 0&&Wf(n,r,Q,u,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(u=a[C],u!=null&&Ze(n,r,C,u,a,null))}function Fb(n,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,T=null,C=null,I=null,q=null,Q=null;for(X in a){var te=a[X];if(a.hasOwnProperty(X)&&te!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":I=te;default:u.hasOwnProperty(X)||Ze(n,r,X,null,u,te)}}for(var K in u){var X=u[K];if(te=a[K],u.hasOwnProperty(K)&&(X!=null||te!=null))switch(K){case"type":v=X;break;case"name":g=X;break;case"checked":q=X;break;case"defaultChecked":Q=X;break;case"value":T=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,r));break;default:X!==te&&Ze(n,r,K,X,u,te)}}cc(n,T,C,I,q,Q,v,g);return;case"select":X=T=C=K=null;for(v in a)if(I=a[v],a.hasOwnProperty(v)&&I!=null)switch(v){case"value":break;case"multiple":X=I;default:u.hasOwnProperty(v)||Ze(n,r,v,null,u,I)}for(g in u)if(v=u[g],I=a[g],u.hasOwnProperty(g)&&(v!=null||I!=null))switch(g){case"value":K=v;break;case"defaultValue":C=v;break;case"multiple":T=v;default:v!==I&&Ze(n,r,g,v,u,I)}r=C,a=T,u=X,K!=null?rr(n,!!a,K,!1):!!u!=!!a&&(r!=null?rr(n,!!a,r,!0):rr(n,!!a,a?[]:"",!1));return;case"textarea":X=K=null;for(C in a)if(g=a[C],a.hasOwnProperty(C)&&g!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ze(n,r,C,null,u,g)}for(T in u)if(g=u[T],v=a[T],u.hasOwnProperty(T)&&(g!=null||v!=null))switch(T){case"value":K=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==v&&Ze(n,r,T,g,u,v)}Pp(n,K,X);return;case"option":for(var ve in a)if(K=a[ve],a.hasOwnProperty(ve)&&K!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":n.selected=!1;break;default:Ze(n,r,ve,null,u,K)}for(I in u)if(K=u[I],X=a[I],u.hasOwnProperty(I)&&K!==X&&(K!=null||X!=null))switch(I){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Ze(n,r,I,K,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)K=a[Ce],a.hasOwnProperty(Ce)&&K!=null&&!u.hasOwnProperty(Ce)&&Ze(n,r,Ce,null,u,K);for(q in u)if(K=u[q],X=a[q],u.hasOwnProperty(q)&&K!==X&&(K!=null||X!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,r));break;default:Ze(n,r,q,K,u,X)}return;default:if(dc(r)){for(var je in a)K=a[je],a.hasOwnProperty(je)&&K!==void 0&&!u.hasOwnProperty(je)&&Wf(n,r,je,void 0,u,K);for(Q in u)K=u[Q],X=a[Q],!u.hasOwnProperty(Q)||K===X||K===void 0&&X===void 0||Wf(n,r,Q,K,u,X);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!u.hasOwnProperty(B)&&Ze(n,r,B,null,u,K);for(te in u)K=u[te],X=a[te],!u.hasOwnProperty(te)||K===X||K==null&&X==null||Ze(n,r,te,K,u,X)}function By(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jb(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],v=g.transferSize,T=g.initiatorType,C=g.duration;if(v&&C&&By(T)){for(T=0,C=g.responseEnd,u+=1;u<a.length;u++){var I=a[u],q=I.startTime;if(q>C)break;var Q=I.transferSize,te=I.initiatorType;Q&&By(te)&&(I=I.responseEnd,T+=Q*(I<C?1:(C-q)/(I-q)))}if(--u,r+=8*(v+T)/(g.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ed=null,td=null;function Bl(n){return n.nodeType===9?n:n.ownerDocument}function Gy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vy(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function nd(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var id=null;function Kb(){var n=window.event;return n&&n.type==="popstate"?n===id?!1:(id=n,!0):(id=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,Yb=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,$b=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(n){return qy.resolve(null).then(n).catch(Xb)}:Hy;function Xb(n){setTimeout(function(){throw n})}function oo(n){return n==="head"}function Fy(n,r){var a=r,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),zr(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Ks(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Ks(a);for(var v=a.firstChild;v;){var T=v.nextSibling,C=v.nodeName;v[cs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}else a==="body"&&Ks(n.ownerDocument.body);a=g}while(a);zr(r)}function Jy(n,r){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function od(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":od(a),lc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Qb(n,r,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[cs])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=Vn(n.nextSibling),n===null)break}return null}function Zb(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Vn(n.nextSibling),n===null))return null;return n}function Ky(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Vn(n.nextSibling),n===null))return null;return n}function rd(n){return n.data==="$?"||n.data==="$~"}function sd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function jb(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Vn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var ad=null;function Yy(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return Vn(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function $y(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function Xy(n,r,a){switch(r=Bl(a),n){case"html":if(n=r.documentElement,!n)throw Error(o(452));return n;case"head":if(n=r.head,!n)throw Error(o(453));return n;case"body":if(n=r.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Ks(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);lc(n)}var Hn=new Map,Qy=new Set;function Gl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var wi=z.d;z.d={f:Wb,r:eC,D:tC,C:nC,L:iC,m:oC,X:sC,S:rC,M:aC};function Wb(){var n=wi.f(),r=Il();return n||r}function eC(n){var r=nr(n);r!==null&&r.tag===5&&r.type==="form"?hg(r):wi.r(n)}var Ur=typeof document>"u"?null:document;function Zy(n,r,a){var u=Ur;if(u&&typeof r=="string"&&r){var g=Un(r);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Qy.has(g)||(Qy.add(g),n={rel:n,crossOrigin:a,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),$t(r,"link",n),zt(r),u.head.appendChild(r)))}}function tC(n){wi.D(n),Zy("dns-prefetch",n,null)}function nC(n,r){wi.C(n,r),Zy("preconnect",n,r)}function iC(n,r,a){wi.L(n,r,a);var u=Ur;if(u&&n&&r){var g='link[rel="preload"][as="'+Un(r)+'"]';r==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Un(a.imageSizes)+'"]')):g+='[href="'+Un(n)+'"]';var v=g;switch(r){case"style":v=Pr(n);break;case"script":v=Lr(n)}Hn.has(v)||(n=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),Hn.set(v,n),u.querySelector(g)!==null||r==="style"&&u.querySelector(Ys(v))||r==="script"&&u.querySelector($s(v))||(r=u.createElement("link"),$t(r,"link",n),zt(r),u.head.appendChild(r)))}}function oC(n,r){wi.m(n,r);var a=Ur;if(a&&n){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Un(u)+'"][href="'+Un(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Lr(n)}if(!Hn.has(v)&&(n=_({rel:"modulepreload",href:n},r),Hn.set(v,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($s(v)))return}u=a.createElement("link"),$t(u,"link",n),zt(u),a.head.appendChild(u)}}}function rC(n,r,a){wi.S(n,r,a);var u=Ur;if(u&&n){var g=ir(u).hoistableStyles,v=Pr(n);r=r||"default";var T=g.get(v);if(!T){var C={loading:0,preload:null};if(T=u.querySelector(Ys(v)))C.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":r},a),(a=Hn.get(v))&&ld(n,a);var I=T=u.createElement("link");zt(I),$t(I,"link",n),I._p=new Promise(function(q,Q){I.onload=q,I.onerror=Q}),I.addEventListener("load",function(){C.loading|=1}),I.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Vl(T,r,u)}T={type:"stylesheet",instance:T,count:1,state:C},g.set(v,T)}}}function sC(n,r){wi.X(n,r);var a=Ur;if(a&&n){var u=ir(a).hoistableScripts,g=Lr(n),v=u.get(g);v||(v=a.querySelector($s(g)),v||(n=_({src:n,async:!0},r),(r=Hn.get(g))&&ud(n,r),v=a.createElement("script"),zt(v),$t(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function aC(n,r){wi.M(n,r);var a=Ur;if(a&&n){var u=ir(a).hoistableScripts,g=Lr(n),v=u.get(g);v||(v=a.querySelector($s(g)),v||(n=_({src:n,async:!0,type:"module"},r),(r=Hn.get(g))&&ud(n,r),v=a.createElement("script"),zt(v),$t(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function jy(n,r,a,u){var g=(g=se.current)?Gl(g):null;if(!g)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Pr(a.href),a=ir(g).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Pr(a.href);var v=ir(g).hoistableStyles,T=v.get(n);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,T),(v=g.querySelector(Ys(n)))&&!v._p&&(T.instance=v,T.state.loading=5),Hn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(n,a),v||lC(g,n,a,T.state))),r&&u===null)throw Error(o(528,""));return T}if(r&&u!==null)throw Error(o(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Lr(a),a=ir(g).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Pr(n){return'href="'+Un(n)+'"'}function Ys(n){return'link[rel="stylesheet"]['+n+"]"}function Wy(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function lC(n,r,a,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),$t(r,"link",a),zt(r),n.head.appendChild(r))}function Lr(n){return'[src="'+Un(n)+'"]'}function $s(n){return"script[async]"+n}function e0(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+Un(a.href)+'"]');if(u)return r.instance=u,zt(u),u;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),zt(u),$t(u,"style",g),Vl(u,a.precedence,n),r.instance=u;case"stylesheet":g=Pr(a.href);var v=n.querySelector(Ys(g));if(v)return r.state.loading|=4,r.instance=v,zt(v),v;u=Wy(a),(g=Hn.get(g))&&ld(u,g),v=(n.ownerDocument||n).createElement("link"),zt(v);var T=v;return T._p=new Promise(function(C,I){T.onload=C,T.onerror=I}),$t(v,"link",u),r.state.loading|=4,Vl(v,a.precedence,n),r.instance=v;case"script":return v=Lr(a.src),(g=n.querySelector($s(v)))?(r.instance=g,zt(g),g):(u=a,(g=Hn.get(v))&&(u=_({},a),ud(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),zt(g),$t(g,"link",u),n.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Vl(u,a.precedence,n));return r.instance}function Vl(n,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,T=0;T<u.length;T++){var C=u[T];if(C.dataset.precedence===r)v=C;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function ld(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function ud(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Hl=null;function t0(n,r,a){if(Hl===null){var u=new Map,g=Hl=new Map;g.set(a,u)}else g=Hl,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var v=a[g];if(!(v[cs]||v[Ft]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(r)||"";T=n+T;var C=u.get(T);C?C.push(v):u.set(T,[v])}}return u}function n0(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function uC(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function i0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function cC(n,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Pr(u.href),v=r.querySelector(Ys(g));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=ql.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=v,zt(v);return}v=r.ownerDocument||r,u=Wy(u),(g=Hn.get(g))&&ld(u,g),v=v.createElement("link"),zt(v);var T=v;T._p=new Promise(function(C,I){T.onload=C,T.onerror=I}),$t(v,"link",u),a.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=ql.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var cd=0;function fC(n,r){return n.stylesheets&&n.count===0&&Jl(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&Jl(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+r);0<n.imgBytes&&cd===0&&(cd=62500*Jb());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Jl(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>cd?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function ql(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Fl=null;function Jl(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Fl=new Map,r.forEach(dC,n),Fl=null,ql.call(n))}function dC(n,r){if(!(r.state.loading&4)){var a=Fl.get(n);if(a)var u=a.get(null);else{a=new Map,Fl.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var T=g[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),u=T)}u&&a.set(null,u)}g=r.instance,T=g.getAttribute("data-precedence"),v=a.get(T)||u,v===u&&a.set(null,g),a.set(T,g),this.count++,u=ql.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),r.state.loading|=4}}var Xs={$$typeof:w,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function hC(n,r,a,u,g,v,T,C,I){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oc(0),this.hiddenUpdates=oc(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function o0(n,r,a,u,g,v,T,C,I,q,Q,te){return n=new hC(n,r,a,T,I,q,Q,te,C),r=1,v===!0&&(r|=24),v=bn(3,null,null,r),n.current=v,v.stateNode=n,r=Hc(),r.refCount++,n.pooledCache=r,r.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:r},Kc(v),n}function r0(n){return n?(n=hr,n):hr}function s0(n,r,a,u,g,v){g=r0(g),u.context===null?u.context=g:u.pendingContext=g,u=Yi(r),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=$i(n,u,r),a!==null&&(_n(a,n,r),Rs(a,n,r))}function a0(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function fd(n,r){a0(n,r),(n=n.alternate)&&a0(n,r)}function l0(n){if(n.tag===13||n.tag===31){var r=Co(n,67108864);r!==null&&_n(r,n,67108864),fd(n,67108864)}}function u0(n){if(n.tag===13||n.tag===31){var r=wn();r=rc(r);var a=Co(n,r);a!==null&&_n(a,n,r),fd(n,r)}}var Kl=!0;function pC(n,r,a,u){var g=D.T;D.T=null;var v=z.p;try{z.p=2,dd(n,r,a,u)}finally{z.p=v,D.T=g}}function mC(n,r,a,u){var g=D.T;D.T=null;var v=z.p;try{z.p=8,dd(n,r,a,u)}finally{z.p=v,D.T=g}}function dd(n,r,a,u){if(Kl){var g=hd(u);if(g===null)jf(n,r,u,Yl,a),f0(n,u);else if(yC(g,n,r,a,u))u.stopPropagation();else if(f0(n,u),r&4&&-1<gC.indexOf(n)){for(;g!==null;){var v=nr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=_o(v.pendingLanes);if(T!==0){var C=v;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var I=1<<31-at(T);C.entanglements[1]|=I,T&=~I}oi(v),(Ke&6)===0&&(Ml=Ve()+500,qs(0))}}break;case 31:case 13:C=Co(v,2),C!==null&&_n(C,v,2),Il(),fd(v,2)}if(v=hd(u),v===null&&jf(n,r,u,Yl,a),v===g)break;g=v}g!==null&&u.stopPropagation()}else jf(n,r,u,null,a)}}function hd(n){return n=pc(n),pd(n)}var Yl=null;function pd(n){if(Yl=null,n=tr(n),n!==null){var r=l(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=c(r),n!==null)return n;n=null}else if(a===31){if(n=d(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Yl=n,null}function c0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case St:return 2;case ie:return 8;case he:case ke:return 32;case Je:return 268435456;default:return 32}default:return 32}}var md=!1,ro=null,so=null,ao=null,Qs=new Map,Zs=new Map,lo=[],gC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f0(n,r){switch(n){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Qs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(r.pointerId)}}function js(n,r,a,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},r!==null&&(r=nr(r),r!==null&&l0(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),n)}function yC(n,r,a,u,g){switch(r){case"focusin":return ro=js(ro,n,r,a,u,g),!0;case"dragenter":return so=js(so,n,r,a,u,g),!0;case"mouseover":return ao=js(ao,n,r,a,u,g),!0;case"pointerover":var v=g.pointerId;return Qs.set(v,js(Qs.get(v)||null,n,r,a,u,g)),!0;case"gotpointercapture":return v=g.pointerId,Zs.set(v,js(Zs.get(v)||null,n,r,a,u,g)),!0}return!1}function d0(n){var r=tr(n.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){n.blockedOn=r,Ap(n.priority,function(){u0(a)});return}}else if(r===31){if(r=d(a),r!==null){n.blockedOn=r,Ap(n.priority,function(){u0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $l(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=hd(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);hc=u,a.target.dispatchEvent(u),hc=null}else return r=nr(a),r!==null&&l0(r),n.blockedOn=a,!1;r.shift()}return!0}function h0(n,r,a){$l(n)&&a.delete(r)}function vC(){md=!1,ro!==null&&$l(ro)&&(ro=null),so!==null&&$l(so)&&(so=null),ao!==null&&$l(ao)&&(ao=null),Qs.forEach(h0),Zs.forEach(h0)}function Xl(n,r){n.blockedOn===r&&(n.blockedOn=null,md||(md=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vC)))}var Ql=null;function p0(n){Ql!==n&&(Ql=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ql===n&&(Ql=null);for(var r=0;r<n.length;r+=3){var a=n[r],u=n[r+1],g=n[r+2];if(typeof u!="function"){if(pd(u||a)===null)continue;break}var v=nr(a);v!==null&&(n.splice(r,3),r-=3,hf(v,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function zr(n){function r(I){return Xl(I,n)}ro!==null&&Xl(ro,n),so!==null&&Xl(so,n),ao!==null&&Xl(ao,n),Qs.forEach(r),Zs.forEach(r);for(var a=0;a<lo.length;a++){var u=lo[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<lo.length&&(a=lo[0],a.blockedOn===null);)d0(a),a.blockedOn===null&&lo.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],v=a[u+1],T=g[hn]||null;if(typeof v=="function")T||p0(a);else if(T){var C=null;if(v&&v.hasAttribute("formAction")){if(g=v,T=v[hn]||null)C=T.formAction;else if(pd(g)!==null)continue}else C=T.action;typeof C=="function"?a[u+1]=C:(a.splice(u,3),u-=3),p0(a)}}}function m0(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function gd(n){this._internalRoot=n}Zl.prototype.render=gd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(o(409));var a=r.current,u=wn();s0(a,u,n,r,null,null)},Zl.prototype.unmount=gd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;s0(n.current,2,null,n,null,null),Il(),r[er]=null}};function Zl(n){this._internalRoot=n}Zl.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ep();n={blockedOn:null,target:n,priority:r};for(var a=0;a<lo.length&&r!==0&&r<lo[a].priority;a++);lo.splice(a,0,n),a===0&&d0(n)}};var g0=e.version;if(g0!=="19.2.3")throw Error(o(527,g0,"19.2.3"));z.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=m(r),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var _C={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{Ht=jl.inject(_C),Xt=jl}catch{}}return ta.createRoot=function(n,r){if(!s(n))throw Error(o(299));var a=!1,u="",g=bg,v=Cg,T=Eg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=o0(n,1,!1,null,null,a,u,null,g,v,T,m0),n[er]=r.current,Zf(n),new gd(r)},ta.hydrateRoot=function(n,r,a){if(!s(n))throw Error(o(299));var u=!1,g="",v=bg,T=Cg,C=Eg,I=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),r=o0(n,1,!0,r,a??null,u,g,I,v,T,C,m0),r.context=r0(null),a=r.current,u=wn(),u=rc(u),g=Yi(u),g.callback=null,$i(a,g,u),a=u,r.current.lanes=a,us(r,a),oi(r),n[er]=r.current,Zf(n),new Zl(r)},ta.version="19.2.3",ta}var A0;function DC(){if(A0)return _d.exports;A0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_d.exports=IC(),_d.exports}var kC=DC();const UC=qh(kC);var PC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let LC,zC;function OC(){return{geminiUrl:LC,vertexUrl:zC}}function BC(t,e,i,o){var s,l;if(!(t!=null&&t.baseUrl)){const c=OC();return e?(s=c.vertexUrl)!==null&&s!==void 0?s:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zi{}function pe(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function h(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in t))if(Array.isArray(i))t[d]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[d])){const p=t[d];if(Array.isArray(i))for(let m=0;m<p.length;m++){const y=p[m];h(y,e.slice(l+1),i[m])}else for(const m of p)h(m,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in t||(t[d]=[{}]);const p=t[d];h(p[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===s)return;if(typeof s=="object"&&typeof i=="object"&&s!==null&&i!==null)Object.assign(s,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(o+1),i)):i}else return i}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function GC(t,e){for(const[i,o]of Object.entries(e)){const s=i.split("."),l=o.split("."),c=new Set;let d=-1;for(let p=0;p<s.length;p++)if(s[p]==="*"){d=p;break}if(d!==-1&&l.length>d)for(let p=d;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Bd(t,s,l,0,c)}}function Bd(t,e,i,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),d=t;if(c in d&&Array.isArray(d[c]))for(const p of d[c])Bd(p,e,i,o+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,d=Object.keys(c).filter(m=>!m.startsWith("_")&&!s.has(m)),p={};for(const m of d)p[m]=c[m];for(const[m,y]of Object.entries(p)){const _=[];for(const S of i.slice(o))S==="*"?_.push(m):_.push(S);h(c,_,y)}for(const m of d)delete c[m]}}else{const c=t;l in c&&Bd(c[l],e,i,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VC(t){const e={},i=f(t,["operationName"]);i!=null&&h(e,["operationName"],i);const o=f(t,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function HC(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],FC(c)),e}function qC(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["response"]);return c!=null&&h(e,["response"],JC(c)),e}function FC(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>KC(c))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function JC(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>YC(c))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function KC(t){const e={},i=f(t,["video"]);return i!=null&&h(e,["video"],WC(i)),e}function YC(t){const e={},i=f(t,["_self"]);return i!=null&&h(e,["video"],eE(i)),e}function $C(t){const e={},i=f(t,["operationName"]);return i!=null&&h(e,["_url","operationName"],i),e}function XC(t){const e={},i=f(t,["operationName"]);return i!=null&&h(e,["_url","operationName"],i),e}function QC(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["response"]);return c!=null&&h(e,["response"],ZC(c)),e}function ZC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function V_(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["response"]);return c!=null&&h(e,["response"],jC(c)),e}function jC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function WC(t){const e={},i=f(t,["uri"]);i!=null&&h(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&h(e,["videoBytes"],Jh(o));const s=f(t,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function eE(t){const e={},i=f(t,["gcsUri"]);i!=null&&h(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],Jh(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var R0;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(R0||(R0={}));var w0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(w0||(w0={}));var M0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(M0||(M0={}));var nt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(nt||(nt={}));var N0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(N0||(N0={}));var I0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(I0||(I0={}));var D0;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(D0||(D0={}));var k0;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(k0||(k0={}));var U0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(U0||(U0={}));var P0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(P0||(P0={}));var L0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(L0||(L0={}));var z0;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(z0||(z0={}));var O0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(O0||(O0={}));var B0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(B0||(B0={}));var G0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(G0||(G0={}));var V0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(V0||(V0={}));var H0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(H0||(H0={}));var q0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(q0||(q0={}));var F0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(F0||(F0={}));var J0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(J0||(J0={}));var K0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(K0||(K0={}));var va;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(va||(va={}));var Y0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Y0||(Y0={}));var $0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($0||($0={}));var X0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(X0||(X0={}));var Gd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Gd||(Gd={}));var Q0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Q0||(Q0={}));var Z0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Z0||(Z0={}));var j0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(j0||(j0={}));var W0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(W0||(W0={}));var ev;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ev||(ev={}));var tv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(tv||(tv={}));var nv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(nv||(nv={}));var iv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(iv||(iv={}));var ov;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ov||(ov={}));var rv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rv||(rv={}));var sv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sv||(sv={}));var av;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(av||(av={}));var lv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(lv||(lv={}));var uv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(uv||(uv={}));var cv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(cv||(cv={}));var fv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(fv||(fv={}));var dv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(dv||(dv={}));var hv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(hv||(hv={}));var pv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(pv||(pv={}));var mv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(mv||(mv={}));var gv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(gv||(gv={}));var yv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(yv||(yv={}));var vv;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(vv||(vv={}));var _v;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_v||(_v={}));var Sv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Sv||(Sv={}));var Tv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Tv||(Tv={}));var xv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xv||(xv={}));var bv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bv||(bv={}));var Cv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Cv||(Cv={}));var Fr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Fr||(Fr={}));class Vd{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class na{get text(){var e,i,o,s,l,c,d,p;if(((s=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",y=!1;const _=[];for(const S of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[b,A]of Object.entries(S))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(A!==null||A!==void 0)&&_.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;y=!0,m+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?m:void 0}get data(){var e,i,o,s,l,c,d,p;if(((s=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const y=[];for(const _ of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(_))S!=="inlineData"&&(b!==null||b!==void 0)&&y.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,o,s,l,c,d,p;if(((s=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,o,s,l,c,d,p,m;if(((s=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,o,s,l,c,d,p,m;if(((s=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.output}}class Ev{}class Av{}class tE{}class nE{}class iE{}class oE{}class Rv{}class wv{}class Mv{}class rE{}class Nu{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Nu;let s;const l=e;return i?s=qC(l):s=HC(l),Object.assign(o,s),o}}class Nv{}class Iv{}class Dv{}class kv{}class sE{}class aE{}class lE{}class Kh{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Kh,l=QC(e);return Object.assign(o,l),o}}class uE{}class cE{}class fE{}class Uv{}class dE{get text(){var e,i,o;let s="",l=!1;const c=[];for(const d of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,s+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,i,o;let s="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(s+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class hE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Yh{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Yh,l=V_(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function H_(t,e){const i=Fe(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function q_(t){return Array.isArray(t)?t.map(e=>Iu(e)):[Iu(t)]}function Iu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function F_(t){const e=Iu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function J_(t){const e=Iu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function K_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Pv(e)):[Pv(t)]}function Hd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Lv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function zv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function jt(t){if(t==null)throw new Error("ContentUnion is required");return Hd(t)?t:{role:"user",parts:K_(t)}}function $h(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=jt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=jt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>jt(i)):[jt(e)]}function Fn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Lv(t)||zv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[jt(t)]}const e=[],i=[],o=Hd(t[0]);for(const s of t){const l=Hd(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(Lv(s)||zv(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(s)}}return o||e.push({role:"user",parts:K_(i)}),e}function pE(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(nt).includes(i[0].toUpperCase())?i[0].toUpperCase():nt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(nt).includes(o.toUpperCase())?o.toUpperCase():nt.TYPE_UNSPECIFIED})}}function $r(t){const e={},i=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&pE(t.type,e);for(const[c,d]of Object.entries(t))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(nt).includes(d.toUpperCase())?d.toUpperCase():nt.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=$r(d);else if(o.includes(c)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push($r(m))}e[c]=p}else if(s.includes(c)){const p={};for(const[m,y]of Object.entries(d))p[m]=$r(y);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Xh(t){return $r(t)}function Qh(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Zh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ns(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$r(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$r(e.response));return t}function is(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function mE(t,e,i,o=1){const s=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:s?`${i}/${e}`:e}function Oi(t,e){if(typeof e!="string")throw new Error("name must be a string");return mE(t,e,"cachedContents")}function Y_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function vo(t){return Jh(t)}function gE(t){return t!=null&&typeof t=="object"&&"name"in t}function yE(t){return t!=null&&typeof t=="object"&&"video"in t}function vE(t){return t!=null&&typeof t=="object"&&"uri"in t}function $_(t){var e;let i;if(gE(t)&&(i=t.name),!(vE(t)&&(i=t.uri,i===void 0))&&!(yE(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const s=i.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${i}`);i=s[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function X_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Q_(t){for(const e of["models","tunedModels","publisherModels"])if(_E(t,e))return t[e];return[]}function _E(t,e){return t!==null&&typeof t=="object"&&e in t}function SE(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function TE(t,e={}){const i=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=SE(s,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function Z_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,s=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function xE(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function j_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const s=i.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let l=!1;for(const c of s){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function os(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function W_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bE(t){const e={},i=f(t,["responsesFile"]);i!=null&&h(e,["fileName"],i);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>iA(c))),h(e,["inlinedResponses"],l)}const s=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function CE(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&h(e,["format"],i);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const s=f(t,["bigqueryDestination","outputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function EE(t){const e={},i=f(t,["format"]);i!=null&&h(e,["predictionsFormat"],i);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const s=f(t,["bigqueryUri"]);if(s!=null&&h(e,["bigqueryDestination","outputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function hu(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["metadata","state"]);s!=null&&h(e,["state"],W_(s));const l=f(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=f(t,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const d=f(t,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const p=f(t,["metadata","model"]);p!=null&&h(e,["model"],p);const m=f(t,["metadata","output"]);return m!=null&&h(e,["dest"],bE(j_(m))),e}function qd(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["state"]);s!=null&&h(e,["state"],W_(s));const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["createTime"]);c!=null&&h(e,["createTime"],c);const d=f(t,["startTime"]);d!=null&&h(e,["startTime"],d);const p=f(t,["endTime"]);p!=null&&h(e,["endTime"],p);const m=f(t,["updateTime"]);m!=null&&h(e,["updateTime"],m);const y=f(t,["model"]);y!=null&&h(e,["model"],y);const _=f(t,["inputConfig"]);_!=null&&h(e,["src"],AE(_));const S=f(t,["outputConfig"]);S!=null&&h(e,["dest"],CE(j_(S)));const b=f(t,["completionStats"]);return b!=null&&h(e,["completionStats"],b),e}function AE(t){const e={},i=f(t,["instancesFormat"]);i!=null&&h(e,["format"],i);const o=f(t,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const s=f(t,["bigquerySource","inputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function RE(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(i,["fileName"],o);const s=f(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>nA(t,c))),h(i,["requests","requests"],l)}return i}function wE(t){const e={},i=f(t,["format"]);i!=null&&h(e,["instancesFormat"],i);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const s=f(t,["bigqueryUri"]);if(s!=null&&h(e,["bigquerySource","inputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ME(t){const e={},i=f(t,["data"]);if(i!=null&&h(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function NE(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],os(t,o)),i}function IE(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],os(t,o)),i}function DE(t){const e={},i=f(t,["content"]);i!=null&&h(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],kE(o));const s=f(t,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const l=f(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&h(e,["index"],p);const m=f(t,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const y=f(t,["safetyRatings"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(b=>b)),h(e,["safetyRatings"],S)}const _=f(t,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function kE(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["citations"],o)}return e}function eS(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>cA(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function UE(t,e){const i={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function PE(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=f(t,["dest"]);return e!==void 0&&s!=null&&h(e,["outputConfig"],EE(xE(s))),i}function Ov(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["src"]);s!=null&&h(i,["batch","inputConfig"],RE(t,Z_(t,s)));const l=f(e,["config"]);return l!=null&&UE(l,i),i}function LE(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["model"],Fe(t,o));const s=f(e,["src"]);s!=null&&h(i,["inputConfig"],wE(Z_(t,s)));const l=f(e,["config"]);return l!=null&&PE(l,i),i}function zE(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),i}function OE(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["src"]);s!=null&&h(i,["batch","inputConfig"],JE(t,s));const l=f(e,["config"]);return l!=null&&zE(l,i),i}function BE(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],os(t,o)),i}function GE(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],os(t,o)),i}function VE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function HE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function qE(t,e){const i={},o=f(e,["contents"]);if(o!=null){let l=$h(t,o);Array.isArray(l)&&(l=l.map(c=>c)),h(i,["requests[]","request","content"],l)}const s=f(e,["config"]);return s!=null&&(h(i,["_self"],FE(s,i)),GC(i,{"requests[].*":"requests[].request.*"})),i}function FE(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const s=f(t,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function JE(t,e){const i={},o=f(e,["fileName"]);o!=null&&h(i,["file_name"],o);const s=f(e,["inlinedRequests"]);return s!=null&&h(i,["requests"],qE(t,s)),i}function KE(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function YE(t){const e={},i=f(t,["id"]);i!=null&&h(e,["id"],i);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $E(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&h(e,["allowedFunctionNames"],i);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XE(t,e,i){const o={},s=f(e,["systemInstruction"]);i!==void 0&&s!=null&&h(i,["systemInstruction"],eS(jt(s)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&h(o,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const y=f(e,["stopSequences"]);y!=null&&h(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&h(o,["responseLogprobs"],_);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&h(o,["presencePenalty"],b);const A=f(e,["frequencyPenalty"]);A!=null&&h(o,["frequencyPenalty"],A);const E=f(e,["seed"]);E!=null&&h(o,["seed"],E);const R=f(e,["responseMimeType"]);R!=null&&h(o,["responseMimeType"],R);const M=f(e,["responseSchema"]);M!=null&&h(o,["responseSchema"],Xh(M));const k=f(e,["responseJsonSchema"]);if(k!=null&&h(o,["responseJsonSchema"],k),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=f(e,["safetySettings"]);if(i!==void 0&&w!=null){let U=w;Array.isArray(U)&&(U=U.map(ne=>fA(ne))),h(i,["safetySettings"],U)}const O=f(e,["tools"]);if(i!==void 0&&O!=null){let U=is(O);Array.isArray(U)&&(U=U.map(ne=>hA(ns(ne)))),h(i,["tools"],U)}const G=f(e,["toolConfig"]);if(i!==void 0&&G!=null&&h(i,["toolConfig"],dA(G)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=f(e,["cachedContent"]);i!==void 0&&$!=null&&h(i,["cachedContent"],Oi(t,$));const V=f(e,["responseModalities"]);V!=null&&h(o,["responseModalities"],V);const re=f(e,["mediaResolution"]);re!=null&&h(o,["mediaResolution"],re);const Y=f(e,["speechConfig"]);if(Y!=null&&h(o,["speechConfig"],Qh(Y)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=f(e,["thinkingConfig"]);me!=null&&h(o,["thinkingConfig"],me);const ge=f(e,["imageConfig"]);ge!=null&&h(o,["imageConfig"],tA(ge));const Ee=f(e,["enableEnhancedCivicAnswers"]);return Ee!=null&&h(o,["enableEnhancedCivicAnswers"],Ee),o}function QE(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>DE(m))),h(e,["candidates"],p)}const s=f(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const l=f(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function ZE(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],os(t,o)),i}function jE(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],os(t,o)),i}function WE(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function eA(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function tA(t){const e={},i=f(t,["aspectRatio"]);i!=null&&h(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function nA(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["request","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let d=Fn(s);Array.isArray(d)&&(d=d.map(p=>eS(p))),h(i,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(i,["metadata"],l);const c=f(e,["config"]);return c!=null&&h(i,["request","generationConfig"],XE(t,c,f(i,["request"],{}))),i}function iA(t){const e={},i=f(t,["response"]);i!=null&&h(e,["response"],QE(i));const o=f(t,["error"]);return o!=null&&h(e,["error"],o),e}function oA(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);if(e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function rA(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const l=f(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),i}function sA(t){const e={},i=f(t,["config"]);return i!=null&&oA(i,e),e}function aA(t){const e={},i=f(t,["config"]);return i!=null&&rA(i,e),e}function lA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>hu(c))),h(e,["batchJobs"],l)}return e}function uA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>qd(c))),h(e,["batchJobs"],l)}return e}function cA(t){const e={},i=f(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],KE(l));const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],YE(c));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&h(e,["inlineData"],ME(p));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const y=f(t,["thought"]);y!=null&&h(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function fA(t){const e={},i=f(t,["category"]);if(i!=null&&h(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function dA(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&h(e,["retrievalConfig"],i);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],$E(o)),e}function hA(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),h(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],WE(c));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],eA(d));const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pi||(Pi={}));class Xo{constructor(e,i,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,s)}init(e,i,o){var s,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(s=c.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pA extends zi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Xo(Pi.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=Ov(this.apiClient,e),o=i._url,s=pe("{model}:batchGenerateContent",o),d=i.batch.inputConfig.requests,p=d.requests,m=[];for(const y of p){const _=Object.assign({},y);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const b=_.request;b.systemInstruction=S,_.request=b}m.push(_)}return d.requests=m,delete i.config,delete i._url,delete i._query,{path:s,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(c)o.dest=`${c}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=LE(this.apiClient,e);return d=pe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>qd(y))}else{const m=Ov(this.apiClient,e);return d=pe("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>hu(y))}}async createEmbeddingsInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OE(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>hu(p))}}async get(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=jE(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>qd(y))}else{const m=ZE(this.apiClient,e);return d=pe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>hu(y))}}async cancel(e){var i,o,s,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=IE(this.apiClient,e);c=pe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=NE(this.apiClient,e);c=pe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=aA(e);return d=pe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=uA(y),S=new Uv;return Object.assign(S,_),S})}else{const m=sA(e);return d=pe("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=lA(y),S=new Uv;return Object.assign(S,_),S})}}async delete(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=GE(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>HE(y))}else{const m=BE(this.apiClient,e);return d=pe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>VE(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mA(t){const e={},i=f(t,["data"]);if(i!=null&&h(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Bv(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>OA(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function gA(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let y=Fn(c);Array.isArray(y)&&(y=y.map(_=>Bv(_))),h(e,["contents"],y)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],Bv(jt(d)));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>GA(_))),h(e,["tools"],y)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],BA(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function yA(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let _=Fn(c);Array.isArray(_)&&(_=_.map(S=>S)),h(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],jt(d));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(S=>VA(S))),h(e,["tools"],_)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&h(e,["encryption_spec","kmsKeyName"],y),i}function vA(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["model"],H_(t,o));const s=f(e,["config"]);return s!=null&&gA(s,i),i}function _A(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["model"],H_(t,o));const s=f(e,["config"]);return s!=null&&yA(s,i),i}function SA(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],Oi(t,o)),i}function TA(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],Oi(t,o)),i}function xA(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function bA(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function CA(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function EA(t){const e={},i=f(t,["id"]);i!=null&&h(e,["id"],i);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AA(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&h(e,["allowedFunctionNames"],i);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function RA(t){const e={},i=f(t,["description"]);i!=null&&h(e,["description"],i);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&h(e,["response"],c);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function wA(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],Oi(t,o)),i}function MA(t,e){const i={},o=f(e,["name"]);return o!=null&&h(i,["_url","name"],Oi(t,o)),i}function NA(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function IA(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function DA(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),i}function kA(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),i}function UA(t){const e={},i=f(t,["config"]);return i!=null&&DA(i,e),e}function PA(t){const e={},i=f(t,["config"]);return i!=null&&kA(i,e),e}function LA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function zA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function OA(t){const e={},i=f(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],CA(l));const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],EA(c));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&h(e,["inlineData"],mA(p));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const y=f(t,["thought"]);y!=null&&h(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function BA(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&h(e,["retrievalConfig"],i);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],AA(o)),e}function GA(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),h(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],NA(c));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],IA(d));const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function VA(t){const e={},i=f(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>RA(S))),h(e,["functionDeclarations"],_)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const p=f(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const m=f(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const y=f(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function HA(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),i}function qA(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),i}function FA(t,e){const i={},o=f(e,["name"]);o!=null&&h(i,["_url","name"],Oi(t,o));const s=f(e,["config"]);return s!=null&&HA(s,i),i}function JA(t,e){const i={},o=f(e,["name"]);o!=null&&h(i,["_url","name"],Oi(t,o));const s=f(e,["config"]);return s!=null&&qA(s,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KA extends zi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Xo(Pi.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=_A(this.apiClient,e);return d=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const m=vA(this.apiClient,e);return d=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=MA(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const m=wA(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=TA(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=bA(y),S=new Dv;return Object.assign(S,_),S})}else{const m=SA(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=xA(y),S=new Dv;return Object.assign(S,_),S})}}async update(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=JA(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const m=FA(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=PA(e);return d=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=zA(y),S=new kv;return Object.assign(S,_),S})}else{const m=UA(e);return d=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=LA(y),S=new kv;return Object.assign(S,_),S})}}}function Du(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(i[o[s]]=t[o[s]]);return i}function Gv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(t){return this instanceof Me?(this.v=t,this):new Me(t)}function Qn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),s[Symbol.asyncIterator]=function(){return this},s;function c(b){return function(A){return Promise.resolve(A).then(b,_)}}function d(b,A){o[b]&&(s[b]=function(E){return new Promise(function(R,M){l.push([b,E,R,M])>1||p(b,E)})},A&&(s[b]=A(s[b])))}function p(b,A){try{m(o[b](A))}catch(E){S(l[0][3],E)}}function m(b){b.value instanceof Me?Promise.resolve(b.value.v).then(y,_):S(l[0][2],b)}function y(b){p("next",b)}function _(b){p("throw",b)}function S(b,A){b(A),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Zn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Gv=="function"?Gv(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(d,p){c=t[l](c),s(d,p,c.done,c.value)})}}function s(l,c,d,p){Promise.resolve(p).then(function(m){l({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YA(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:tS(i)}function tS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $A(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Vv(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<i&&t[o].role==="model";)s.push(t[o]),l&&!tS(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class XA{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new QA(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class QA{constructor(e,i,o,s={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),$A(l)}async sendMessage(e){var i;await this.sendPromise;const o=jt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await s,m=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,y=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];y!=null&&(S=(d=y.slice(_))!==null&&d!==void 0?d:[]);const b=m?[m]:[];this.recordHistory(o,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var i;await this.sendPromise;const o=jt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?Vv(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return Qn(this,arguments,function*(){var s,l,c,d,p,m;const y=[];try{for(var _=!0,S=Zn(e),b;b=yield Me(S.next()),s=b.done,!s;_=!0){d=b.value,_=!1;const A=d;if(YA(A)){const E=(m=(p=A.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content;E!==void 0&&y.push(E)}yield yield Me(A)}}catch(A){l={error:A}}finally{try{!_&&!s&&(c=S.return)&&(yield Me(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(i,y)})}recordHistory(e,i,o){let s=[];i.length>0&&i.every(l=>l.role!==void 0)?s=i:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Vv(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Yu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZA(t){const e={},i=f(t,["file"]);return i!=null&&h(e,["file"],i),e}function jA(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function WA(t){const e={},i=f(t,["name"]);return i!=null&&h(e,["_url","file"],$_(i)),e}function eR(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function tR(t){const e={},i=f(t,["name"]);return i!=null&&h(e,["_url","file"],$_(i)),e}function nR(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),i}function iR(t){const e={},i=f(t,["config"]);return i!=null&&nR(i,e),e}function oR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rR extends zi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Xo(Pi.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iR(e);return l=pe("files",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=oR(p),y=new uE;return Object.assign(y,m),y})}}async createInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZA(e);return l=pe("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=jA(p),y=new cE;return Object.assign(y,m),y})}}async get(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tR(e);return l=pe("files/{file}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=WA(e);return l=pe("files/{file}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=eR(p),y=new fE;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pu(t){const e={},i=f(t,["data"]);if(i!=null&&h(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function sR(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>xR(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function aR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function lR(t){const e={},i=f(t,["id"]);i!=null&&h(e,["id"],i);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uR(t){const e={},i=f(t,["description"]);i!=null&&h(e,["description"],i);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&h(e,["response"],c);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function cR(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&h(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const s=f(t,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const l=f(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&h(e,["logprobs"],p);const m=f(t,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const y=f(t,["mediaResolution"]);y!=null&&h(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const S=f(t,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const b=f(t,["responseMimeType"]);b!=null&&h(e,["responseMimeType"],b);const A=f(t,["responseModalities"]);A!=null&&h(e,["responseModalities"],A);const E=f(t,["responseSchema"]);E!=null&&h(e,["responseSchema"],E);const R=f(t,["routingConfig"]);R!=null&&h(e,["routingConfig"],R);const M=f(t,["seed"]);M!=null&&h(e,["seed"],M);const k=f(t,["speechConfig"]);k!=null&&h(e,["speechConfig"],k);const w=f(t,["stopSequences"]);w!=null&&h(e,["stopSequences"],w);const O=f(t,["temperature"]);O!=null&&h(e,["temperature"],O);const G=f(t,["thinkingConfig"]);G!=null&&h(e,["thinkingConfig"],G);const $=f(t,["topK"]);$!=null&&h(e,["topK"],$);const V=f(t,["topP"]);if(V!=null&&h(e,["topP"],V),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function dR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function hR(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=f(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],Zh(_));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const b=f(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const A=f(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],sR(jt(A)));const E=f(t,["tools"]);if(e!==void 0&&E!=null){let $=is(E);Array.isArray($)&&($=$.map(V=>CR(ns(V)))),h(e,["setup","tools"],$)}const R=f(t,["sessionResumption"]);e!==void 0&&R!=null&&h(e,["setup","sessionResumption"],bR(R));const M=f(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&h(e,["setup","inputAudioTranscription"],M);const k=f(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&h(e,["setup","outputAudioTranscription"],k);const w=f(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&h(e,["setup","realtimeInputConfig"],w);const O=f(t,["contextWindowCompression"]);e!==void 0&&O!=null&&h(e,["setup","contextWindowCompression"],O);const G=f(t,["proactivity"]);if(e!==void 0&&G!=null&&h(e,["setup","proactivity"],G),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function pR(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],cR(o));const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=f(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],Zh(_));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const b=f(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const A=f(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],jt(A));const E=f(t,["tools"]);if(e!==void 0&&E!=null){let V=is(E);Array.isArray(V)&&(V=V.map(re=>ER(ns(re)))),h(e,["setup","tools"],V)}const R=f(t,["sessionResumption"]);e!==void 0&&R!=null&&h(e,["setup","sessionResumption"],R);const M=f(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&h(e,["setup","inputAudioTranscription"],M);const k=f(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&h(e,["setup","outputAudioTranscription"],k);const w=f(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&h(e,["setup","realtimeInputConfig"],w);const O=f(t,["contextWindowCompression"]);e!==void 0&&O!=null&&h(e,["setup","contextWindowCompression"],O);const G=f(t,["proactivity"]);e!==void 0&&G!=null&&h(e,["setup","proactivity"],G);const $=f(t,["explicitVadSignal"]);return e!==void 0&&$!=null&&h(e,["setup","explicitVadSignal"],$),i}function mR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["setup","model"],Fe(t,o));const s=f(e,["config"]);return s!=null&&h(i,["config"],hR(s,i)),i}function gR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["setup","model"],Fe(t,o));const s=f(e,["config"]);return s!=null&&h(i,["config"],pR(s,i)),i}function yR(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&h(e,["musicGenerationConfig"],i),e}function vR(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["weightedPrompts"],o)}return e}function _R(t){const e={},i=f(t,["media"]);if(i!=null){let m=q_(i);Array.isArray(m)&&(m=m.map(y=>pu(y))),h(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],pu(J_(o)));const s=f(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const l=f(t,["video"]);l!=null&&h(e,["video"],pu(F_(l)));const c=f(t,["text"]);c!=null&&h(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function SR(t){const e={},i=f(t,["media"]);if(i!=null){let m=q_(i);Array.isArray(m)&&(m=m.map(y=>y)),h(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],J_(o));const s=f(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const l=f(t,["video"]);l!=null&&h(e,["video"],F_(l));const c=f(t,["text"]);c!=null&&h(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&h(e,["activityEnd"],p),e}function TR(t){const e={},i=f(t,["setupComplete"]);i!=null&&h(e,["setupComplete"],i);const o=f(t,["serverContent"]);o!=null&&h(e,["serverContent"],o);const s=f(t,["toolCall"]);s!=null&&h(e,["toolCall"],s);const l=f(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=f(t,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],AR(c));const d=f(t,["goAway"]);d!=null&&h(e,["goAway"],d);const p=f(t,["sessionResumptionUpdate"]);p!=null&&h(e,["sessionResumptionUpdate"],p);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&h(e,["voiceActivityDetectionSignal"],m);const y=f(t,["voiceActivity"]);return y!=null&&h(e,["voiceActivity"],RR(y)),e}function xR(t){const e={},i=f(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],aR(l));const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],lR(c));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&h(e,["inlineData"],pu(p));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const y=f(t,["thought"]);y!=null&&h(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function bR(t){const e={},i=f(t,["handle"]);if(i!=null&&h(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CR(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),h(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],fR(c));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],dR(d));const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function ER(t){const e={},i=f(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>uR(S))),h(e,["functionDeclarations"],_)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const p=f(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const m=f(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const y=f(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function AR(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&h(e,["promptTokenCount"],i);const o=f(t,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const s=f(t,["candidatesTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=f(t,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const d=f(t,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const p=f(t,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(A=>A)),h(e,["promptTokensDetails"],b)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(A=>A)),h(e,["cacheTokensDetails"],b)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(A=>A)),h(e,["responseTokensDetails"],b)}const _=f(t,["toolUsePromptTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(A=>A)),h(e,["toolUsePromptTokensDetails"],b)}const S=f(t,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function RR(t){const e={},i=f(t,["type"]);return i!=null&&h(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wR(t){const e={},i=f(t,["data"]);if(i!=null&&h(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function MR(t){const e={},i=f(t,["content"]);i!=null&&h(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],NR(o));const s=f(t,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const l=f(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&h(e,["index"],p);const m=f(t,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const y=f(t,["safetyRatings"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(b=>b)),h(e,["safetyRatings"],S)}const _=f(t,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function NR(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["citations"],o)}return e}function IR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let l=Fn(s);Array.isArray(l)&&(l=l.map(c=>c)),h(i,["contents"],l)}return i}function DR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(e,["tokensInfo"],s)}return e}function kR(t){const e={},i=f(t,["values"]);i!=null&&h(e,["values"],i);const o=f(t,["statistics"]);return o!=null&&h(e,["statistics"],UR(o)),e}function UR(t){const e={},i=f(t,["truncated"]);i!=null&&h(e,["truncated"],i);const o=f(t,["token_count"]);return o!=null&&h(e,["tokenCount"],o),e}function $u(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>q1(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function PR(t){const e={},i=f(t,["controlType"]);i!=null&&h(e,["controlType"],i);const o=f(t,["enableControlImageComputation"]);return o!=null&&h(e,["computeControl"],o),e}function LR(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function zR(t,e){const i={},o=f(t,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],jt(o));const s=f(t,["tools"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>rS(d))),h(e,["tools"],c)}const l=f(t,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],w1(l)),i}function OR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let c=Fn(s);Array.isArray(c)&&(c=c.map(d=>$u(d))),h(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&LR(l),i}function BR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let c=Fn(s);Array.isArray(c)&&(c=c.map(d=>d)),h(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&zR(l,i),i}function GR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);o!=null&&h(e,["totalTokens"],o);const s=f(t,["cachedContentTokenCount"]);return s!=null&&h(e,["cachedContentTokenCount"],s),e}function VR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);return o!=null&&h(e,["totalTokens"],o),e}function HR(t,e){const i={},o=f(e,["model"]);return o!=null&&h(i,["_url","name"],Fe(t,o)),i}function qR(t,e){const i={},o=f(e,["model"]);return o!=null&&h(i,["_url","name"],Fe(t,o)),i}function FR(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function JR(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function KR(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const b=f(t,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const A=f(t,["outputMimeType"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","mimeType"],A);const E=f(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const R=f(t,["addWatermark"]);e!==void 0&&R!=null&&h(e,["parameters","addWatermark"],R);const M=f(t,["labels"]);e!==void 0&&M!=null&&h(e,["labels"],M);const k=f(t,["editMode"]);e!==void 0&&k!=null&&h(e,["parameters","editMode"],k);const w=f(t,["baseSteps"]);return e!==void 0&&w!=null&&h(e,["parameters","editConfig","baseSteps"],w),i}function YR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["prompt"]);s!=null&&h(i,["instances[0]","prompt"],s);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>X1(p))),h(i,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&KR(c,i),i}function $R(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Xu(l))),h(e,["generatedImages"],s)}return e}function XR(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const s=f(t,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function QR(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["instances[]","task_type"],o);const s=f(t,["title"]);e!==void 0&&s!=null&&h(e,["instances[]","title"],s);const l=f(t,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),i}function ZR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let d=$h(t,s);Array.isArray(d)&&(d=d.map(p=>p)),h(i,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&XR(l,i);const c=f(e,["model"]);return c!==void 0&&h(i,["requests[]","model"],Fe(t,c)),i}function jR(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let c=$h(t,s);Array.isArray(c)&&(c=c.map(d=>d)),h(i,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&QR(l,i),i}function WR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const s=f(t,["metadata"]);return s!=null&&h(e,["metadata"],s),e}function e1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>kR(c))),h(e,["embeddings"],l)}const s=f(t,["metadata"]);return s!=null&&h(e,["metadata"],s),e}function t1(t){const e={},i=f(t,["endpoint"]);i!=null&&h(e,["name"],i);const o=f(t,["deployedModelId"]);return o!=null&&h(e,["deployedModelId"],o),e}function n1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function i1(t){const e={},i=f(t,["id"]);i!=null&&h(e,["id"],i);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function o1(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&h(e,["allowedFunctionNames"],i);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function r1(t){const e={},i=f(t,["description"]);i!=null&&h(e,["description"],i);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&h(e,["response"],c);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function s1(t,e,i){const o={},s=f(e,["systemInstruction"]);i!==void 0&&s!=null&&h(i,["systemInstruction"],$u(jt(s)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&h(o,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const y=f(e,["stopSequences"]);y!=null&&h(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&h(o,["responseLogprobs"],_);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&h(o,["presencePenalty"],b);const A=f(e,["frequencyPenalty"]);A!=null&&h(o,["frequencyPenalty"],A);const E=f(e,["seed"]);E!=null&&h(o,["seed"],E);const R=f(e,["responseMimeType"]);R!=null&&h(o,["responseMimeType"],R);const M=f(e,["responseSchema"]);M!=null&&h(o,["responseSchema"],Xh(M));const k=f(e,["responseJsonSchema"]);if(k!=null&&h(o,["responseJsonSchema"],k),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=f(e,["safetySettings"]);if(i!==void 0&&w!=null){let U=w;Array.isArray(U)&&(U=U.map(ne=>Q1(ne))),h(i,["safetySettings"],U)}const O=f(e,["tools"]);if(i!==void 0&&O!=null){let U=is(O);Array.isArray(U)&&(U=U.map(ne=>iw(ns(ne)))),h(i,["tools"],U)}const G=f(e,["toolConfig"]);if(i!==void 0&&G!=null&&h(i,["toolConfig"],nw(G)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=f(e,["cachedContent"]);i!==void 0&&$!=null&&h(i,["cachedContent"],Oi(t,$));const V=f(e,["responseModalities"]);V!=null&&h(o,["responseModalities"],V);const re=f(e,["mediaResolution"]);re!=null&&h(o,["mediaResolution"],re);const Y=f(e,["speechConfig"]);if(Y!=null&&h(o,["speechConfig"],Qh(Y)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=f(e,["thinkingConfig"]);me!=null&&h(o,["thinkingConfig"],me);const ge=f(e,["imageConfig"]);ge!=null&&h(o,["imageConfig"],k1(ge));const Ee=f(e,["enableEnhancedCivicAnswers"]);return Ee!=null&&h(o,["enableEnhancedCivicAnswers"],Ee),o}function a1(t,e,i){const o={},s=f(e,["systemInstruction"]);i!==void 0&&s!=null&&h(i,["systemInstruction"],jt(s));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(o,["topP"],c);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&h(o,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const y=f(e,["stopSequences"]);y!=null&&h(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&h(o,["responseLogprobs"],_);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&h(o,["presencePenalty"],b);const A=f(e,["frequencyPenalty"]);A!=null&&h(o,["frequencyPenalty"],A);const E=f(e,["seed"]);E!=null&&h(o,["seed"],E);const R=f(e,["responseMimeType"]);R!=null&&h(o,["responseMimeType"],R);const M=f(e,["responseSchema"]);M!=null&&h(o,["responseSchema"],Xh(M));const k=f(e,["responseJsonSchema"]);k!=null&&h(o,["responseJsonSchema"],k);const w=f(e,["routingConfig"]);w!=null&&h(o,["routingConfig"],w);const O=f(e,["modelSelectionConfig"]);O!=null&&h(o,["modelConfig"],O);const G=f(e,["safetySettings"]);if(i!==void 0&&G!=null){let D=G;Array.isArray(D)&&(D=D.map(z=>z)),h(i,["safetySettings"],D)}const $=f(e,["tools"]);if(i!==void 0&&$!=null){let D=is($);Array.isArray(D)&&(D=D.map(z=>rS(ns(z)))),h(i,["tools"],D)}const V=f(e,["toolConfig"]);i!==void 0&&V!=null&&h(i,["toolConfig"],V);const re=f(e,["labels"]);i!==void 0&&re!=null&&h(i,["labels"],re);const Y=f(e,["cachedContent"]);i!==void 0&&Y!=null&&h(i,["cachedContent"],Oi(t,Y));const me=f(e,["responseModalities"]);me!=null&&h(o,["responseModalities"],me);const ge=f(e,["mediaResolution"]);ge!=null&&h(o,["mediaResolution"],ge);const Ee=f(e,["speechConfig"]);Ee!=null&&h(o,["speechConfig"],Qh(Ee));const U=f(e,["audioTimestamp"]);U!=null&&h(o,["audioTimestamp"],U);const ne=f(e,["thinkingConfig"]);ne!=null&&h(o,["thinkingConfig"],ne);const j=f(e,["imageConfig"]);if(j!=null&&h(o,["imageConfig"],U1(j)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Hv(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let c=Fn(s);Array.isArray(c)&&(c=c.map(d=>$u(d))),h(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(i,["generationConfig"],s1(t,l,i)),i}function qv(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["contents"]);if(s!=null){let c=Fn(s);Array.isArray(c)&&(c=c.map(d=>d)),h(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(i,["generationConfig"],a1(t,l,i)),i}function Fv(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>MR(m))),h(e,["candidates"],p)}const s=f(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const l=f(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function Jv(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(y=>y)),h(e,["candidates"],m)}const s=f(t,["createTime"]);s!=null&&h(e,["createTime"],s);const l=f(t,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=f(t,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const d=f(t,["responseId"]);d!=null&&h(e,["responseId"],d);const p=f(t,["usageMetadata"]);return p!=null&&h(e,["usageMetadata"],p),e}function l1(t,e){const i={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=f(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const l=f(t,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=f(t,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const y=f(t,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const S=f(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(t,["imageSize"]);if(e!==void 0&&b!=null&&h(e,["parameters","sampleImageSize"],b),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function u1(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const s=f(t,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const m=f(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const S=f(t,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const b=f(t,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const A=f(t,["outputMimeType"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","mimeType"],A);const E=f(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const R=f(t,["addWatermark"]);e!==void 0&&R!=null&&h(e,["parameters","addWatermark"],R);const M=f(t,["labels"]);e!==void 0&&M!=null&&h(e,["labels"],M);const k=f(t,["imageSize"]);e!==void 0&&k!=null&&h(e,["parameters","sampleImageSize"],k);const w=f(t,["enhancePrompt"]);return e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w),i}function c1(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["prompt"]);s!=null&&h(i,["instances[0]","prompt"],s);const l=f(e,["config"]);return l!=null&&l1(l,i),i}function f1(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["prompt"]);s!=null&&h(i,["instances[0]","prompt"],s);const l=f(e,["config"]);return l!=null&&u1(l,i),i}function d1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>C1(c))),h(e,["generatedImages"],l)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],iS(s)),e}function h1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Xu(c))),h(e,["generatedImages"],l)}const s=f(t,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],oS(s)),e}function p1(t,e){const i={},o=f(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=f(t,["durationSeconds"]);if(e!==void 0&&s!=null&&h(e,["parameters","durationSeconds"],s),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(t,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const m=f(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=f(t,["lastFrame"]);e!==void 0&&y!=null&&h(e,["instances[0]","lastFrame"],Qu(y));const _=f(t,["referenceImages"]);if(e!==void 0&&_!=null){let S=_;Array.isArray(S)&&(S=S.map(b=>gw(b))),h(e,["instances[0]","referenceImages"],S)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function m1(t,e){const i={},o=f(t,["numberOfVideos"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const l=f(t,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const d=f(t,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&h(e,["parameters","aspectRatio"],p);const m=f(t,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const _=f(t,["pubsubTopic"]);e!==void 0&&_!=null&&h(e,["parameters","pubsubTopic"],_);const S=f(t,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const b=f(t,["enhancePrompt"]);e!==void 0&&b!=null&&h(e,["parameters","enhancePrompt"],b);const A=f(t,["generateAudio"]);e!==void 0&&A!=null&&h(e,["parameters","generateAudio"],A);const E=f(t,["lastFrame"]);e!==void 0&&E!=null&&h(e,["instances[0]","lastFrame"],Wn(E));const R=f(t,["referenceImages"]);if(e!==void 0&&R!=null){let w=R;Array.isArray(w)&&(w=w.map(O=>yw(O))),h(e,["instances[0]","referenceImages"],w)}const M=f(t,["mask"]);e!==void 0&&M!=null&&h(e,["instances[0]","mask"],mw(M));const k=f(t,["compressionQuality"]);return e!==void 0&&k!=null&&h(e,["parameters","compressionQuality"],k),i}function g1(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],S1(c)),e}function y1(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["response"]);return c!=null&&h(e,["response"],T1(c)),e}function v1(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["prompt"]);s!=null&&h(i,["instances[0]","prompt"],s);const l=f(e,["image"]);l!=null&&h(i,["instances[0]","image"],Qu(l));const c=f(e,["video"]);c!=null&&h(i,["instances[0]","video"],sS(c));const d=f(e,["source"]);d!=null&&x1(d,i);const p=f(e,["config"]);return p!=null&&p1(p,i),i}function _1(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["prompt"]);s!=null&&h(i,["instances[0]","prompt"],s);const l=f(e,["image"]);l!=null&&h(i,["instances[0]","image"],Wn(l));const c=f(e,["video"]);c!=null&&h(i,["instances[0]","video"],aS(c));const d=f(e,["source"]);d!=null&&b1(d,i);const p=f(e,["config"]);return p!=null&&m1(p,i),i}function S1(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>A1(c))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function T1(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>R1(c))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function x1(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Qu(s));const l=f(t,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],sS(l)),i}function b1(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Wn(s));const l=f(t,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],aS(l)),i}function C1(t){const e={},i=f(t,["_self"]);i!=null&&h(e,["image"],P1(i));const o=f(t,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const s=f(t,["_self"]);return s!=null&&h(e,["safetyAttributes"],iS(s)),e}function Xu(t){const e={},i=f(t,["_self"]);i!=null&&h(e,["image"],nS(i));const o=f(t,["raiFilteredReason"]);o!=null&&h(e,["raiFilteredReason"],o);const s=f(t,["_self"]);s!=null&&h(e,["safetyAttributes"],oS(s));const l=f(t,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function E1(t){const e={},i=f(t,["_self"]);i!=null&&h(e,["mask"],nS(i));const o=f(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(e,["labels"],s)}return e}function A1(t){const e={},i=f(t,["video"]);return i!=null&&h(e,["video"],hw(i)),e}function R1(t){const e={},i=f(t,["_self"]);return i!=null&&h(e,["video"],pw(i)),e}function w1(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&h(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const s=f(t,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const l=f(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&h(e,["logprobs"],p);const m=f(t,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const y=f(t,["mediaResolution"]);y!=null&&h(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const S=f(t,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const b=f(t,["responseMimeType"]);b!=null&&h(e,["responseMimeType"],b);const A=f(t,["responseModalities"]);A!=null&&h(e,["responseModalities"],A);const E=f(t,["responseSchema"]);E!=null&&h(e,["responseSchema"],E);const R=f(t,["routingConfig"]);R!=null&&h(e,["routingConfig"],R);const M=f(t,["seed"]);M!=null&&h(e,["seed"],M);const k=f(t,["speechConfig"]);k!=null&&h(e,["speechConfig"],k);const w=f(t,["stopSequences"]);w!=null&&h(e,["stopSequences"],w);const O=f(t,["temperature"]);O!=null&&h(e,["temperature"],O);const G=f(t,["thinkingConfig"]);G!=null&&h(e,["thinkingConfig"],G);const $=f(t,["topK"]);$!=null&&h(e,["topK"],$);const V=f(t,["topP"]);if(V!=null&&h(e,["topP"],V),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function M1(t,e){const i={},o=f(e,["model"]);return o!=null&&h(i,["_url","name"],Fe(t,o)),i}function N1(t,e){const i={},o=f(e,["model"]);return o!=null&&h(i,["_url","name"],Fe(t,o)),i}function I1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function D1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function k1(t){const e={},i=f(t,["aspectRatio"]);i!=null&&h(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function U1(t){const e={},i=f(t,["aspectRatio"]);i!=null&&h(e,["aspectRatio"],i);const o=f(t,["imageSize"]);o!=null&&h(e,["imageSize"],o);const s=f(t,["personGeneration"]);s!=null&&h(e,["personGeneration"],s);const l=f(t,["outputMimeType"]);l!=null&&h(e,["imageOutputOptions","mimeType"],l);const c=f(t,["outputCompressionQuality"]);return c!=null&&h(e,["imageOutputOptions","compressionQuality"],c),e}function P1(t){const e={},i=f(t,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],vo(i));const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function nS(t){const e={},i=f(t,["gcsUri"]);i!=null&&h(e,["gcsUri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["imageBytes"],vo(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Qu(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(t,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],vo(i));const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Wn(t){const e={},i=f(t,["gcsUri"]);i!=null&&h(e,["gcsUri"],i);const o=f(t,["imageBytes"]);o!=null&&h(e,["bytesBase64Encoded"],vo(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function L1(t,e,i){const o={},s=f(e,["pageSize"]);i!==void 0&&s!=null&&h(i,["_query","pageSize"],s);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&h(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&h(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&h(i,["_url","models_url"],X_(t,d)),o}function z1(t,e,i){const o={},s=f(e,["pageSize"]);i!==void 0&&s!=null&&h(i,["_query","pageSize"],s);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&h(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&h(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&h(i,["_url","models_url"],X_(t,d)),o}function O1(t,e){const i={},o=f(e,["config"]);return o!=null&&L1(t,o,i),i}function B1(t,e){const i={},o=f(e,["config"]);return o!=null&&z1(t,o,i),i}function G1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["_self"]);if(s!=null){let l=Q_(s);Array.isArray(l)&&(l=l.map(c=>Fd(c))),h(e,["models"],l)}return e}function V1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["_self"]);if(s!=null){let l=Q_(s);Array.isArray(l)&&(l=l.map(c=>Jd(c))),h(e,["models"],l)}return e}function H1(t){const e={},i=f(t,["maskMode"]);i!=null&&h(e,["maskMode"],i);const o=f(t,["segmentationClasses"]);o!=null&&h(e,["maskClasses"],o);const s=f(t,["maskDilation"]);return s!=null&&h(e,["dilation"],s),e}function Fd(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const l=f(t,["version"]);l!=null&&h(e,["version"],l);const c=f(t,["_self"]);c!=null&&h(e,["tunedModelInfo"],ow(c));const d=f(t,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const p=f(t,["outputTokenLimit"]);p!=null&&h(e,["outputTokenLimit"],p);const m=f(t,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const y=f(t,["temperature"]);y!=null&&h(e,["temperature"],y);const _=f(t,["maxTemperature"]);_!=null&&h(e,["maxTemperature"],_);const S=f(t,["topP"]);S!=null&&h(e,["topP"],S);const b=f(t,["topK"]);b!=null&&h(e,["topK"],b);const A=f(t,["thinking"]);return A!=null&&h(e,["thinking"],A),e}function Jd(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);s!=null&&h(e,["description"],s);const l=f(t,["versionId"]);l!=null&&h(e,["version"],l);const c=f(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>t1(S))),h(e,["endpoints"],_)}const d=f(t,["labels"]);d!=null&&h(e,["labels"],d);const p=f(t,["_self"]);p!=null&&h(e,["tunedModelInfo"],rw(p));const m=f(t,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const y=f(t,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["checkpoints"],_)}return e}function q1(t){const e={},i=f(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],n1(l));const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],i1(c));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&h(e,["inlineData"],wR(p));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const y=f(t,["thought"]);y!=null&&h(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function F1(t){const e={},i=f(t,["productImage"]);return i!=null&&h(e,["image"],Wn(i)),e}function J1(t,e){const i={},o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const s=f(t,["baseSteps"]);e!==void 0&&s!=null&&h(e,["parameters","baseSteps"],s);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=f(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const m=f(t,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","compressionQuality"],_);const S=f(t,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const b=f(t,["labels"]);return e!==void 0&&b!=null&&h(e,["labels"],b),i}function K1(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["source"]);s!=null&&$1(s,i);const l=f(e,["config"]);return l!=null&&J1(l,i),i}function Y1(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Xu(s))),h(e,["generatedImages"],o)}return e}function $1(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["personImage"]);e!==void 0&&s!=null&&h(e,["instances[0]","personImage","image"],Wn(s));const l=f(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>F1(d))),h(e,["instances[0]","productImages"],c)}return i}function X1(t){const e={},i=f(t,["referenceImage"]);i!=null&&h(e,["referenceImage"],Wn(i));const o=f(t,["referenceId"]);o!=null&&h(e,["referenceId"],o);const s=f(t,["referenceType"]);s!=null&&h(e,["referenceType"],s);const l=f(t,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],H1(l));const c=f(t,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],PR(c));const d=f(t,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const p=f(t,["subjectImageConfig"]);return p!=null&&h(e,["subjectImageConfig"],p),e}function iS(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&h(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const s=f(t,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function oS(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&h(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&h(e,["scores"],o);const s=f(t,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function Q1(t){const e={},i=f(t,["category"]);if(i!=null&&h(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function Z1(t){const e={},i=f(t,["image"]);return i!=null&&h(e,["image"],Wn(i)),e}function j1(t,e){const i={},o=f(t,["mode"]);e!==void 0&&o!=null&&h(e,["parameters","mode"],o);const s=f(t,["maxPredictions"]);e!==void 0&&s!=null&&h(e,["parameters","maxPredictions"],s);const l=f(t,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const p=f(t,["labels"]);return e!==void 0&&p!=null&&h(e,["labels"],p),i}function W1(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["source"]);s!=null&&tw(s,i);const l=f(e,["config"]);return l!=null&&j1(l,i),i}function ew(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>E1(s))),h(e,["generatedMasks"],o)}return e}function tw(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&h(e,["instances[0]","prompt"],o);const s=f(t,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Wn(s));const l=f(t,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],Z1(l)),i}function nw(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&h(e,["retrievalConfig"],i);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],o1(o)),e}function iw(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),h(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],I1(c));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],D1(d));const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function rS(t){const e={},i=f(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>r1(S))),h(e,["functionDeclarations"],_)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const p=f(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const m=f(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const y=f(t,["urlContext"]);return y!=null&&h(e,["urlContext"],y),e}function ow(t){const e={},i=f(t,["baseModel"]);i!=null&&h(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&h(e,["createTime"],o);const s=f(t,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function rw(t){const e={},i=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&h(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&h(e,["createTime"],o);const s=f(t,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function sw(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),i}function aw(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=f(t,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),i}function lw(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","name"],Fe(t,o));const s=f(e,["config"]);return s!=null&&sw(s,i),i}function uw(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["config"]);return s!=null&&aw(s,i),i}function cw(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const s=f(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&h(e,["parameters","safetySetting"],s);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const m=f(t,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const y=f(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=f(t,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const S=f(t,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const b=f(t,["mode"]);return e!==void 0&&b!=null&&h(e,["parameters","mode"],b),i}function fw(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["_url","model"],Fe(t,o));const s=f(e,["image"]);s!=null&&h(i,["instances[0]","image"],Wn(s));const l=f(e,["upscaleFactor"]);l!=null&&h(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&cw(c,i),i}function dw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Xu(l))),h(e,["generatedImages"],s)}return e}function hw(t){const e={},i=f(t,["uri"]);i!=null&&h(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&h(e,["videoBytes"],vo(o));const s=f(t,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function pw(t){const e={},i=f(t,["gcsUri"]);i!=null&&h(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],vo(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function mw(t){const e={},i=f(t,["image"]);i!=null&&h(e,["_self"],Wn(i));const o=f(t,["maskMode"]);return o!=null&&h(e,["maskMode"],o),e}function gw(t){const e={},i=f(t,["image"]);i!=null&&h(e,["image"],Qu(i));const o=f(t,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function yw(t){const e={},i=f(t,["image"]);i!=null&&h(e,["image"],Wn(i));const o=f(t,["referenceType"]);return o!=null&&h(e,["referenceType"],o),e}function sS(t){const e={},i=f(t,["uri"]);i!=null&&h(e,["uri"],i);const o=f(t,["videoBytes"]);o!=null&&h(e,["encodedVideo"],vo(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["encoding"],s),e}function aS(t){const e={},i=f(t,["uri"]);i!=null&&h(e,["gcsUri"],i);const o=f(t,["videoBytes"]);o!=null&&h(e,["bytesBase64Encoded"],vo(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vw(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),i}function _w(t){const e={},i=f(t,["config"]);return i!=null&&vw(i,e),e}function Sw(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),i}function Tw(t){const e={},i=f(t,["name"]);i!=null&&h(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&Sw(o,e),e}function xw(t){const e={},i=f(t,["name"]);return i!=null&&h(e,["_url","name"],i),e}function bw(t,e){const i={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const s=f(t,["chunkingConfig"]);return e!==void 0&&s!=null&&h(e,["chunkingConfig"],s),i}function Cw(t){const e={},i=f(t,["name"]);i!=null&&h(e,["name"],i);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const c=f(t,["response"]);return c!=null&&h(e,["response"],Aw(c)),e}function Ew(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&h(e,["_url","file_search_store_name"],i);const o=f(t,["fileName"]);o!=null&&h(e,["fileName"],o);const s=f(t,["config"]);return s!=null&&bw(s,e),e}function Aw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function Rw(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),i}function ww(t){const e={},i=f(t,["config"]);return i!=null&&Rw(i,e),e}function Mw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function lS(t,e){const i={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>p)),h(e,["customMetadata"],d)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),i}function Nw(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&h(e,["_url","file_search_store_name"],i);const o=f(t,["config"]);return o!=null&&lS(o,e),e}function Iw(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dw="Content-Type",kw="X-Server-Timeout",Uw="User-Agent",Kd="x-goog-api-client",Pw="1.37.0",Lw=`google-genai-sdk/${Pw}`,zw="v1beta1",Ow="v1beta";class Bw{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:zw,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Ow,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const s=[this.getRequestUrlInternal(i)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))s.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(i))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,i,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,s){if(i&&i.timeout||s){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const d=setTimeout(()=>l.abort(),i.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&Gw(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async s=>(await Kv(s),new Vd(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async s=>(await Kv(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Qn(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let c="";const d="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:y}=yield Me(s.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(y,{stream:!0});try{const A=JSON.parse(_);if("error"in A){const E=JSON.parse(JSON.stringify(A.error)),R=E.status,M=E.code,k=`got status: ${R}. ${JSON.stringify(A)}`;if(M>=400&&M<600)throw new Yu({message:k,status:M})}}catch(A){if(A.name==="ApiError")throw A}c+=_;let S=-1,b=0;for(;;){S=-1,b=0;for(const R of p){const M=c.indexOf(R);M!==-1&&(S===-1||M<S)&&(S=M,b=R.length)}if(S===-1)break;const A=c.substring(0,S);c=c.substring(S+b);const E=A.trim();if(E.startsWith(d)){const R=E.substring(d.length).trim();try{const M=new Response(R,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Me(new Vd(M))}catch(M){throw new Error(`exception parsing stream chunk ${R}. ${M}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=Lw+" "+this.clientOptions.userAgentExtra;return e[Uw]=i,e[Kd]=i,e[Dw]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(kw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const s={};i!=null&&(s.mimeType=i.mimeType,s.name=i.name,s.displayName=i.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);s.sizeBytes=String(c.size);const d=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const p={file:s},m=this.getFileName(e),y=pe("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,m,p,i==null?void 0:i.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var s;const l=this.clientOptions.uploader,c=await l.stat(i),d=String(c.size),p=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),_={};o!=null&&lS(o,_);const S=await this.fetchUploadUrl(m,d,p,y,_,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,s,l,c){var d;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function Kv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw i>=400&&i<600?new Yu({message:s,status:i}):new Error(s)}}function Gw(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],y=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&y&&typeof y=="object"&&!Array.isArray(y)?d[p]=o(y,m):(y&&m&&typeof y!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const s=o(i,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vw="mcp_used/unknown";let Hw=!1;function uS(t){for(const e of t)if(qw(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Hw}function cS(t){var e;const i=(e=t[Kd])!==null&&e!==void 0?e:"";t[Kd]=(i+` ${Vw}`).trimStart()}function qw(t){return t!==null&&typeof t=="object"&&t instanceof jh}function Fw(t){return Qn(this,arguments,function*(i,o=100){let s,l=0;for(;l<o;){const c=yield Me(i.listTools({cursor:s}));for(const d of c.tools)yield yield Me(d),l++;if(!c.nextCursor)break;s=c.nextCursor}})}class jh{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new jh(e,i)}async initialize(){var e,i,o,s;if(this.mcpTools.length>0)return;const l={},c=[];for(const y of this.mcpClients)try{for(var d=!0,p=(i=void 0,Zn(Fw(y))),m;m=await p.next(),e=m.done,!e;d=!0){s=m.value,d=!1;const _=s;c.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=y}}catch(_){i={error:_}}finally{try{!d&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),TE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await s.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Jw(t,e,i){const o=new hE;let s;i.data instanceof Blob?s=JSON.parse(await i.data.text()):s=JSON.parse(i.data),Object.assign(o,s),e(o)}class Kw{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=Xw(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const y=new Promise(w=>{m=w}),_=e.callbacks,S=function(){m({})},b=this.apiClient,A={onopen:S,onmessage:w=>{Jw(b,_.onmessage,w)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(w){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(w){}},E=this.webSocketFactory.create(p,$w(c),A);E.connect(),await y;const k={setup:{model:Fe(this.apiClient,e.model)}};return E.send(JSON.stringify(k)),new Yw(E,this.apiClient)}}class Yw{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=vR(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=yR(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Fr.PLAY)}pause(){this.sendPlaybackControl(Fr.PAUSE)}stop(){this.sendPlaybackControl(Fr.STOP)}resetContext(){this.sendPlaybackControl(Fr.RESET_CONTEXT)}close(){this.conn.close()}}function $w(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function Xw(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qw="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Zw(t,e,i){const o=new dE;let s;i.data instanceof Blob?s=await i.data.text():i.data instanceof ArrayBuffer?s=new TextDecoder().decode(i.data):s=i.data;const l=JSON.parse(s);if(t.isVertexAI()){const c=TR(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class jw{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new Kw(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,s,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&uS(e.config.tools)&&cS(_);const S=nM(_);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,y);else{const Y=this.apiClient.getApiKey();let me="BidiGenerateContent",ge="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),me="BidiGenerateContentConstrained",ge="access_token"),y=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${me}?${ge}=${Y}`}let b=()=>{};const A=new Promise(Y=>{b=Y}),E=e.callbacks,R=function(){var Y;(Y=E==null?void 0:E.onopen)===null||Y===void 0||Y.call(E),b({})},M=this.apiClient,k={onopen:R,onmessage:Y=>{Zw(M,E.onmessage,Y)},onerror:(i=E==null?void 0:E.onerror)!==null&&i!==void 0?i:function(Y){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(Y){}},w=this.webSocketFactory.create(y,tM(S),k);w.connect(),await A;let O=Fe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const Y=this.apiClient.getProject(),me=this.apiClient.getLocation();O=`projects/${Y}/locations/${me}/`+O}let G={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[va.AUDIO]}:e.config.responseModalities=[va.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],V=[];for(const Y of $)if(this.isCallableTool(Y)){const me=Y;V.push(await me.tool())}else V.push(Y);V.length>0&&(e.config.tools=V);const re={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=gR(this.apiClient,re):G=mR(this.apiClient,re),delete G.config,w.send(JSON.stringify(G)),new eM(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Ww={turnComplete:!0};class eM{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=Fn(i.turns),e.isVertexAI()||(o=o.map(s=>$u(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Qw)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Ww),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:SR(e)}:i={realtimeInput:_R(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function tM(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function nM(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yv=10;function $v(t){var e,i,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(Xr(c)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Xr(t){return"callTool"in t&&typeof t.callTool=="function"}function iM(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(s=>Xr(s)))!==null&&o!==void 0?o:!1}function Xv(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(Xr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(s)}),i}function Qv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oM extends zi{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,s,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!iM(i)||$v(i.config))return await this.generateContentInternal(p);const m=Xv(i);if(m.length>0){const E=m.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let y,_;const S=Fn(p.contents),b=(l=(s=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Yv;let A=0;for(;A<b&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const E=y.candidates[0].content,R=[];for(const M of(d=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Xr(M)){const w=await M.callTool(y.functionCalls);R.push(...w)}A++,_={role:"user",parts:R},p.contents=Fn(p.contents),p.contents.push(E),p.contents.push(_),Qv(p.config)&&(S.push(E),S.push(_))}return Qv(p.config)&&(y.automaticFunctionCallingHistory=S),y},this.generateContentStream=async i=>{var o,s,l,c,d;if(this.maybeMoveToResponseJsonSchem(i),$v(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const p=Xv(i);if(p.length>0){const _=p.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(s=(o=i==null?void 0:i.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(d=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var s;let l;const c=[];if(o!=null&&o.generatedImages)for(const p of o.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((s=p==null?void 0:p.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Xo(Pi.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const s={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async i=>{var o,s,l,c,d,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((s=i.video)===null||s===void 0)&&s.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(d=i.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,s;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>Xr(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&uS(e.config.tools)){const p=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),cS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var i,o,s;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(Xr(c)){const d=c,p=await d.tool();for(const m of(s=p.functionDeclarations)!==null&&s!==void 0?s:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var i,o,s;const l=(s=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Yv;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,y,_){return Qn(this,arguments,function*(){for(var S,b,A,E,R,M;d<l;){c&&(d++,c=!1);const G=yield Me(m.processParamsMaybeAddMcpUsage(_)),$=yield Me(m.generateContentStreamInternal(G)),V=[],re=[];try{for(var k=!0,w=(b=void 0,Zn($)),O;O=yield Me(w.next()),S=O.done,!S;k=!0){E=O.value,k=!1;const Y=E;if(yield yield Me(Y),Y.candidates&&(!((R=Y.candidates[0])===null||R===void 0)&&R.content)){re.push(Y.candidates[0].content);for(const me of(M=Y.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(d<l&&me.functionCall){if(!me.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(me.functionCall.name)){const ge=yield Me(y.get(me.functionCall.name).callTool([me.functionCall]));V.push(...ge)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${me.functionCall.name}`)}}}}catch(Y){b={error:Y}}finally{try{!k&&!S&&(A=w.return)&&(yield Me(A.call(w)))}finally{if(b)throw b.error}}if(V.length>0){c=!0;const Y=new na;Y.candidates=[{content:{role:"user",parts:V}}],yield yield Me(Y);const me=[];me.push(...re),me.push({role:"user",parts:V});const ge=Fn(_.contents).concat(me);_.contents=ge}else break}})})(this,p,e)}async generateContentInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=qv(this.apiClient,e);return d=pe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=Jv(y),S=new na;return Object.assign(S,_),S})}else{const m=Hv(this.apiClient,e);return d=pe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=Fv(y),S=new na;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=qv(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return Qn(this,arguments,function*(){var S,b,A,E;try{for(var R=!0,M=Zn(_),k;k=yield Me(M.next()),S=k.done,!S;R=!0){E=k.value,R=!1;const w=E,O=Jv(yield Me(w.json()));O.sdkHttpResponse={headers:w.headers};const G=new na;Object.assign(G,O),yield yield Me(G)}}catch(w){b={error:w}}finally{try{!R&&!S&&(A=M.return)&&(yield Me(A.call(M)))}finally{if(b)throw b.error}}})})}else{const m=Hv(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return Qn(this,arguments,function*(){var S,b,A,E;try{for(var R=!0,M=Zn(_),k;k=yield Me(M.next()),S=k.done,!S;R=!0){E=k.value,R=!1;const w=E,O=Fv(yield Me(w.json()));O.sdkHttpResponse={headers:w.headers};const G=new na;Object.assign(G,O),yield yield Me(G)}}catch(w){b={error:w}}finally{try{!R&&!S&&(A=M.return)&&(yield Me(A.call(M)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=jR(this.apiClient,e);return d=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=e1(y),S=new Ev;return Object.assign(S,_),S})}else{const m=ZR(this.apiClient,e);return d=pe("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=WR(y),S=new Ev;return Object.assign(S,_),S})}}async generateImagesInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=f1(this.apiClient,e);return d=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=h1(y),S=new Av;return Object.assign(S,_),S})}else{const m=c1(this.apiClient,e);return d=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=d1(y),S=new Av;return Object.assign(S,_),S})}}async editImageInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=YR(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=$R(p),y=new tE;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=fw(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=dw(p),y=new nE;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=K1(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Y1(p),y=new iE;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=W1(this.apiClient,e);return l=pe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=ew(p),y=new oE;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=N1(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Jd(y))}else{const m=M1(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Fd(y))}}async listInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=B1(this.apiClient,e);return d=pe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=V1(y),S=new Rv;return Object.assign(S,_),S})}else{const m=O1(this.apiClient,e);return d=pe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=G1(y),S=new Rv;return Object.assign(S,_),S})}}async update(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=uw(this.apiClient,e);return d=pe("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Jd(y))}else{const m=lw(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Fd(y))}}async delete(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=qR(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=JR(y),S=new wv;return Object.assign(S,_),S})}else{const m=HR(this.apiClient,e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=FR(y),S=new wv;return Object.assign(S,_),S})}}async countTokens(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=BR(this.apiClient,e);return d=pe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=VR(y),S=new Mv;return Object.assign(S,_),S})}else{const m=OR(this.apiClient,e);return d=pe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=GR(y),S=new Mv;return Object.assign(S,_),S})}}async computeTokens(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=IR(this.apiClient,e);return l=pe("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>{const m=DR(p),y=new rE;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=_1(this.apiClient,e);return d=pe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const _=y1(y),S=new Nu;return Object.assign(S,_),S})}else{const m=v1(this.apiClient,e);return d=pe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const _=g1(y),S=new Nu;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rM extends zi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:s,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:s,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=XC(e);return d=pe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const m=$C(e);return d=pe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=VC(e);return l=pe("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sM(t){const e={},i=f(t,["data"]);if(i!=null&&h(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function aM(t){const e={},i=f(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>gM(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function lM(t,e,i){const o={},s=f(e,["expireTime"]);i!==void 0&&s!=null&&h(i,["expireTime"],s);const l=f(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&h(i,["newSessionExpireTime"],l);const c=f(e,["uses"]);i!==void 0&&c!=null&&h(i,["uses"],c);const d=f(e,["liveConnectConstraints"]);i!==void 0&&d!=null&&h(i,["bidiGenerateContentSetup"],mM(t,d));const p=f(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&h(i,["fieldMask"],p),o}function uM(t,e){const i={},o=f(e,["config"]);return o!=null&&h(i,["config"],lM(t,o,i)),i}function cM(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function fM(t){const e={},i=f(t,["id"]);i!=null&&h(e,["id"],i);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function hM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function pM(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=f(t,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],Zh(_));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const b=f(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],b);const A=f(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],aM(jt(A)));const E=f(t,["tools"]);if(e!==void 0&&E!=null){let $=is(E);Array.isArray($)&&($=$.map(V=>vM(ns(V)))),h(e,["setup","tools"],$)}const R=f(t,["sessionResumption"]);e!==void 0&&R!=null&&h(e,["setup","sessionResumption"],yM(R));const M=f(t,["inputAudioTranscription"]);e!==void 0&&M!=null&&h(e,["setup","inputAudioTranscription"],M);const k=f(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&h(e,["setup","outputAudioTranscription"],k);const w=f(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&h(e,["setup","realtimeInputConfig"],w);const O=f(t,["contextWindowCompression"]);e!==void 0&&O!=null&&h(e,["setup","contextWindowCompression"],O);const G=f(t,["proactivity"]);if(e!==void 0&&G!=null&&h(e,["setup","proactivity"],G),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function mM(t,e){const i={},o=f(e,["model"]);o!=null&&h(i,["setup","model"],Fe(t,o));const s=f(e,["config"]);return s!=null&&h(i,["config"],pM(s,i)),i}function gM(t){const e={},i=f(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],cM(l));const c=f(t,["functionCall"]);c!=null&&h(e,["functionCall"],fM(c));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&h(e,["inlineData"],sM(p));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const y=f(t,["thought"]);y!=null&&h(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function yM(t){const e={},i=f(t,["handle"]);if(i!=null&&h(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vM(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(_=>_)),h(e,["functionDeclarations"],y)}const c=f(t,["googleMaps"]);c!=null&&h(e,["googleMaps"],dM(c));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],hM(d));const p=f(t,["googleSearchRetrieval"]);p!=null&&h(e,["googleSearchRetrieval"],p);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _M(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${i}.${l}`);e.push(...s)}else e.push(i)}return e.join(",")}function SM(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(i){const l=_M(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class TM extends zi{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=uM(this.apiClient,e);l=pe("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=SM(d,e.config);return s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xM(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),i}function bM(t){const e={},i=f(t,["name"]);i!=null&&h(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&xM(o,e),e}function CM(t){const e={},i=f(t,["name"]);return i!=null&&h(e,["_url","name"],i),e}function EM(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),i}function AM(t){const e={},i=f(t,["parent"]);i!=null&&h(e,["_url","parent"],i);const o=f(t,["config"]);return o!=null&&EM(o,e),e}function RM(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wM extends zi{constructor(e){super(),this.apiClient=e,this.list=async i=>new Xo(Pi.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CM(e);return l=pe("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var i,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=bM(e);s=pe("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AM(e);return l=pe("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=RM(p),y=new sE;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MM extends zi{constructor(e,i=new wM(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new Xo(Pi.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_w(e);return l=pe("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xw(e);return l=pe("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var i,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Tw(e);s=pe("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ww(e);return l=pe("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Mw(p),y=new aE;return Object.assign(y,m),y})}}async uploadToFileSearchStoreInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Nw(e);return l=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Iw(p),y=new lE;return Object.assign(y,m),y})}}async importFile(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ew(e);return l=pe("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),s.then(p=>{const m=Cw(p),y=new Kh;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return fS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};const NM=()=>fS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yd(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const $d=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jn extends Error{}class ln extends Jn{constructor(e,i,o,s){super(`${ln.makeMessage(e,i,o)}`),this.status=e,this.headers=s,this.error=i}static makeMessage(e,i,o){const s=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,i,o,s){if(!e||!s)return new Zu({message:o,cause:$d(i)});const l=i;return e===400?new hS(e,l,o,s):e===401?new pS(e,l,o,s):e===403?new mS(e,l,o,s):e===404?new gS(e,l,o,s):e===409?new yS(e,l,o,s):e===422?new vS(e,l,o,s):e===429?new _S(e,l,o,s):e>=500?new SS(e,l,o,s):new ln(e,l,o,s)}}class Xd extends ln{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Zu extends ln{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class dS extends Zu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class hS extends ln{}class pS extends ln{}class mS extends ln{}class gS extends ln{}class yS extends ln{}class vS extends ln{}class _S extends ln{}class SS extends ln{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IM=/^[a-z][a-z0-9+.-]*:/i,DM=t=>IM.test(t);let Qd=t=>(Qd=Array.isArray,Qd(t));const kM=Qd;let UM=kM;const Zv=UM;function PM(t){if(!t)return!0;for(const e in t)return!1;return!0}function LM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const zM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Jn(`${t} must be an integer`);if(e<0)throw new Jn(`${t} must be a positive integer`);return e},OM=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BM=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const VM=()=>{var t,e,i,o,s;const l=GM();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":Wv(Deno.build.os),"X-Stainless-Arch":jv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":Wv((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":jv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const c=HM();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function HM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const o=i.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${s}.${l}.${c}`}}}return null}const jv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Wv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Wl;const qM=()=>Wl??(Wl=VM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function TS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function JM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return TS({start(){},async pull(i){const{done:o,value:s}=await e.next();o?i.close():i.enqueue(s)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function xS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function KM(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bd(t,e,i){return bS(),new File(t,e??"unknown_file",i)}function $M(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const XM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",QM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&CS(t),ZM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function jM(t,e,i){if(bS(),t=await t,QM(t))return t instanceof File?t:bd([await t.arrayBuffer()],t.name);if(ZM(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),bd(await Zd(s),e,i)}const o=await Zd(t);if(e||(e=$M(t)),!(i!=null&&i.type)){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(i=Object.assign(Object.assign({},i),{type:s}))}return bd(o,e,i)}async function Zd(t){var e,i,o,s,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(CS(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(XM(t))try{for(var d=!0,p=Zn(t),m;m=await p.next(),e=m.done,!e;d=!0){s=m.value,d=!1;const y=s;c.push(...await Zd(y))}}catch(y){i={error:y}}finally{try{!d&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}else{const y=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${WM(t)}`)}return c}function WM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ES{constructor(e){this._client=e}}ES._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const e_=Object.freeze(Object.create(null)),eN=(t=AS)=>(function(i,...o){if(i.length===1)return i[0];let s=!1;const l=[],c=i.reduce((y,_,S)=>{var b,A,E;/[?#]/.test(_)&&(s=!0);const R=o[S];let M=(s?encodeURIComponent:t)(""+R);return S!==o.length&&(R==null||typeof R=="object"&&R.toString===((E=Object.getPrototypeOf((A=Object.getPrototypeOf((b=R.hasOwnProperty)!==null&&b!==void 0?b:e_))!==null&&A!==void 0?A:e_))===null||E===void 0?void 0:E.toString))&&(M=R+"",l.push({start:y.length+_.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),y+_+(S===o.length?"":M)},""),d=c.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=p.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((y,_)=>y.start-_.start),l.length>0){let y=0;const _=l.reduce((S,b)=>{const A=" ".repeat(b.start-y),E="^".repeat(b.length);return y=b.start+b.length,S+A+E},"");throw new Jn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${_}`)}return c}),eu=eN(AS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RS extends ES{create(e,i){var o;const{api_version:s=this._client.apiVersion}=e,l=Du(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Jn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Jn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(eu`/${s}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,i={},o){const{api_version:s=this._client.apiVersion}=i??{};return this._client.delete(eu`/${s}/interactions/${e}`,o)}cancel(e,i={},o){const{api_version:s=this._client.apiVersion}=i??{};return this._client.post(eu`/${s}/interactions/${e}/cancel`,o)}get(e,i={},o){var s;const l=i??{},{api_version:c=this._client.apiVersion}=l,d=Du(l,["api_version"]);return this._client.get(eu`/${c}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(s=i==null?void 0:i.stream)!==null&&s!==void 0?s:!1}))}}RS._key=Object.freeze(["interactions"]);class wS extends RS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tN(t){let e=0;for(const s of t)e+=s.length;const i=new Uint8Array(e);let o=0;for(const s of t)i.set(s,o),o+=s.length;return i}let tu;function Wh(t){let e;return(tu??(e=new globalThis.TextEncoder,tu=e.encode.bind(e)))(t)}let nu;function t_(t){let e;return(nu??(e=new globalThis.TextDecoder,nu=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ju{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wh(e):e;this.buffer=tN([this.buffer,i]);const o=[];let s;for(;(s=nN(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(t_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,c=t_(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}ju.NEWLINE_CHARS=new Set([`
`,"\r"]);ju.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function nN(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function iN(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ku={off:0,error:200,warn:300,info:400,debug:500},n_=(t,e,i)=>{if(t){if(LM(ku,t))return t;rn(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ku))}`)}};function sa(){}function iu(t,e,i){return!e||ku[t]>ku[i]?sa:e[t].bind(e)}const oN={error:sa,warn:sa,info:sa,debug:sa};let i_=new WeakMap;function rn(t){var e;const i=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return oN;const s=i_.get(i);if(s&&s[0]===o)return s[1];const l={error:iu("error",i,o),warn:iu("warn",i,o),info:iu("info",i,o),debug:iu("debug",i,o)};return i_.set(i,[o,l]),l}const Oo=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jr{constructor(e,i,o){this.iterator=e,this.controller=i,this.client=o}static fromSSEResponse(e,i,o){let s=!1;const l=o?rn(o):console;function c(){return Qn(this,arguments,function*(){var p,m,y,_;if(s)throw new Jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var b=!0,A=Zn(rN(e,i)),E;E=yield Me(A.next()),p=E.done,!p;b=!0){_=E.value,b=!1;const R=_;if(!S)if(R.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Me(JSON.parse(R.data))}catch(M){throw l.error("Could not parse message into JSON:",R.data),l.error("From chunk:",R.raw),M}}}catch(R){m={error:R}}finally{try{!b&&!p&&(y=A.return)&&(yield Me(y.call(A)))}finally{if(m)throw m.error}}S=!0}catch(R){if(Yd(R))return yield Me(void 0);throw R}finally{S||i.abort()}})}return new Jr(c,i,o)}static fromReadableStream(e,i,o){let s=!1;function l(){return Qn(this,arguments,function*(){var p,m,y,_;const S=new ju,b=xS(e);try{for(var A=!0,E=Zn(b),R;R=yield Me(E.next()),p=R.done,!p;A=!0){_=R.value,A=!1;const M=_;for(const k of S.decode(M))yield yield Me(k)}}catch(M){m={error:M}}finally{try{!A&&!p&&(y=E.return)&&(yield Me(y.call(E)))}finally{if(m)throw m.error}}for(const M of S.flush())yield yield Me(M)})}function c(){return Qn(this,arguments,function*(){var p,m,y,_;if(s)throw new Jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var b=!0,A=Zn(l()),E;E=yield Me(A.next()),p=E.done,!p;b=!0){_=E.value,b=!1;const R=_;S||R&&(yield yield Me(JSON.parse(R)))}}catch(R){m={error:R}}finally{try{!b&&!p&&(y=A.return)&&(yield Me(y.call(A)))}finally{if(m)throw m.error}}S=!0}catch(R){if(Yd(R))return yield Me(void 0);throw R}finally{S||i.abort()}})}return new Jr(c,i,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),i.push(c)}return l.shift()}});return[new Jr(()=>s(e),this.controller,this.client),new Jr(()=>s(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return TS({async start(){i=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:l}=await i.next();if(l)return o.close();const c=Wh(JSON.stringify(s)+`
`);o.enqueue(c)}catch(s){o.error(s)}},async cancel(){var o;await((o=i.return)===null||o===void 0?void 0:o.call(i))}})}}function rN(t,e){return Qn(this,arguments,function*(){var o,s,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Jn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Jn("Attempted to iterate over a response with no body");const d=new aN,p=new ju,m=xS(t.body);try{for(var y=!0,_=Zn(sN(m)),S;S=yield Me(_.next()),o=S.done,!o;y=!0){c=S.value,y=!1;const b=c;for(const A of p.decode(b)){const E=d.decode(A);E&&(yield yield Me(E))}}}catch(b){s={error:b}}finally{try{!y&&!o&&(l=_.return)&&(yield Me(l.call(_)))}finally{if(s)throw s.error}}for(const b of p.flush()){const A=d.decode(b);A&&(yield yield Me(A))}})}function sN(t){return Qn(this,arguments,function*(){var i,o,s,l;let c=new Uint8Array;try{for(var d=!0,p=Zn(t),m;m=yield Me(p.next()),i=m.done,!i;d=!0){l=m.value,d=!1;const y=l;if(y==null)continue;const _=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?Wh(y):y;let S=new Uint8Array(c.length+_.length);S.set(c),S.set(_,c.length),c=S;let b;for(;(b=iN(c))!==-1;)yield yield Me(c.slice(0,b)),c=c.slice(b)}}catch(y){o={error:y}}finally{try{!d&&!i&&(s=p.return)&&(yield Me(s.call(p)))}finally{if(o)throw o.error}}c.length>0&&(yield yield Me(c))})}class aN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,o,s]=lN(e,":");return s.startsWith(" ")&&(s=s.substring(1)),i==="event"?this.event=s:i==="data"&&this.data.push(s),null}}function lN(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function uN(t,e){const{response:i,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,c=await(async()=>{var d;if(e.options.stream)return rn(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Jr.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const p=i.headers.get("content-type"),m=(d=p==null?void 0:p.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await i.json():await i.text()})();return rn(t).debug(`[${o}] response parsed`,Oo({retryOfRequestLogID:s,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ep extends Promise{constructor(e,i,o=uN){super(s=>{s(null)}),this.responsePromise=i,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new ep(this.client,this.responsePromise,async(i,o)=>e(await this.parseResponse(i,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MS=Symbol("brand.privateNullableHeaders");function*cN(t){if(!t)return;if(MS in t){const{values:o,nulls:s}=t;yield*o.entries();for(const l of s)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():Zv(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let o of i){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=Zv(o[1])?o[1]:[o[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[s,null]),yield[s,d])}}const ia=t=>{const e=new Headers,i=new Set;for(const o of t){const s=new Set;for(const[l,c]of cN(o)){const d=l.toLowerCase();s.has(d)||(e.delete(l),s.add(d)),c===null?(e.delete(l),i.add(d)):(e.append(l,c),i.delete(d))}}return{[MS]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cd=t=>{var e,i,o,s,l,c;if(typeof globalThis.process<"u")return(o=(i=(e=PC)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var NS;class Wu{constructor(e){var i,o,s,l,c,d,p,{baseURL:m=Cd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(i=Cd("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,S=Du(e,["baseURL","apiKey","apiVersion"]);const b=Object.assign(Object.assign({apiKey:y,apiVersion:_},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=b.baseURL,this.timeout=(o=b.timeout)!==null&&o!==void 0?o:Wu.DEFAULT_TIMEOUT,this.logger=(s=b.logger)!==null&&s!==void 0?s:console;const A="warn";this.logLevel=A,this.logLevel=(c=(l=n_(b.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:n_(Cd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:A,this.fetchOptions=b.fetchOptions,this.maxRetries=(d=b.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(p=b.fetch)!==null&&p!==void 0?p:FM(),this.encoder=YM,this._options=b,this.apiKey=y,this.apiVersion=_,this.clientAdapter=b.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=ia([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return ia([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ia([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new Jn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Hr}`}defaultIdempotencyKey(){return`stainless-node-retry-${NM()}`}makeStatusError(e,i,o,s){return ln.generate(e,i,o,s)}buildURL(e,i,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=DM(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return PM(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:o}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:i},s)))}request(e,i=null){return new ep(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,o){var s,l,c;const d=await e,p=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;i==null&&(i=p),await this.prepareOptions(d);const{req:m,url:y,timeout:_}=await this.buildRequest(d,{retryCount:p-i});await this.prepareRequest(m,{url:y,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),b=o===void 0?"":`, retryOf: ${o}`,A=Date.now();if(rn(this).debug(`[${S}] sending request`,Oo({retryOfRequestLogID:o,method:d.method,url:y,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Xd;const E=new AbortController,R=await this.fetchWithTimeout(y,m,_,E).catch($d),M=Date.now();if(R instanceof globalThis.Error){const w=`retrying, ${i} attempts remaining`;if(!((c=d.signal)===null||c===void 0)&&c.aborted)throw new Xd;const O=Yd(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(i)return rn(this).info(`[${S}] connection ${O?"timed out":"failed"} - ${w}`),rn(this).debug(`[${S}] connection ${O?"timed out":"failed"} (${w})`,Oo({retryOfRequestLogID:o,url:y,durationMs:M-A,message:R.message})),this.retryRequest(d,i,o??S);throw rn(this).info(`[${S}] connection ${O?"timed out":"failed"} - error; no more retries left`),rn(this).debug(`[${S}] connection ${O?"timed out":"failed"} (error; no more retries left)`,Oo({retryOfRequestLogID:o,url:y,durationMs:M-A,message:R.message})),O?new dS:new Zu({cause:R})}const k=`[${S}${b}] ${m.method} ${y} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${M-A}ms`;if(!R.ok){const w=await this.shouldRetry(R);if(i&&w){const Y=`retrying, ${i} attempts remaining`;return await KM(R.body),rn(this).info(`${k} - ${Y}`),rn(this).debug(`[${S}] response error (${Y})`,Oo({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,durationMs:M-A})),this.retryRequest(d,i,o??S,R.headers)}const O=w?"error; no more retries left":"error; not retryable";rn(this).info(`${k} - ${O}`);const G=await R.text().catch(Y=>$d(Y).message),$=OM(G),V=$?void 0:G;throw rn(this).debug(`[${S}] response error (${O})`,Oo({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,message:V,durationMs:Date.now()-A})),this.makeStatusError(R.status,$,V,R.headers)}return rn(this).info(k),rn(this).debug(`[${S}] response start`,Oo({retryOfRequestLogID:o,url:R.url,status:R.status,headers:R.headers,durationMs:M-A})),{response:R,options:d,controller:E,requestLogID:S,retryOfRequestLogID:o,startTime:A}}async fetchWithTimeout(e,i,o,s){const l=i||{},{signal:c,method:d}=l,p=Du(l,["signal","method"]);c&&c.addEventListener("abort",()=>s.abort());const m=setTimeout(()=>s.abort(),o),y=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,_=Object.assign(Object.assign(Object.assign({signal:s.signal},y?{duplex:"half"}:{}),{method:"GET"}),p);d&&(_.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,o,s){var l;let c;const d=s==null?void 0:s.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(c=m)}const p=s==null?void 0:s.get("retry-after");if(p&&!c){const m=parseFloat(p);Number.isNaN(m)?c=Date.parse(p)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,m)}return await BM(c),this.makeRequest(e,i-1,o)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:i=0}={}){var o,s,l;const c=Object.assign({},e),{method:d,path:p,query:m,defaultBaseURL:y}=c,_=this.buildURL(p,m,y);"timeout"in c&&zM("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:b}=this.buildBody({options:c}),A=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:A},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&b instanceof globalThis.ReadableStream&&{duplex:"half"}),b&&{body:b}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:o,retryCount:s}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let d=ia([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),qM()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ia([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:JM(e)}:this.encoder({body:e,headers:o})}}Wu.DEFAULT_TIMEOUT=6e4;class Vt extends Wu{constructor(){super(...arguments),this.interactions=new wS(this)}}NS=Vt;Vt.GeminiNextGenAPIClient=NS;Vt.GeminiNextGenAPIClientError=Jn;Vt.APIError=ln;Vt.APIConnectionError=Zu;Vt.APIConnectionTimeoutError=dS;Vt.APIUserAbortError=Xd;Vt.NotFoundError=gS;Vt.ConflictError=yS;Vt.RateLimitError=_S;Vt.BadRequestError=hS;Vt.AuthenticationError=pS;Vt.InternalServerError=SS;Vt.PermissionDeniedError=mS;Vt.UnprocessableEntityError=vS;Vt.toFile=jM;Vt.Interactions=wS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fN(t,e){const i={},o=f(t,["name"]);return o!=null&&h(i,["_url","name"],o),i}function dN(t,e){const i={},o=f(t,["name"]);return o!=null&&h(i,["_url","name"],o),i}function hN(t,e){const i={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(i,["sdkHttpResponse"],o),i}function pN(t,e){const i={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(i,["sdkHttpResponse"],o),i}function mN(t,e,i){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&h(e,["displayName"],s),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(t,["learningRateMultiplier"]);if(c!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(t,["learningRate"]);if(e!==void 0&&p!=null&&h(e,["tuningTask","hyperparameters","learningRate"],p),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function gN(t,e,i){const o={};let s=f(i,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const b=f(t,["validationDataset"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec"],o_(b))}else if(s==="PREFERENCE_TUNING"){const b=f(t,["validationDataset"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec"],o_(b))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=f(t,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let d=f(i,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=f(t,["epochCount"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(d==="PREFERENCE_TUNING"){const b=f(t,["epochCount"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=f(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=f(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=f(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=f(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=f(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=f(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let y=f(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const b=f(t,["adapterSize"]);e!==void 0&&b!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(y==="PREFERENCE_TUNING"){const b=f(t,["adapterSize"]);e!==void 0&&b!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(t,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const S=f(t,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function yN(t,e){const i={},o=f(t,["baseModel"]);o!=null&&h(i,["baseModel"],o);const s=f(t,["preTunedModel"]);s!=null&&h(i,["preTunedModel"],s);const l=f(t,["trainingDataset"]);l!=null&&wN(l);const c=f(t,["config"]);return c!=null&&mN(c,i),i}function vN(t,e){const i={},o=f(t,["baseModel"]);o!=null&&h(i,["baseModel"],o);const s=f(t,["preTunedModel"]);s!=null&&h(i,["preTunedModel"],s);const l=f(t,["trainingDataset"]);l!=null&&MN(l,i,e);const c=f(t,["config"]);return c!=null&&gN(c,i,e),i}function _N(t,e){const i={},o=f(t,["name"]);return o!=null&&h(i,["_url","name"],o),i}function SN(t,e){const i={},o=f(t,["name"]);return o!=null&&h(i,["_url","name"],o),i}function TN(t,e,i){const o={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function xN(t,e,i){const o={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),o}function bN(t,e){const i={},o=f(t,["config"]);return o!=null&&TN(o,i),i}function CN(t,e){const i={},o=f(t,["config"]);return o!=null&&xN(o,i),i}function EN(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&h(i,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(i,["nextPageToken"],s);const l=f(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>IS(d))),h(i,["tuningJobs"],c)}return i}function AN(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&h(i,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(i,["nextPageToken"],s);const l=f(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>jd(d))),h(i,["tuningJobs"],c)}return i}function RN(t,e){const i={},o=f(t,["name"]);o!=null&&h(i,["model"],o);const s=f(t,["name"]);return s!=null&&h(i,["endpoint"],s),i}function wN(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(i,["examples","examples"],s)}return i}function MN(t,e,i){const o={};let s=f(i,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(s==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function IS(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&h(i,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(i,["name"],s);const l=f(t,["state"]);l!=null&&h(i,["state"],Y_(l));const c=f(t,["createTime"]);c!=null&&h(i,["createTime"],c);const d=f(t,["tuningTask","startTime"]);d!=null&&h(i,["startTime"],d);const p=f(t,["tuningTask","completeTime"]);p!=null&&h(i,["endTime"],p);const m=f(t,["updateTime"]);m!=null&&h(i,["updateTime"],m);const y=f(t,["description"]);y!=null&&h(i,["description"],y);const _=f(t,["baseModel"]);_!=null&&h(i,["baseModel"],_);const S=f(t,["_self"]);return S!=null&&h(i,["tunedModel"],RN(S)),i}function jd(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&h(i,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(i,["name"],s);const l=f(t,["state"]);l!=null&&h(i,["state"],Y_(l));const c=f(t,["createTime"]);c!=null&&h(i,["createTime"],c);const d=f(t,["startTime"]);d!=null&&h(i,["startTime"],d);const p=f(t,["endTime"]);p!=null&&h(i,["endTime"],p);const m=f(t,["updateTime"]);m!=null&&h(i,["updateTime"],m);const y=f(t,["error"]);y!=null&&h(i,["error"],y);const _=f(t,["description"]);_!=null&&h(i,["description"],_);const S=f(t,["baseModel"]);S!=null&&h(i,["baseModel"],S);const b=f(t,["tunedModel"]);b!=null&&h(i,["tunedModel"],b);const A=f(t,["preTunedModel"]);A!=null&&h(i,["preTunedModel"],A);const E=f(t,["supervisedTuningSpec"]);E!=null&&h(i,["supervisedTuningSpec"],E);const R=f(t,["preferenceOptimizationSpec"]);R!=null&&h(i,["preferenceOptimizationSpec"],R);const M=f(t,["tuningDataStats"]);M!=null&&h(i,["tuningDataStats"],M);const k=f(t,["encryptionSpec"]);k!=null&&h(i,["encryptionSpec"],k);const w=f(t,["partnerModelTuningSpec"]);w!=null&&h(i,["partnerModelTuningSpec"],w);const O=f(t,["customBaseModel"]);O!=null&&h(i,["customBaseModel"],O);const G=f(t,["experiment"]);G!=null&&h(i,["experiment"],G);const $=f(t,["labels"]);$!=null&&h(i,["labels"],$);const V=f(t,["outputUri"]);V!=null&&h(i,["outputUri"],V);const re=f(t,["pipelineJob"]);re!=null&&h(i,["pipelineJob"],re);const Y=f(t,["serviceAccount"]);Y!=null&&h(i,["serviceAccount"],Y);const me=f(t,["tunedModelDisplayName"]);me!=null&&h(i,["tunedModelDisplayName"],me);const ge=f(t,["veoTuningSpec"]);return ge!=null&&h(i,["veoTuningSpec"],ge),i}function NN(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&h(i,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(i,["name"],s);const l=f(t,["metadata"]);l!=null&&h(i,["metadata"],l);const c=f(t,["done"]);c!=null&&h(i,["done"],c);const d=f(t,["error"]);return d!=null&&h(i,["error"],d),i}function o_(t,e){const i={},o=f(t,["gcsUri"]);o!=null&&h(i,["validationDatasetUri"],o);const s=f(t,["vertexDatasetResource"]);return s!=null&&h(i,["validationDatasetUri"],s),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IN extends zi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Xo(Pi.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const s={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},i);return await this.tuneInternal(s)}else{const s=Object.assign({},i),l=await this.tuneMldevInternal(s);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Gd.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=SN(e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>jd(y))}else{const m=_N(e);return d=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>IS(y))}}async listInternal(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=CN(e);return d=pe("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=AN(y),S=new Nv;return Object.assign(S,_),S})}else{const m=bN(e);return d=pe("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=EN(y),S=new Nv;return Object.assign(S,_),S})}}async cancel(e){var i,o,s,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const m=dN(e);return d=pe("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=pN(y),S=new Iv;return Object.assign(S,_),S})}else{const m=fN(e);return d=pe("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:y.headers},S})),c.then(y=>{const _=hN(y),S=new Iv;return Object.assign(S,_),S})}}async tuneInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const d=vN(e,e);return l=pe("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>jd(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yN(e);return l=pe("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:p.headers},y})),s.then(p=>NN(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kN=1024*1024*8,UN=3,PN=1e3,LN=2,Uu="x-goog-upload-status";async function zN(t,e,i){var o;const s=await DS(t,e,i),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function ON(t,e,i){var o;const s=await DS(t,e,i),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=V_(l),d=new Yh;return Object.assign(d,c),d}async function DS(t,e,i){var o,s;let l=0,c=0,d=new Vd(new Response),p="upload";for(l=t.size;c<l;){const m=Math.min(kN,l-c),y=t.slice(c,c+m);c+m>=l&&(p+=", finalize");let _=0,S=PN;for(;_<UN&&(d=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[Uu]));)_++,await GN(S),S=S*LN;if(c+=m,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[Uu])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function BN(t){return{size:t.size,type:t.type}}function GN(t){return new Promise(e=>setTimeout(e,t))}class VN{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zN(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ON(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HN{create(e,i,o){return new qN(e,i,o)}}class qN{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r_="x-goog-api-key";class FN{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(r_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(r_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JN="gl-node/";class KN{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new Vt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=BC(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new FN(this.apiKey);this.apiClient=new Bw({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:JN+"web",uploader:new VN,downloader:new DN}),this.models=new oM(this.apiClient),this.live=new jw(this.apiClient,s,new HN),this.batches=new pA(this.apiClient),this.chats=new XA(this.models,this.apiClient),this.caches=new KA(this.apiClient),this.files=new rR(this.apiClient),this.operations=new rM(this.apiClient),this.authTokens=new TM(this.apiClient),this.tunings=new IN(this.apiClient),this.fileSearchStores=new MM(this.apiClient)}}const ft=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Mt=Object.keys,Wt=Array.isArray;function un(t,e){return typeof e!="object"||Mt(e).forEach((function(i){t[i]=e[i]})),t}typeof Promise>"u"||ft.Promise||(ft.Promise=Promise);const _a=Object.getPrototypeOf,YN={}.hasOwnProperty;function In(t,e){return YN.call(t,e)}function es(t,e){typeof e=="function"&&(e=e(_a(t))),(typeof Reflect>"u"?Mt:Reflect.ownKeys)(e).forEach((i=>{ki(t,i,e[i])}))}const kS=Object.defineProperty;function ki(t,e,i,o){kS(t,e,un(i&&In(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function Qr(t){return{from:function(e){return t.prototype=Object.create(e.prototype),ki(t.prototype,"constructor",t),{extend:es.bind(null,t.prototype)}}}}const $N=Object.getOwnPropertyDescriptor;function tp(t,e){let i;return $N(t,e)||(i=_a(t))&&tp(i,e)}const XN=[].slice;function Pu(t,e,i){return XN.call(t,e,i)}function US(t,e){return e(t)}function aa(t){if(!t)throw new Error("Assertion Failed")}function PS(t){ft.setImmediate?setImmediate(t):setTimeout(t,0)}function LS(t,e){return t.reduce(((i,o,s)=>{var l=e(o,s);return l&&(i[l[0]]=l[1]),i}),{})}function Ui(t,e){if(typeof e=="string"&&In(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var i=[],o=0,s=e.length;o<s;++o){var l=Ui(t,e[o]);i.push(l)}return i}var c=e.indexOf(".");if(c!==-1){var d=t[e.substr(0,c)];return d==null?void 0:Ui(d,e.substr(c+1))}}function jn(t,e,i){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){aa(typeof i!="string"&&"length"in i);for(var o=0,s=e.length;o<s;++o)jn(t,e[o],i[o])}else{var l=e.indexOf(".");if(l!==-1){var c=e.substr(0,l),d=e.substr(l+1);if(d==="")i===void 0?Wt(t)&&!isNaN(parseInt(c))?t.splice(c,1):delete t[c]:t[c]=i;else{var p=t[c];p&&In(t,c)||(p=t[c]={}),jn(p,d,i)}}else i===void 0?Wt(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=i}}function zS(t){var e={};for(var i in t)In(t,i)&&(e[i]=t[i]);return e}const QN=[].concat;function OS(t){return QN.apply([],t)}const BS="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(OS([8,16,32,64].map((t=>["Int","Uint","Float"].map((e=>e+t+"Array")))))).filter((t=>ft[t])),ZN=BS.map((t=>ft[t]));LS(BS,(t=>[t,!0]));let ho=null;function Da(t){ho=typeof WeakMap<"u"&&new WeakMap;const e=Wd(t);return ho=null,e}function Wd(t){if(!t||typeof t!="object")return t;let e=ho&&ho.get(t);if(e)return e;if(Wt(t)){e=[],ho&&ho.set(t,e);for(var i=0,o=t.length;i<o;++i)e.push(Wd(t[i]))}else if(ZN.indexOf(t.constructor)>=0)e=t;else{const l=_a(t);for(var s in e=l===Object.prototype?{}:Object.create(l),ho&&ho.set(t,e),t)In(t,s)&&(e[s]=Wd(t[s]))}return e}const{toString:jN}={};function eh(t){return jN.call(t).slice(8,-1)}const th=typeof Symbol<"u"?Symbol.iterator:"@@iterator",WN=typeof th=="symbol"?function(t){var e;return t!=null&&(e=t[th])&&e.apply(t)}:function(){return null},qr={};function Ii(t){var e,i,o,s;if(arguments.length===1){if(Wt(t))return t.slice();if(this===qr&&typeof t=="string")return[t];if(s=WN(t)){for(i=[];!(o=s.next()).done;)i.push(o.value);return i}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(i=new Array(e);e--;)i[e]=t[e];return i}return[t]}for(e=arguments.length,i=new Array(e);e--;)i[e]=arguments[e];return i}const np=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var ci=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function GS(t,e){ci=t,VS=e}var VS=()=>!0;const eI=!new Error("").stack;function Qo(){if(eI)try{throw Qo.arguments,new Error}catch(t){return t}return new Error}function nh(t,e){var i=t.stack;return i?(e=e||0,i.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),i.split(`
`).slice(e).filter(VS).map((o=>`
`+o)).join("")):""}var HS=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ip=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(HS),tI={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Zr(t,e){this._e=Qo(),this.name=t,this.message=e}function qS(t,e){return t+". Errors: "+Object.keys(e).map((i=>e[i].toString())).filter(((i,o,s)=>s.indexOf(i)===o)).join(`
`)}function Lu(t,e,i,o){this._e=Qo(),this.failures=e,this.failedKeys=o,this.successCount=i,this.message=qS(t,e)}function fa(t,e){this._e=Qo(),this.name="BulkError",this.failures=Object.keys(e).map((i=>e[i])),this.failuresByPos=e,this.message=qS(t,e)}Qr(Zr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+nh(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Qr(Lu).from(Zr),Qr(fa).from(Zr);var op=ip.reduce(((t,e)=>(t[e]=e+"Error",t)),{});const nI=Zr;var Re=ip.reduce(((t,e)=>{var i=e+"Error";function o(s,l){this._e=Qo(),this.name=i,s?typeof s=="string"?(this.message=`${s}${l?`
 `+l:""}`,this.inner=l||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=tI[e]||i,this.inner=null)}return Qr(o).from(nI),t[e]=o,t}),{});Re.Syntax=SyntaxError,Re.Type=TypeError,Re.Range=RangeError;var s_=HS.reduce(((t,e)=>(t[e+"Error"]=Re[e],t)),{}),mu=ip.reduce(((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=Re[e]),t)),{});function tt(){}function Sa(t){return t}function iI(t,e){return t==null||t===Sa?e:function(i){return e(t(i))}}function Ko(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function oI(t,e){return t===tt?e:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Ko(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Ko(s,this.onerror):s),l!==void 0?l:i}}function rI(t,e){return t===tt?e:function(){t.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Ko(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Ko(o,this.onerror):o)}}function sI(t,e){return t===tt?e:function(i){var o=t.apply(this,arguments);un(i,o);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var c=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Ko(s,this.onsuccess):s),l&&(this.onerror=this.onerror?Ko(l,this.onerror):l),o===void 0?c===void 0?void 0:c:un(o,c)}}function aI(t,e){return t===tt?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function rp(t,e){return t===tt?e:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return i.then((function(){return e.apply(o,l)}))}return e.apply(this,arguments)}}mu.ModifyError=Lu,mu.DexieError=Zr,mu.BulkError=fa;var Ta={};const FS=100,[ih,zu,oh]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,_a(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,_a(e),t]})(),JS=zu&&zu.then,gu=ih&&ih.constructor,sp=!!oh;var rh=!1,lI=oh?()=>{oh.then(ou)}:ft.setImmediate?setImmediate.bind(null,ou):ft.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver((()=>{ou(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(ou,0)},da=function(t,e){la.push([t,e]),Ou&&(lI(),Ou=!1)},sh=!0,Ou=!0,Ho=[],yu=[],ah=null,lh=Sa,jr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:u_,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((t=>{try{u_(t[0],t[1])}catch{}}))}},be=jr,la=[],qo=0,vu=[];function ye(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=tt,this._lib=!1;var e=this._PSD=be;if(ci&&(this._stackHolder=Qo(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ta)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ch(this,this._value))}this._state=null,this._value=null,++e.ref,YS(this,t)}const uh={get:function(){var t=be,e=Bu;function i(o,s){var l=!t.global&&(t!==be||e!==Bu);const c=l&&!Li();var d=new ye(((p,m)=>{ap(this,new KS(Gu(o,t,l,c),Gu(s,t,l,c),p,m,t))}));return ci&&QS(d,this),d}return i.prototype=Ta,i},set:function(t){ki(this,"then",t&&t.prototype===Ta?uh:{get:function(){return t},set:uh.set})}};function KS(t,e,i,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=i,this.reject=o,this.psd=s}function YS(t,e){try{e((i=>{if(t._state===null){if(i===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&ka();i&&typeof i.then=="function"?YS(t,((s,l)=>{i instanceof ye?i._then(s,l):i.then(s,l)})):(t._state=!0,t._value=i,$S(t)),o&&Ua()}}),ch.bind(null,t))}catch(i){ch(t,i)}}function ch(t,e){if(yu.push(e),t._state===null){var i=t._lib&&ka();e=lh(e),t._state=!1,t._value=e,ci&&e!==null&&typeof e=="object"&&!e._promise&&(function(o,s,l){try{o.apply(null,l)}catch{}})((()=>{var o=tp(e,"stack");e._promise=t,ki(e,"stack",{get:()=>rh?o&&(o.get?o.get.apply(e):o.value):t.stack})})),(function(o){Ho.some((s=>s._value===o._value))||Ho.push(o)})(t),$S(t),i&&Ua()}}function $S(t){var e=t._listeners;t._listeners=[];for(var i=0,o=e.length;i<o;++i)ap(t,e[i]);var s=t._PSD;--s.ref||s.finalize(),qo===0&&(++qo,da((()=>{--qo==0&&lp()}),[]))}function ap(t,e){if(t._state!==null){var i=t._state?e.onFulfilled:e.onRejected;if(i===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++qo,da(uI,[i,t,e])}else t._listeners.push(e)}function uI(t,e,i){try{ah=e;var o,s=e._value;e._state?o=t(s):(yu.length&&(yu=[]),o=t(s),yu.indexOf(s)===-1&&(function(l){for(var c=Ho.length;c;)if(Ho[--c]._value===l._value)return void Ho.splice(c,1)})(e)),i.resolve(o)}catch(l){i.reject(l)}finally{ah=null,--qo==0&&lp(),--i.psd.ref||i.psd.finalize()}}function XS(t,e,i){if(e.length===i)return e;var o="";if(t._state===!1){var s,l,c=t._value;c!=null?(s=c.name||"Error",l=c.message||c,o=nh(c,0)):(s=c,l=""),e.push(s+(l?": "+l:"")+o)}return ci&&((o=nh(t._stackHolder,2))&&e.indexOf(o)===-1&&e.push(o),t._prev&&XS(t._prev,e,i)),e}function QS(t,e){var i=e?e._numPrev+1:0;i<100&&(t._prev=e,t._numPrev=i)}function ou(){ka()&&Ua()}function ka(){var t=sh;return sh=!1,Ou=!1,t}function Ua(){var t,e,i;do for(;la.length>0;)for(t=la,la=[],i=t.length,e=0;e<i;++e){var o=t[e];o[0].apply(null,o[1])}while(la.length>0);sh=!0,Ou=!0}function lp(){var t=Ho;Ho=[],t.forEach((o=>{o._PSD.onunhandled.call(null,o._value,o)}));for(var e=vu.slice(0),i=e.length;i;)e[--i]()}function ru(t){return new ye(Ta,!1,t)}function pt(t,e){var i=be;return function(){var o=ka(),s=be;try{return go(i,!0),t.apply(this,arguments)}catch(l){e&&e(l)}finally{go(s,!1),o&&Ua()}}}es(ye.prototype,{then:uh,_then:function(t,e){ap(this,new KS(null,null,t,e,be))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],i=arguments[1];return typeof e=="function"?this.then(null,(o=>o instanceof e?i(o):ru(o))):this.then(null,(o=>o&&o.name===e?i(o):ru(o)))},finally:function(t){return this.then((e=>(t(),e)),(e=>(t(),ru(e))))},stack:{get:function(){if(this._stack)return this._stack;try{rh=!0;var t=XS(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{rh=!1}}},timeout:function(t,e){return t<1/0?new ye(((i,o)=>{var s=setTimeout((()=>o(new Re.Timeout(e))),t);this.then(i,o).finally(clearTimeout.bind(null,s))})):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ki(ye.prototype,Symbol.toStringTag,"Dexie.Promise"),jr.env=ZS(),es(ye,{all:function(){var t=Ii.apply(null,arguments).map(su);return new ye((function(e,i){t.length===0&&e([]);var o=t.length;t.forEach(((s,l)=>ye.resolve(s).then((c=>{t[l]=c,--o||e(t)}),i)))}))},resolve:t=>{if(t instanceof ye)return t;if(t&&typeof t.then=="function")return new ye(((i,o)=>{t.then(i,o)}));var e=new ye(Ta,!0,t);return QS(e,ah),e},reject:ru,race:function(){var t=Ii.apply(null,arguments).map(su);return new ye(((e,i)=>{t.map((o=>ye.resolve(o).then(e,i)))}))},PSD:{get:()=>be,set:t=>be=t},totalEchoes:{get:()=>Bu},newPSD:mo,usePSD:ss,scheduler:{get:()=>da,set:t=>{da=t}},rejectionMapper:{get:()=>lh,set:t=>{lh=t}},follow:(t,e)=>new ye(((i,o)=>mo(((s,l)=>{var c=be;c.unhandleds=[],c.onunhandled=l,c.finalize=Ko((function(){(function(d){function p(){d(),vu.splice(vu.indexOf(p),1)}vu.push(p),++qo,da((()=>{--qo==0&&lp()}),[])})((()=>{this.unhandleds.length===0?s():l(this.unhandleds[0])}))}),c.finalize),t()}),e,i,o)))}),gu&&(gu.allSettled&&ki(ye,"allSettled",(function(){const t=Ii.apply(null,arguments).map(su);return new ye((e=>{t.length===0&&e([]);let i=t.length;const o=new Array(i);t.forEach(((s,l)=>ye.resolve(s).then((c=>o[l]={status:"fulfilled",value:c}),(c=>o[l]={status:"rejected",reason:c})).then((()=>--i||e(o)))))}))})),gu.any&&typeof AggregateError<"u"&&ki(ye,"any",(function(){const t=Ii.apply(null,arguments).map(su);return new ye(((e,i)=>{t.length===0&&i(new AggregateError([]));let o=t.length;const s=new Array(o);t.forEach(((l,c)=>ye.resolve(l).then((d=>e(d)),(d=>{s[c]=d,--o||i(new AggregateError(s))}))))}))})));const Zt={awaits:0,echoes:0,id:0};var cI=0,_u=[],Ed=0,Bu=0,fI=0;function mo(t,e,i,o){var s=be,l=Object.create(s);l.parent=s,l.ref=0,l.global=!1,l.id=++fI;var c=jr.env;l.env=sp?{Promise:ye,PromiseProp:{value:ye,configurable:!0,writable:!0},all:ye.all,race:ye.race,allSettled:ye.allSettled,any:ye.any,resolve:ye.resolve,reject:ye.reject,nthen:a_(c.nthen,l),gthen:a_(c.gthen,l)}:{},e&&un(l,e),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=ss(l,t,i,o);return l.ref===0&&l.finalize(),d}function rs(){return Zt.id||(Zt.id=++cI),++Zt.awaits,Zt.echoes+=FS,Zt.id}function Li(){return!!Zt.awaits&&(--Zt.awaits==0&&(Zt.id=0),Zt.echoes=Zt.awaits*FS,!0)}function su(t){return Zt.echoes&&t&&t.constructor===gu?(rs(),t.then((e=>(Li(),e)),(e=>(Li(),Lt(e))))):t}function dI(t){++Bu,Zt.echoes&&--Zt.echoes!=0||(Zt.echoes=Zt.id=0),_u.push(be),go(t,!0)}function hI(){var t=_u[_u.length-1];_u.pop(),go(t,!1)}function go(t,e){var i=be;if((e?!Zt.echoes||Ed++&&t===be:!Ed||--Ed&&t===be)||jS(e?dI.bind(null,t):hI),t!==be&&(be=t,i===jr&&(jr.env=ZS()),sp)){var o=jr.env.Promise,s=t.env;zu.then=s.nthen,o.prototype.then=s.gthen,(i.global||t.global)&&(Object.defineProperty(ft,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function ZS(){var t=ft.Promise;return sp?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(ft,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:zu.then,gthen:t.prototype.then}:{}}function ss(t,e,i,o,s){var l=be;try{return go(t,!0),e(i,o,s)}finally{go(l,!1)}}function jS(t){JS.call(ih,t)}function Gu(t,e,i,o){return typeof t!="function"?t:function(){var s=be;i&&rs(),go(e,!0);try{return t.apply(this,arguments)}finally{go(s,!1),o&&jS(Li)}}}function a_(t,e){return function(i,o){return t.call(this,Gu(i,e),Gu(o,e))}}(""+JS).indexOf("[native code]")===-1&&(rs=Li=tt);const l_="unhandledrejection";function u_(t,e){var i;try{i=e.onuncatched(t)}catch{}if(i!==!1)try{var o,s={promise:e,reason:t};if(ft.document&&document.createEvent?((o=document.createEvent("Event")).initEvent(l_,!0,!0),un(o,s)):ft.CustomEvent&&un(o=new CustomEvent(l_,{detail:s}),s),o&&ft.dispatchEvent&&(dispatchEvent(o),!ft.PromiseRejectionEvent&&ft.onunhandledrejection))try{ft.onunhandledrejection(o)}catch{}ci&&o&&!o.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Lt=ye.reject;function fh(t,e,i,o){if(t.idbdb&&(t._state.openComplete||be.letThrough||t._vip)){var s=t._createTransaction(e,i,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(l){return l.name===op.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>fh(t,e,i,o)))):Lt(l)}return s._promise(e,((l,c)=>mo((()=>(be.trans=s,o(l,c,s)))))).then((l=>s._completion.then((()=>l))))}if(t._state.openComplete)return Lt(new Re.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Lt(new Re.DatabaseClosed);t.open().catch(tt)}return t._state.dbReadyPromise.then((()=>fh(t,e,i,o)))}const c_="3.2.7",Vo="",dh=-1/0,Mi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",WS="String expected.",ha=[],ec=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),pI=ec,mI=ec,eT=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),tc="__dbnames",Ad="readonly",Rd="readwrite";function Yo(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const tT={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function au(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Da(e))[t],e)}class gI{_trans(e,i,o){const s=this._tx||be.trans,l=this.name;function c(p,m,y){if(!y.schema[l])throw new Re.NotFound("Table "+l+" not part of transaction");return i(y.idbtrans,y)}const d=ka();try{return s&&s.db===this.db?s===be.trans?s._promise(e,c,o):mo((()=>s._promise(e,c,o)),{trans:s,transless:be.transless||be}):fh(this.db,e,[this.name],c)}finally{d&&Ua()}}get(e,i){return e&&e.constructor===Object?this.where(e).first(i):this._trans("readonly",(o=>this.core.get({trans:o,key:e}).then((s=>this.hook.reading.fire(s))))).then(i)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Wt(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const i=Mt(e);if(i.length===1)return this.where(i[0]).equals(e[i[0]]);const o=this.schema.indexes.concat(this.schema.primKey).filter((m=>{if(m.compound&&i.every((y=>m.keyPath.indexOf(y)>=0))){for(let y=0;y<i.length;++y)if(i.indexOf(m.keyPath[y])===-1)return!1;return!0}return!1})).sort(((m,y)=>m.keyPath.length-y.keyPath.length))[0];if(o&&this.db._maxKey!==Vo){const m=o.keyPath.slice(0,i.length);return this.where(m).equals(m.map((y=>e[y])))}!o&&ci&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${i.join("+")}]`);const{idxByName:s}=this.schema,l=this.db._deps.indexedDB;function c(m,y){try{return l.cmp(m,y)===0}catch{return!1}}const[d,p]=i.reduce((([m,y],_)=>{const S=s[_],b=e[_];return[m||S,m||!S?Yo(y,S&&S.multi?A=>{const E=Ui(A,_);return Wt(E)&&E.some((R=>c(b,R)))}:A=>c(b,Ui(A,_))):y]}),[null,null]);return d?this.where(d.name).equals(e[d.keyPath]).filter(p):o?this.filter(p):this.where(i).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Wt(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const i=o=>{if(!o)return o;const s=Object.create(e.prototype);for(var l in o)if(In(o,l))try{s[l]=o[l]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e}defineClass(){return this.mapToClass((function(e){un(this,e)}))}add(e,i){const{auto:o,keyPath:s}=this.schema.primKey;let l=e;return s&&o&&(l=au(s)(e)),this._trans("readwrite",(c=>this.core.mutate({trans:c,type:"add",keys:i!=null?[i]:null,values:[l]}))).then((c=>c.numFailures?ye.reject(c.failures[0]):c.lastResult)).then((c=>{if(s)try{jn(e,s,c)}catch{}return c}))}update(e,i){if(typeof e!="object"||Wt(e))return this.where(":id").equals(e).modify(i);{const o=Ui(e,this.schema.primKey.keyPath);if(o===void 0)return Lt(new Re.InvalidArgument("Given object does not contain its primary key"));try{typeof i!="function"?Mt(i).forEach((s=>{jn(e,s,i[s])})):i(e,{value:e,primKey:o})}catch{}return this.where(":id").equals(o).modify(i)}}put(e,i){const{auto:o,keyPath:s}=this.schema.primKey;let l=e;return s&&o&&(l=au(s)(e)),this._trans("readwrite",(c=>this.core.mutate({trans:c,type:"put",values:[l],keys:i!=null?[i]:null}))).then((c=>c.numFailures?ye.reject(c.failures[0]):c.lastResult)).then((c=>{if(s)try{jn(e,s,c)}catch{}return c}))}delete(e){return this._trans("readwrite",(i=>this.core.mutate({trans:i,type:"delete",keys:[e]}))).then((i=>i.numFailures?ye.reject(i.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:tT}))).then((e=>e.numFailures?ye.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(i=>this.core.getMany({keys:e,trans:i}).then((o=>o.map((s=>this.hook.reading.fire(s)))))))}bulkAdd(e,i,o){const s=Array.isArray(i)?i:void 0,l=(o=o||(s?void 0:i))?o.allKeys:void 0;return this._trans("readwrite",(c=>{const{auto:d,keyPath:p}=this.schema.primKey;if(p&&s)throw new Re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");const m=e.length;let y=p&&d?e.map(au(p)):e;return this.core.mutate({trans:c,type:"add",keys:s,values:y,wantResults:l}).then((({numFailures:_,results:S,lastResult:b,failures:A})=>{if(_===0)return l?S:b;throw new fa(`${this.name}.bulkAdd(): ${_} of ${m} operations failed`,A)}))}))}bulkPut(e,i,o){const s=Array.isArray(i)?i:void 0,l=(o=o||(s?void 0:i))?o.allKeys:void 0;return this._trans("readwrite",(c=>{const{auto:d,keyPath:p}=this.schema.primKey;if(p&&s)throw new Re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");const m=e.length;let y=p&&d?e.map(au(p)):e;return this.core.mutate({trans:c,type:"put",keys:s,values:y,wantResults:l}).then((({numFailures:_,results:S,lastResult:b,failures:A})=>{if(_===0)return l?S:b;throw new fa(`${this.name}.bulkPut(): ${_} of ${m} operations failed`,A)}))}))}bulkDelete(e){const i=e.length;return this._trans("readwrite",(o=>this.core.mutate({trans:o,type:"delete",keys:e}))).then((({numFailures:o,lastResult:s,failures:l})=>{if(o===0)return s;throw new fa(`${this.name}.bulkDelete(): ${o} of ${i} operations failed`,l)}))}}function pa(t){var e={},i=function(c,d){if(d){for(var p=arguments.length,m=new Array(p-1);--p;)m[p-1]=arguments[p];return e[c].subscribe.apply(null,m),t}if(typeof c=="string")return e[c]};i.addEventType=l;for(var o=1,s=arguments.length;o<s;++o)l(arguments[o]);return i;function l(c,d,p){if(typeof c!="object"){var m;d||(d=aI),p||(p=tt);var y={subscribers:[],fire:p,subscribe:function(_){y.subscribers.indexOf(_)===-1&&(y.subscribers.push(_),y.fire=d(y.fire,_))},unsubscribe:function(_){y.subscribers=y.subscribers.filter((function(S){return S!==_})),y.fire=y.subscribers.reduce(d,p)}};return e[c]=i[c]=y,y}Mt(m=c).forEach((function(_){var S=m[_];if(Wt(S))l(_,m[_][0],m[_][1]);else{if(S!=="asap")throw new Re.InvalidArgument("Invalid event config");var b=l(_,Sa,(function(){for(var A=arguments.length,E=new Array(A);A--;)E[A]=arguments[A];b.subscribers.forEach((function(R){PS((function(){R.apply(null,E)}))}))}))}}))}}function oa(t,e){return Qr(e).from({prototype:t}),e}function Or(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function wd(t,e){t.filter=Yo(t.filter,e)}function Md(t,e,i){var o=t.replayFilter;t.replayFilter=o?()=>Yo(o(),e()):e,t.justLimit=i&&!o}function Su(t,e){if(t.isPrimKey)return e.primaryKey;const i=e.getIndexByKeyPath(t.index);if(!i)throw new Re.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return i}function f_(t,e,i){const o=Su(t,e.schema);return e.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function lu(t,e,i,o){const s=t.replayFilter?Yo(t.filter,t.replayFilter()):t.filter;if(t.or){const l={},c=(d,p,m)=>{if(!s||s(p,m,(S=>p.stop(S)),(S=>p.fail(S)))){var y=p.primaryKey,_=""+y;_==="[object ArrayBuffer]"&&(_=""+new Uint8Array(y)),In(l,_)||(l[_]=!0,e(d,p,m))}};return Promise.all([t.or._iterate(c,i),d_(f_(t,o,i),t.algorithm,c,!t.keysOnly&&t.valueMapper)])}return d_(f_(t,o,i),Yo(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function d_(t,e,i,o){var s=pt(o?(l,c,d)=>i(o(l),c,d):i);return t.then((l=>{if(l)return l.start((()=>{var c=()=>l.continue();e&&!e(l,(d=>c=d),(d=>{l.stop(d),c=tt}),(d=>{l.fail(d),c=tt}))||s(l.value,l,(d=>c=d)),c()}))}))}function an(t,e){try{const i=h_(t),o=h_(e);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return(function(s,l){const c=s.length,d=l.length,p=c<d?c:d;for(let m=0;m<p;++m)if(s[m]!==l[m])return s[m]<l[m]?-1:1;return c===d?0:c<d?-1:1})(p_(t),p_(e));case"Array":return(function(s,l){const c=s.length,d=l.length,p=c<d?c:d;for(let m=0;m<p;++m){const y=an(s[m],l[m]);if(y!==0)return y}return c===d?0:c<d?-1:1})(t,e)}}catch{}return NaN}function h_(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const i=eh(t);return i==="ArrayBuffer"?"binary":i}function p_(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class yI{_read(e,i){var o=this._ctx;return o.error?o.table._trans(null,Lt.bind(null,o.error)):o.table._trans("readonly",e).then(i)}_write(e){var i=this._ctx;return i.error?i.table._trans(null,Lt.bind(null,i.error)):i.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var i=this._ctx;i.algorithm=Yo(i.algorithm,e)}_iterate(e,i){return lu(this._ctx,e,i,this._ctx.table.core)}clone(e){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&un(o,e),i._ctx=o,i}raw(){return this._ctx.valueMapper=null,this}each(e){var i=this._ctx;return this._read((o=>lu(i,e,o,i.table.core)))}count(e){return this._read((i=>{const o=this._ctx,s=o.table.core;if(Or(o,!0))return s.count({trans:i,query:{index:Su(o,s.schema),range:o.range}}).then((c=>Math.min(c,o.limit)));var l=0;return lu(o,(()=>(++l,!1)),i,s).then((()=>l))})).then(e)}sortBy(e,i){const o=e.split(".").reverse(),s=o[0],l=o.length-1;function c(m,y){return y?c(m[o[y]],y-1):m[s]}var d=this._ctx.dir==="next"?1:-1;function p(m,y){var _=c(m,l),S=c(y,l);return _<S?-d:_>S?d:0}return this.toArray((function(m){return m.sort(p)})).then(i)}toArray(e){return this._read((i=>{var o=this._ctx;if(o.dir==="next"&&Or(o,!0)&&o.limit>0){const{valueMapper:s}=o,l=Su(o,o.table.core.schema);return o.table.core.query({trans:i,limit:o.limit,values:!0,query:{index:l,range:o.range}}).then((({result:c})=>s?c.map(s):c))}{const s=[];return lu(o,(l=>s.push(l)),i,o.table.core).then((()=>s))}}),e)}offset(e){var i=this._ctx;return e<=0||(i.offset+=e,Or(i)?Md(i,(()=>{var o=e;return(s,l)=>o===0||(o===1?(--o,!1):(l((()=>{s.advance(o),o=0})),!1))})):Md(i,(()=>{var o=e;return()=>--o<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Md(this._ctx,(()=>{var i=e;return function(o,s,l){return--i<=0&&s(l),i>=0}}),!0),this}until(e,i){return wd(this._ctx,(function(o,s,l){return!e(o.value)||(s(l),i)})),this}first(e){return this.limit(1).toArray((function(i){return i[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var i,o;return wd(this._ctx,(function(s){return e(s.value)})),i=this._ctx,o=e,i.isMatch=Yo(i.isMatch,o),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each((function(o,s){e(s.key,s)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each((function(o,s){e(s.primaryKey,s)}))}keys(e){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each((function(s,l){o.push(l.key)})).then((function(){return o})).then(e)}primaryKeys(e){var i=this._ctx;if(i.dir==="next"&&Or(i,!0)&&i.limit>0)return this._read((s=>{var l=Su(i,i.table.core.schema);return i.table.core.query({trans:s,values:!1,limit:i.limit,query:{index:l,range:i.range}})})).then((({result:s})=>s)).then(e);i.keysOnly=!i.isMatch;var o=[];return this.each((function(s,l){o.push(l.primaryKey)})).then((function(){return o})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(i){return i[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,i=e.index&&e.table.schema.idxByName[e.index];if(!i||!i.multi)return this;var o={};return wd(this._ctx,(function(s){var l=s.primaryKey.toString(),c=In(o,l);return o[l]=!0,!c})),this}modify(e){var i=this._ctx;return this._write((o=>{var s;if(typeof e=="function")s=e;else{var l=Mt(e),c=l.length;s=function(E){for(var R=!1,M=0;M<c;++M){var k=l[M],w=e[k];Ui(E,k)!==w&&(jn(E,k,w),R=!0)}return R}}const d=i.table.core,{outbound:p,extractKey:m}=d.schema.primaryKey,y=this.db._options.modifyChunkSize||200,_=[];let S=0;const b=[],A=(E,R)=>{const{failures:M,numFailures:k}=R;S+=E-k;for(let w of Mt(M))_.push(M[w])};return this.clone().primaryKeys().then((E=>{const R=M=>{const k=Math.min(y,E.length-M);return d.getMany({trans:o,keys:E.slice(M,M+k),cache:"immutable"}).then((w=>{const O=[],G=[],$=p?[]:null,V=[];for(let Y=0;Y<k;++Y){const me=w[Y],ge={value:Da(me),primKey:E[M+Y]};s.call(ge,ge.value,ge)!==!1&&(ge.value==null?V.push(E[M+Y]):p||an(m(me),m(ge.value))===0?(G.push(ge.value),p&&$.push(E[M+Y])):(V.push(E[M+Y]),O.push(ge.value)))}const re=Or(i)&&i.limit===1/0&&(typeof e!="function"||e===Nd)&&{index:i.index,range:i.range};return Promise.resolve(O.length>0&&d.mutate({trans:o,type:"add",values:O}).then((Y=>{for(let me in Y.failures)V.splice(parseInt(me),1);A(O.length,Y)}))).then((()=>(G.length>0||re&&typeof e=="object")&&d.mutate({trans:o,type:"put",keys:$,values:G,criteria:re,changeSpec:typeof e!="function"&&e}).then((Y=>A(G.length,Y))))).then((()=>(V.length>0||re&&e===Nd)&&d.mutate({trans:o,type:"delete",keys:V,criteria:re}).then((Y=>A(V.length,Y))))).then((()=>E.length>M+k&&R(M+y)))}))};return R(0).then((()=>{if(_.length>0)throw new Lu("Error modifying one or more objects",_,S,b);return E.length}))}))}))}delete(){var e=this._ctx,i=e.range;return Or(e)&&(e.isPrimKey&&!mI||i.type===3)?this._write((o=>{const{primaryKey:s}=e.table.core.schema,l=i;return e.table.core.count({trans:o,query:{index:s,range:l}}).then((c=>e.table.core.mutate({trans:o,type:"deleteRange",range:l}).then((({failures:d,lastResult:p,results:m,numFailures:y})=>{if(y)throw new Lu("Could not delete some values",Object.keys(d).map((_=>d[_])),c-y);return c-y}))))})):this.modify(Nd)}}const Nd=(t,e)=>e.value=null;function vI(t,e){return t<e?-1:t===e?0:1}function _I(t,e){return t>e?-1:t===e?0:1}function Nn(t,e,i){var o=t instanceof iT?new t.Collection(t):t;return o._ctx.error=i?new i(e):new TypeError(e),o}function Br(t){return new t.Collection(t,(()=>nT(""))).limit(0)}function SI(t,e,i,o,s,l){for(var c=Math.min(t.length,o.length),d=-1,p=0;p<c;++p){var m=e[p];if(m!==o[p])return s(t[p],i[p])<0?t.substr(0,p)+i[p]+i.substr(p+1):s(t[p],o[p])<0?t.substr(0,p)+o[p]+i.substr(p+1):d>=0?t.substr(0,d)+e[d]+i.substr(d+1):null;s(t[p],m)<0&&(d=p)}return c<o.length&&l==="next"?t+i.substr(t.length):c<t.length&&l==="prev"?t.substr(0,i.length):d<0?null:t.substr(0,d)+o[d]+i.substr(d+1)}function uu(t,e,i,o){var s,l,c,d,p,m,y,_=i.length;if(!i.every((E=>typeof E=="string")))return Nn(t,WS);function S(E){s=(function(M){return M==="next"?k=>k.toUpperCase():k=>k.toLowerCase()})(E),l=(function(M){return M==="next"?k=>k.toLowerCase():k=>k.toUpperCase()})(E),c=E==="next"?vI:_I;var R=i.map((function(M){return{lower:l(M),upper:s(M)}})).sort((function(M,k){return c(M.lower,k.lower)}));d=R.map((function(M){return M.upper})),p=R.map((function(M){return M.lower})),m=E,y=E==="next"?"":o}S("next");var b=new t.Collection(t,(()=>fo(d[0],p[_-1]+o)));b._ondirectionchange=function(E){S(E)};var A=0;return b._addAlgorithm((function(E,R,M){var k=E.key;if(typeof k!="string")return!1;var w=l(k);if(e(w,p,A))return!0;for(var O=null,G=A;G<_;++G){var $=SI(k,w,d[G],p[G],c,m);$===null&&O===null?A=G+1:(O===null||c(O,$)>0)&&(O=$)}return R(O!==null?function(){E.continue(O+y)}:M),!1})),b}function fo(t,e,i,o){return{type:2,lower:t,upper:e,lowerOpen:i,upperOpen:o}}function nT(t){return{type:1,lower:t,upper:t}}class iT{get Collection(){return this._ctx.table.db.Collection}between(e,i,o,s){o=o!==!1,s=s===!0;try{return this._cmp(e,i)>0||this._cmp(e,i)===0&&(o||s)&&(!o||!s)?Br(this):new this.Collection(this,(()=>fo(e,i,!o,!s)))}catch{return Nn(this,Mi)}}equals(e){return e==null?Nn(this,Mi):new this.Collection(this,(()=>nT(e)))}above(e){return e==null?Nn(this,Mi):new this.Collection(this,(()=>fo(e,void 0,!0)))}aboveOrEqual(e){return e==null?Nn(this,Mi):new this.Collection(this,(()=>fo(e,void 0,!1)))}below(e){return e==null?Nn(this,Mi):new this.Collection(this,(()=>fo(void 0,e,!1,!0)))}belowOrEqual(e){return e==null?Nn(this,Mi):new this.Collection(this,(()=>fo(void 0,e)))}startsWith(e){return typeof e!="string"?Nn(this,WS):this.between(e,e+Vo,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):uu(this,((i,o)=>i.indexOf(o[0])===0),[e],Vo)}equalsIgnoreCase(e){return uu(this,((i,o)=>i===o[0]),[e],"")}anyOfIgnoreCase(){var e=Ii.apply(qr,arguments);return e.length===0?Br(this):uu(this,((i,o)=>o.indexOf(i)!==-1),e,"")}startsWithAnyOfIgnoreCase(){var e=Ii.apply(qr,arguments);return e.length===0?Br(this):uu(this,((i,o)=>o.some((s=>i.indexOf(s)===0))),e,Vo)}anyOf(){const e=Ii.apply(qr,arguments);let i=this._cmp;try{e.sort(i)}catch{return Nn(this,Mi)}if(e.length===0)return Br(this);const o=new this.Collection(this,(()=>fo(e[0],e[e.length-1])));o._ondirectionchange=l=>{i=l==="next"?this._ascending:this._descending,e.sort(i)};let s=0;return o._addAlgorithm(((l,c,d)=>{const p=l.key;for(;i(p,e[s])>0;)if(++s,s===e.length)return c(d),!1;return i(p,e[s])===0||(c((()=>{l.continue(e[s])})),!1)})),o}notEqual(e){return this.inAnyRange([[dh,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Ii.apply(qr,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Nn(this,Mi)}const i=e.reduce(((o,s)=>o?o.concat([[o[o.length-1][1],s]]):[[dh,s]]),null);return i.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,i){const o=this._cmp,s=this._ascending,l=this._descending,c=this._min,d=this._max;if(e.length===0)return Br(this);if(!e.every((k=>k[0]!==void 0&&k[1]!==void 0&&s(k[0],k[1])<=0)))return Nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Re.InvalidArgument);const p=!i||i.includeLowers!==!1,m=i&&i.includeUppers===!0;let y,_=s;function S(k,w){return _(k[0],w[0])}try{y=e.reduce((function(k,w){let O=0,G=k.length;for(;O<G;++O){const $=k[O];if(o(w[0],$[1])<0&&o(w[1],$[0])>0){$[0]=c($[0],w[0]),$[1]=d($[1],w[1]);break}}return O===G&&k.push(w),k}),[]),y.sort(S)}catch{return Nn(this,Mi)}let b=0;const A=m?k=>s(k,y[b][1])>0:k=>s(k,y[b][1])>=0,E=p?k=>l(k,y[b][0])>0:k=>l(k,y[b][0])>=0;let R=A;const M=new this.Collection(this,(()=>fo(y[0][0],y[y.length-1][1],!p,!m)));return M._ondirectionchange=k=>{k==="next"?(R=A,_=s):(R=E,_=l),y.sort(S)},M._addAlgorithm(((k,w,O)=>{for(var G=k.key;R(G);)if(++b,b===y.length)return w(O),!1;return!!(function($){return!A($)&&!E($)})(G)||(this._cmp(G,y[b][1])===0||this._cmp(G,y[b][0])===0||w((()=>{_===s?k.continue(y[b][0]):k.continue(y[b][1])})),!1)})),M}startsWithAnyOf(){const e=Ii.apply(qr,arguments);return e.every((i=>typeof i=="string"))?e.length===0?Br(this):this.inAnyRange(e.map((i=>[i,i+Vo]))):Nn(this,"startsWithAnyOf() only works with strings")}}function si(t){return pt((function(e){return xa(e),t(e.target.error),!1}))}function xa(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const ba="storagemutated",po="x-storagemutated-1",yo=pa(null,ba);class TI{_lock(){return aa(!be.global),++this._reculock,this._reculock!==1||be.global||(be.lockOwnerFor=this),this}_unlock(){if(aa(!be.global),--this._reculock==0)for(be.global||(be.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ss(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&be.lockOwnerFor!==this}create(e){if(!this.mode)return this;const i=this.db.idbdb,o=this.db._state.dbOpenError;if(aa(!this.idbtrans),!e&&!i)switch(o&&o.name){case"DatabaseClosedError":throw new Re.DatabaseClosed(o);case"MissingAPIError":throw new Re.MissingAPI(o.message,o);default:throw new Re.OpenFailed(o)}if(!this.active)throw new Re.TransactionInactive;return aa(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):i.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=pt((s=>{xa(s),this._reject(e.error)})),e.onabort=pt((s=>{xa(s),this.active&&this._reject(new Re.Abort(e.error)),this.active=!1,this.on("abort").fire(s)})),e.oncomplete=pt((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&yo.storagemutated.fire(e.mutatedParts)})),this}_promise(e,i,o){if(e==="readwrite"&&this.mode!=="readwrite")return Lt(new Re.ReadOnly("Transaction is readonly"));if(!this.active)return Lt(new Re.TransactionInactive);if(this._locked())return new ye(((l,c)=>{this._blockedFuncs.push([()=>{this._promise(e,i,o).then(l,c)},be])}));if(o)return mo((()=>{var l=new ye(((c,d)=>{this._lock();const p=i(c,d,this);p&&p.then&&p.then(c,d)}));return l.finally((()=>this._unlock())),l._lib=!0,l}));var s=new ye(((l,c)=>{var d=i(l,c,this);d&&d.then&&d.then(l,c)}));return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var i=this._root();const o=ye.resolve(e);if(i._waitingFor)i._waitingFor=i._waitingFor.then((()=>o));else{i._waitingFor=o,i._waitingQueue=[];var s=i.idbtrans.objectStore(i.storeNames[0]);(function c(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(s.get(-1/0).onsuccess=c)})()}var l=i._waitingFor;return new ye(((c,d)=>{o.then((p=>i._waitingQueue.push(pt(c.bind(null,p)))),(p=>i._waitingQueue.push(pt(d.bind(null,p))))).finally((()=>{i._waitingFor===l&&(i._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Re.Abort))}table(e){const i=this._memoizedTables||(this._memoizedTables={});if(In(i,e))return i[e];const o=this.schema[e];if(!o)throw new Re.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,o,this);return s.core=this.db.core.table(e),i[e]=s,s}}function hh(t,e,i,o,s,l,c){return{name:t,keyPath:e,unique:i,multi:o,auto:s,compound:l,src:(i&&!c?"&":"")+(o?"*":"")+(s?"++":"")+oT(e)}}function oT(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function rT(t,e,i){return{name:t,primKey:e,indexes:i,mappedClass:null,idxByName:LS(i,(o=>[o.name,o]))}}let Ca=t=>{try{return t.only([[]]),Ca=()=>[[]],[[]]}catch{return Ca=()=>Vo,Vo}};function ph(t){return t==null?()=>{}:typeof t=="string"?(function(e){return e.split(".").length===1?o=>o[e]:o=>Ui(o,e)})(t):e=>Ui(e,t)}function m_(t){return[].slice.call(t)}let xI=0;function ma(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function bI(t,e,i){function o(p){if(p.type===3)return null;if(p.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:m,upper:y,lowerOpen:_,upperOpen:S}=p;return m===void 0?y===void 0?null:e.upperBound(y,!!S):y===void 0?e.lowerBound(m,!!_):e.bound(m,y,!!_,!!S)}const{schema:s,hasGetAll:l}=(function(p,m){const y=m_(p.objectStoreNames);return{schema:{name:p.name,tables:y.map((_=>m.objectStore(_))).map((_=>{const{keyPath:S,autoIncrement:b}=_,A=Wt(S),E=S==null,R={},M={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E,compound:A,keyPath:S,autoIncrement:b,unique:!0,extractKey:ph(S)},indexes:m_(_.indexNames).map((k=>_.index(k))).map((k=>{const{name:w,unique:O,multiEntry:G,keyPath:$}=k,V={name:w,compound:Wt($),keyPath:$,unique:O,multiEntry:G,extractKey:ph($)};return R[ma($)]=V,V})),getIndexByKeyPath:k=>R[ma(k)]};return R[":id"]=M.primaryKey,S!=null&&(R[ma(S)]=M.primaryKey),M}))},hasGetAll:y.length>0&&"getAll"in m.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}})(t,i),c=s.tables.map((p=>(function(m){const y=m.name;return{name:y,schema:m,mutate:function({trans:_,type:S,keys:b,values:A,range:E}){return new Promise(((R,M)=>{R=pt(R);const k=_.objectStore(y),w=k.keyPath==null,O=S==="put"||S==="add";if(!O&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);const{length:G}=b||A||{length:1};if(b&&A&&b.length!==A.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});let $;const V=[],re=[];let Y=0;const me=Ee=>{++Y,xa(Ee)};if(S==="deleteRange"){if(E.type===4)return R({numFailures:Y,failures:re,results:[],lastResult:void 0});E.type===3?V.push($=k.clear()):V.push($=k.delete(o(E)))}else{const[Ee,U]=O?w?[A,b]:[A,null]:[b,null];if(O)for(let ne=0;ne<G;++ne)V.push($=U&&U[ne]!==void 0?k[S](Ee[ne],U[ne]):k[S](Ee[ne])),$.onerror=me;else for(let ne=0;ne<G;++ne)V.push($=k[S](Ee[ne])),$.onerror=me}const ge=Ee=>{const U=Ee.target.result;V.forEach(((ne,j)=>ne.error!=null&&(re[j]=ne.error))),R({numFailures:Y,failures:re,results:S==="delete"?b:V.map((ne=>ne.result)),lastResult:U})};$.onerror=Ee=>{me(Ee),ge(Ee)},$.onsuccess=ge}))},getMany:({trans:_,keys:S})=>new Promise(((b,A)=>{b=pt(b);const E=_.objectStore(y),R=S.length,M=new Array(R);let k,w=0,O=0;const G=V=>{const re=V.target;M[re._pos]=re.result,++O===w&&b(M)},$=si(A);for(let V=0;V<R;++V)S[V]!=null&&(k=E.get(S[V]),k._pos=V,k.onsuccess=G,k.onerror=$,++w);w===0&&b(M)})),get:({trans:_,key:S})=>new Promise(((b,A)=>{b=pt(b);const E=_.objectStore(y).get(S);E.onsuccess=R=>b(R.target.result),E.onerror=si(A)})),query:(function(_){return S=>new Promise(((b,A)=>{b=pt(b);const{trans:E,values:R,limit:M,query:k}=S,w=M===1/0?void 0:M,{index:O,range:G}=k,$=E.objectStore(y),V=O.isPrimaryKey?$:$.index(O.name),re=o(G);if(M===0)return b({result:[]});if(_){const Y=R?V.getAll(re,w):V.getAllKeys(re,w);Y.onsuccess=me=>b({result:me.target.result}),Y.onerror=si(A)}else{let Y=0;const me=R||!("openKeyCursor"in V)?V.openCursor(re):V.openKeyCursor(re),ge=[];me.onsuccess=Ee=>{const U=me.result;return U?(ge.push(R?U.value:U.primaryKey),++Y===M?b({result:ge}):void U.continue()):b({result:ge})},me.onerror=si(A)}}))})(l),openCursor:function({trans:_,values:S,query:b,reverse:A,unique:E}){return new Promise(((R,M)=>{R=pt(R);const{index:k,range:w}=b,O=_.objectStore(y),G=k.isPrimaryKey?O:O.index(k.name),$=A?E?"prevunique":"prev":E?"nextunique":"next",V=S||!("openKeyCursor"in G)?G.openCursor(o(w),$):G.openKeyCursor(o(w),$);V.onerror=si(M),V.onsuccess=pt((re=>{const Y=V.result;if(!Y)return void R(null);Y.___id=++xI,Y.done=!1;const me=Y.continue.bind(Y);let ge=Y.continuePrimaryKey;ge&&(ge=ge.bind(Y));const Ee=Y.advance.bind(Y),U=()=>{throw new Error("Cursor not stopped")};Y.trans=_,Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=()=>{throw new Error("Cursor not started")},Y.fail=pt(M),Y.next=function(){let ne=1;return this.start((()=>ne--?this.continue():this.stop())).then((()=>this))},Y.start=ne=>{const j=new Promise(((z,oe)=>{z=pt(z),V.onerror=si(oe),Y.fail=oe,Y.stop=ue=>{Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=U,z(ue)}})),D=()=>{if(V.result)try{ne()}catch(z){Y.fail(z)}else Y.done=!0,Y.start=()=>{throw new Error("Cursor behind last entry")},Y.stop()};return V.onsuccess=pt((z=>{V.onsuccess=D,D()})),Y.continue=me,Y.continuePrimaryKey=ge,Y.advance=Ee,D(),j},R(Y)}),M)}))},count({query:_,trans:S}){const{index:b,range:A}=_;return new Promise(((E,R)=>{const M=S.objectStore(y),k=b.isPrimaryKey?M:M.index(b.name),w=o(A),O=w?k.count(w):k.count();O.onsuccess=pt((G=>E(G.target.result))),O.onerror=si(R)}))}}})(p))),d={};return c.forEach((p=>d[p.name]=p)),{stack:"dbcore",transaction:t.transaction.bind(t),table(p){if(!d[p])throw new Error(`Table '${p}' not found`);return d[p]},MIN_KEY:-1/0,MAX_KEY:Ca(e),schema:s}}function mh({_novip:t},e){const i=e.db,o=(function(s,l,{IDBKeyRange:c,indexedDB:d},p){return{dbcore:(function(y,_){return _.reduce(((S,{create:b})=>({...S,...b(S)})),y)})(bI(l,c,p),s.dbcore)}})(t._middlewares,i,t._deps,e);t.core=o.dbcore,t.tables.forEach((s=>{const l=s.name;t.core.schema.tables.some((c=>c.name===l))&&(s.core=t.core.table(l),t[l]instanceof t.Table&&(t[l].core=s.core))}))}function Vu({_novip:t},e,i,o){i.forEach((s=>{const l=o[s];e.forEach((c=>{const d=tp(c,s);(!d||"value"in d&&d.value===void 0)&&(c===t.Transaction.prototype||c instanceof t.Transaction?ki(c,s,{get(){return this.table(s)},set(p){kS(this,s,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):c[s]=new t.Table(s,l))}))}))}function gh({_novip:t},e){e.forEach((i=>{for(let o in i)i[o]instanceof t.Table&&delete i[o]}))}function CI(t,e){return t._cfg.version-e._cfg.version}function EI(t,e,i,o){const s=t._dbSchema,l=t._createTransaction("readwrite",t._storeNames,s);l.create(i),l._completion.catch(o);const c=l._reject.bind(l),d=be.transless||be;mo((()=>{be.trans=l,be.transless=d,e===0?(Mt(s).forEach((p=>{Id(i,p,s[p].primKey,s[p].indexes)})),mh(t,i),ye.follow((()=>t.on.populate.fire(l))).catch(c)):(function({_novip:p},m,y,_){const S=[],b=p._versions;let A=p._dbSchema=vh(p,p.idbdb,_),E=!1;const R=b.filter((k=>k._cfg.version>=m));function M(){return S.length?ye.resolve(S.shift()(y.idbtrans)).then(M):ye.resolve()}return R.forEach((k=>{S.push((()=>{const w=A,O=k._cfg.dbschema;_h(p,w,_),_h(p,O,_),A=p._dbSchema=O;const G=sT(w,O);G.add.forEach((V=>{Id(_,V[0],V[1].primKey,V[1].indexes)})),G.change.forEach((V=>{if(V.recreate)throw new Re.Upgrade("Not yet support for changing primary key");{const re=_.objectStore(V.name);V.add.forEach((Y=>yh(re,Y))),V.change.forEach((Y=>{re.deleteIndex(Y.name),yh(re,Y)})),V.del.forEach((Y=>re.deleteIndex(Y)))}}));const $=k._cfg.contentUpgrade;if($&&k._cfg.version>m){mh(p,_),y._memoizedTables={},E=!0;let V=zS(O);G.del.forEach((ge=>{V[ge]=w[ge]})),gh(p,[p.Transaction.prototype]),Vu(p,[p.Transaction.prototype],Mt(V),V),y.schema=V;const re=np($);let Y;re&&rs();const me=ye.follow((()=>{if(Y=$(y),Y&&re){var ge=Li.bind(null,null);Y.then(ge,ge)}}));return Y&&typeof Y.then=="function"?ye.resolve(Y):me.then((()=>Y))}})),S.push((w=>{(!E||!pI)&&(function(O,G){[].slice.call(G.db.objectStoreNames).forEach(($=>O[$]==null&&G.db.deleteObjectStore($)))})(k._cfg.dbschema,w),gh(p,[p.Transaction.prototype]),Vu(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),y.schema=p._dbSchema}))})),M().then((()=>{var k,w;w=_,Mt(k=A).forEach((O=>{w.db.objectStoreNames.contains(O)||Id(w,O,k[O].primKey,k[O].indexes)}))}))})(t,e,l,i).catch(c)}))}function sT(t,e){const i={del:[],add:[],change:[]};let o;for(o in t)e[o]||i.del.push(o);for(o in e){const s=t[o],l=e[o];if(s){const c={name:o,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto&&!ec)c.recreate=!0,i.change.push(c);else{const d=s.idxByName,p=l.idxByName;let m;for(m in d)p[m]||c.del.push(m);for(m in p){const y=d[m],_=p[m];y?y.src!==_.src&&c.change.push(_):c.add.push(_)}(c.del.length>0||c.add.length>0||c.change.length>0)&&i.change.push(c)}}else i.add.push([o,l])}return i}function Id(t,e,i,o){const s=t.db.createObjectStore(e,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach((l=>yh(s,l))),s}function yh(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function vh(t,e,i){const o={};return Pu(e.objectStoreNames,0).forEach((s=>{const l=i.objectStore(s);let c=l.keyPath;const d=hh(oT(c),c||"",!1,!1,!!l.autoIncrement,c&&typeof c!="string",!0),p=[];for(let y=0;y<l.indexNames.length;++y){const _=l.index(l.indexNames[y]);c=_.keyPath;var m=hh(_.name,c,!!_.unique,!!_.multiEntry,!1,c&&typeof c!="string",!1);p.push(m)}o[s]=rT(s,d,p)})),o}function _h({_novip:t},e,i){const o=i.db.objectStoreNames;for(let s=0;s<o.length;++s){const l=o[s],c=i.objectStore(l);t._hasGetAll="getAll"in c;for(let d=0;d<c.indexNames.length;++d){const p=c.indexNames[d],m=c.index(p).keyPath,y=typeof m=="string"?m:"["+Pu(m).join("+")+"]";if(e[l]){const _=e[l].idxByName[y];_&&(_.name=p,delete e[l].idxByName[y],e[l].idxByName[p]=_)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ft.WorkerGlobalScope&&ft instanceof ft.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class AI{_parseStoresSpec(e,i){Mt(e).forEach((o=>{if(e[o]!==null){var s=e[o].split(",").map(((c,d)=>{const p=(c=c.trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return hh(p,m||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),Wt(m),d===0)})),l=s.shift();if(l.multi)throw new Re.Schema("Primary key cannot be multi-valued");s.forEach((c=>{if(c.auto)throw new Re.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new Re.Schema("Index must have a name and cannot be an empty string")})),i[o]=rT(o,l,s)}}))}stores(e){const i=this.db;this._cfg.storesSource=this._cfg.storesSource?un(this._cfg.storesSource,e):e;const o=i._versions,s={};let l={};return o.forEach((c=>{un(s,c._cfg.storesSource),l=c._cfg.dbschema={},c._parseStoresSpec(s,l)})),i._dbSchema=l,gh(i,[i._allTables,i,i.Transaction.prototype]),Vu(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],Mt(l),l),i._storeNames=Mt(l),this}upgrade(e){return this._cfg.contentUpgrade=rp(this._cfg.contentUpgrade||tt,e),this}}function up(t,e){let i=t._dbNamesDB;return i||(i=t._dbNamesDB=new Fo(tc,{addons:[],indexedDB:t,IDBKeyRange:e}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function cp(t){return t&&typeof t.databases=="function"}function Sh(t){return mo((function(){return be.letThrough=!0,t()}))}function RI(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){var i=function(){return indexedDB.databases().finally(e)};t=setInterval(i,100),i()})).finally((function(){return clearInterval(t)})):Promise.resolve()}function wI(t){const e=t._state,{indexedDB:i}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((()=>e.dbOpenError?Lt(e.dbOpenError):t));ci&&(e.openCanceller._stackHolder=Qo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const o=e.openCanceller;function s(){if(e.openCanceller!==o)throw new Re.DatabaseClosed("db.open() was cancelled")}let l=e.dbReadyResolve,c=null,d=!1;const p=()=>new ye(((m,y)=>{if(s(),!i)throw new Re.MissingAPI;const _=t.name,S=e.autoSchema?i.open(_):i.open(_,Math.round(10*t.verno));if(!S)throw new Re.MissingAPI;S.onerror=si(y),S.onblocked=pt(t._fireOnBlocked),S.onupgradeneeded=pt((b=>{if(c=S.transaction,e.autoSchema&&!t._options.allowEmptyDB){S.onerror=xa,c.abort(),S.result.close();const E=i.deleteDatabase(_);E.onsuccess=E.onerror=pt((()=>{y(new Re.NoSuchDatabase(`Database ${_} doesnt exist`))}))}else{c.onerror=si(y);var A=b.oldVersion>Math.pow(2,62)?0:b.oldVersion;d=A<1,t._novip.idbdb=S.result,EI(t,A/10,c,y)}}),y),S.onsuccess=pt((()=>{c=null;const b=t._novip.idbdb=S.result,A=Pu(b.objectStoreNames);if(A.length>0)try{const R=b.transaction((E=A).length===1?E[0]:E,"readonly");e.autoSchema?(function({_novip:M},k,w){M.verno=k.version/10;const O=M._dbSchema=vh(0,k,w);M._storeNames=Pu(k.objectStoreNames,0),Vu(M,[M._allTables],Mt(O),O)})(t,b,R):(_h(t,t._dbSchema,R),(function(M,k){const w=sT(vh(0,M.idbdb,k),M._dbSchema);return!(w.add.length||w.change.some((O=>O.add.length||O.change.length)))})(t,R)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),mh(t,R)}catch{}var E;ha.push(t),b.onversionchange=pt((R=>{e.vcFired=!0,t.on("versionchange").fire(R)})),b.onclose=pt((R=>{t.on("close").fire(R)})),d&&(function({indexedDB:R,IDBKeyRange:M},k){!cp(R)&&k!==tc&&up(R,M).put({name:k}).catch(tt)})(t._deps,_),m()}),y)})).catch((m=>m&&m.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p()):ye.reject(m)));return ye.race([o,(typeof navigator>"u"?ye.resolve():RI()).then(p)]).then((()=>(s(),e.onReadyBeingFired=[],ye.resolve(Sh((()=>t.on.ready.fire(t.vip)))).then((function m(){if(e.onReadyBeingFired.length>0){let y=e.onReadyBeingFired.reduce(rp,tt);return e.onReadyBeingFired=[],ye.resolve(Sh((()=>y(t.vip)))).then(m)}}))))).finally((()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1})).then((()=>t)).catch((m=>{e.dbOpenError=m;try{c&&c.abort()}catch{}return o===e.openCanceller&&t._close(),Lt(m)})).finally((()=>{e.openComplete=!0,l()}))}function Th(t){var e=l=>t.next(l),i=s(e),o=s((l=>t.throw(l)));function s(l){return c=>{var d=l(c),p=d.value;return d.done?p:p&&typeof p.then=="function"?p.then(i,o):Wt(p)?Promise.all(p).then(i,o):i(p)}}return s(e)()}function MI(t,e,i){var o=arguments.length;if(o<2)throw new Re.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];return i=s.pop(),[t,OS(s),i]}function aT(t,e,i,o,s){return ye.resolve().then((()=>{const l=be.transless||be,c=t._createTransaction(e,i,t._dbSchema,o),d={trans:c,transless:l};if(o)c.idbtrans=o.idbtrans;else try{c.create(),t._state.PR1398_maxLoop=3}catch(_){return _.name===op.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then((()=>aT(t,e,i,null,s)))):Lt(_)}const p=np(s);let m;p&&rs();const y=ye.follow((()=>{if(m=s.call(c,c),m)if(p){var _=Li.bind(null,null);m.then(_,_)}else typeof m.next=="function"&&typeof m.throw=="function"&&(m=Th(m))}),d);return(m&&typeof m.then=="function"?ye.resolve(m).then((_=>c.active?_:Lt(new Re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):y.then((()=>m))).then((_=>(o&&c._resolve(),c._completion.then((()=>_))))).catch((_=>(c._reject(_),Lt(_))))}))}function cu(t,e,i){const o=Wt(t)?t.slice():[t];for(let s=0;s<i;++s)o.push(e);return o}const NI={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const i=t.table(e),{schema:o}=i,s={},l=[];function c(y,_,S){const b=ma(y),A=s[b]=s[b]||[],E=y==null?0:typeof y=="string"?1:y.length,R=_>0,M={...S,isVirtual:R,keyTail:_,keyLength:E,extractKey:ph(y),unique:!R&&S.unique};return A.push(M),M.isPrimaryKey||l.push(M),E>1&&c(E===2?y[0]:y.slice(0,E-1),_+1,S),A.sort(((k,w)=>k.keyTail-w.keyTail)),M}const d=c(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[d];for(const y of o.indexes)c(y.keyPath,0,y);function p(y){const _=y.query.index;return _.isVirtual?{...y,query:{index:_,range:(S=y.query.range,b=_.keyTail,{type:S.type===1?2:S.type,lower:cu(S.lower,S.lowerOpen?t.MAX_KEY:t.MIN_KEY,b),lowerOpen:!0,upper:cu(S.upper,S.upperOpen?t.MIN_KEY:t.MAX_KEY,b),upperOpen:!0})}}:y;var S,b}return{...i,schema:{...o,primaryKey:d,indexes:l,getIndexByKeyPath:function(y){const _=s[ma(y)];return _&&_[0]}},count:y=>i.count(p(y)),query:y=>i.query(p(y)),openCursor(y){const{keyTail:_,isVirtual:S,keyLength:b}=y.query.index;return S?i.openCursor(p(y)).then((A=>A&&(function(E){return Object.create(E,{continue:{value:function(M){M!=null?E.continue(cu(M,y.reverse?t.MAX_KEY:t.MIN_KEY,_)):y.unique?E.continue(E.key.slice(0,b).concat(y.reverse?t.MIN_KEY:t.MAX_KEY,_)):E.continue()}},continuePrimaryKey:{value(M,k){E.continuePrimaryKey(cu(M,t.MAX_KEY,_),k)}},primaryKey:{get:()=>E.primaryKey},key:{get(){const M=E.key;return b===1?M[0]:M.slice(0,b)}},value:{get:()=>E.value}})})(A))):i.openCursor(y)}}}}}};function fp(t,e,i,o){return i=i||{},o=o||"",Mt(t).forEach((s=>{if(In(e,s)){var l=t[s],c=e[s];if(typeof l=="object"&&typeof c=="object"&&l&&c){const d=eh(l);d!==eh(c)?i[o+s]=e[s]:d==="Object"?fp(l,c,i,o+s+"."):l!==c&&(i[o+s]=e[s])}else l!==c&&(i[o+s]=e[s])}else i[o+s]=void 0})),Mt(e).forEach((s=>{In(t,s)||(i[o+s]=e[s])})),i}const II={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const i=t.table(e),{primaryKey:o}=i.schema;return{...i,mutate(l){const c=be.trans,{deleting:d,creating:p,updating:m}=c.table(e).hook;switch(l.type){case"add":if(p.fire===tt)break;return c._promise("readwrite",(()=>y(l)),!0);case"put":if(p.fire===tt&&m.fire===tt)break;return c._promise("readwrite",(()=>y(l)),!0);case"delete":if(d.fire===tt)break;return c._promise("readwrite",(()=>y(l)),!0);case"deleteRange":if(d.fire===tt)break;return c._promise("readwrite",(()=>(function(S){return _(S.trans,S.range,1e4)})(l)),!0)}return i.mutate(l);function y(S){const b=be.trans,A=S.keys||(function(E,R){return R.type==="delete"?R.keys:R.keys||R.values.map(E.extractKey)})(o,S);if(!A)throw new Error("Keys missing");return(S=S.type==="add"||S.type==="put"?{...S,keys:A}:{...S}).type!=="delete"&&(S.values=[...S.values]),S.keys&&(S.keys=[...S.keys]),(function(E,R,M){return R.type==="add"?Promise.resolve([]):E.getMany({trans:R.trans,keys:M,cache:"immutable"})})(i,S,A).then((E=>{const R=A.map(((M,k)=>{const w=E[k],O={onerror:null,onsuccess:null};if(S.type==="delete")d.fire.call(O,M,w,b);else if(S.type==="add"||w===void 0){const G=p.fire.call(O,M,S.values[k],b);M==null&&G!=null&&(M=G,S.keys[k]=M,o.outbound||jn(S.values[k],o.keyPath,M))}else{const G=fp(w,S.values[k]),$=m.fire.call(O,G,M,w,b);if($){const V=S.values[k];Object.keys($).forEach((re=>{In(V,re)?V[re]=$[re]:jn(V,re,$[re])}))}}return O}));return i.mutate(S).then((({failures:M,results:k,numFailures:w,lastResult:O})=>{for(let G=0;G<A.length;++G){const $=k?k[G]:A[G],V=R[G];$==null?V.onerror&&V.onerror(M[G]):V.onsuccess&&V.onsuccess(S.type==="put"&&E[G]?S.values[G]:$)}return{failures:M,results:k,numFailures:w,lastResult:O}})).catch((M=>(R.forEach((k=>k.onerror&&k.onerror(M))),Promise.reject(M))))}))}function _(S,b,A){return i.query({trans:S,values:!1,query:{index:o,range:b},limit:A}).then((({result:E})=>y({type:"delete",keys:E,trans:S}).then((R=>R.numFailures>0?Promise.reject(R.failures[0]):E.length<A?{failures:[],numFailures:0,lastResult:void 0}:_(S,{...b,lower:E[E.length-1],lowerOpen:!0},A)))))}}}}})};function lT(t,e,i){try{if(!e||e.keys.length<t.length)return null;const o=[];for(let s=0,l=0;s<e.keys.length&&l<t.length;++s)an(e.keys[s],t[l])===0&&(o.push(i?Da(e.values[s]):e.values[s]),++l);return o.length===t.length?o:null}catch{return null}}const DI={stack:"dbcore",level:-1,create:t=>({table:e=>{const i=t.table(e);return{...i,getMany:o=>{if(!o.cache)return i.getMany(o);const s=lT(o.keys,o.trans._cache,o.cache==="clone");return s?ye.resolve(s):i.getMany(o).then((l=>(o.trans._cache={keys:o.keys,values:o.cache==="clone"?Da(l):l},l)))},mutate:o=>(o.type!=="add"&&(o.trans._cache=null),i.mutate(o))}}})};function dp(t){return!("from"in t)}const Ni=function(t,e){if(!this){const i=new Ni;return t&&"d"in t&&un(i,t),i}un(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Ea(t,e,i){const o=an(e,i);if(isNaN(o))return;if(o>0)throw RangeError();if(dp(t))return un(t,{from:e,to:i,d:1});const s=t.l,l=t.r;if(an(i,t.from)<0)return s?Ea(s,e,i):t.l={from:e,to:i,d:1,l:null,r:null},g_(t);if(an(e,t.to)>0)return l?Ea(l,e,i):t.r={from:e,to:i,d:1,l:null,r:null},g_(t);an(e,t.from)<0&&(t.from=e,t.l=null,t.d=l?l.d+1:1),an(i,t.to)>0&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1);const c=!t.r;s&&!t.l&&Hu(t,s),l&&c&&Hu(t,l)}function Hu(t,e){dp(e)||(function i(o,{from:s,to:l,l:c,r:d}){Ea(o,s,l),c&&i(o,c),d&&i(o,d)})(t,e)}function kI(t,e){const i=xh(e);let o=i.next();if(o.done)return!1;let s=o.value;const l=xh(t);let c=l.next(s.from),d=c.value;for(;!o.done&&!c.done;){if(an(d.from,s.to)<=0&&an(d.to,s.from)>=0)return!0;an(s.from,d.from)<0?s=(o=i.next(d.from)).value:d=(c=l.next(s.from)).value}return!1}function xh(t){let e=dp(t)?null:{s:0,n:t};return{next(i){const o=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,o)for(;e.n.l&&an(i,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!o||an(i,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function g_(t){var e,i;const o=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),s=o>1?"r":o<-1?"l":"";if(s){const l=s==="r"?"l":"r",c={...t},d=t[s];t.from=d.from,t.to=d.to,t[s]=d[s],c[s]=d[l],t[l]=c,c.d=y_(c)}t.d=y_(t)}function y_({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}es(Ni.prototype,{add(t){return Hu(this,t),this},addKey(t){return Ea(this,t,t),this},addKeys(t){return t.forEach((e=>Ea(this,e,e))),this},[th](){return xh(this)}});const UI={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,i=new Ni(t.MIN_KEY,t.MAX_KEY);return{...t,table:o=>{const s=t.table(o),{schema:l}=s,{primaryKey:c}=l,{extractKey:d,outbound:p}=c,m={...s,mutate:S=>{const b=S.trans,A=b.mutatedParts||(b.mutatedParts={}),E=$=>{const V=`idb://${e}/${o}/${$}`;return A[V]||(A[V]=new Ni)},R=E(""),M=E(":dels"),{type:k}=S;let[w,O]=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[[],S.values]:[];const G=S.trans._cache;return s.mutate(S).then(($=>{if(Wt(w)){k!=="delete"&&(w=$.results),R.addKeys(w);const V=lT(w,G);V||k==="add"||M.addKeys(w),(V||O)&&(function(re,Y,me,ge){function Ee(U){const ne=re(U.name||"");function j(z){return z!=null?U.extractKey(z):null}const D=z=>U.multiEntry&&Wt(z)?z.forEach((oe=>ne.addKey(oe))):ne.addKey(z);(me||ge).forEach(((z,oe)=>{const ue=me&&j(me[oe]),de=ge&&j(ge[oe]);an(ue,de)!==0&&(ue!=null&&D(ue),de!=null&&D(de))}))}Y.indexes.forEach(Ee)})(E,l,V,O)}else if(w){const V={from:w.lower,to:w.upper};M.add(V),R.add(V)}else R.add(i),M.add(i),l.indexes.forEach((V=>E(V.name).add(i)));return $}))}},y=({query:{index:S,range:b}})=>{var A,E;return[S,new Ni((A=b.lower)!==null&&A!==void 0?A:t.MIN_KEY,(E=b.upper)!==null&&E!==void 0?E:t.MAX_KEY)]},_={get:S=>[c,new Ni(S.key)],getMany:S=>[c,new Ni().addKeys(S.keys)],count:y,query:y,openCursor:y};return Mt(_).forEach((S=>{m[S]=function(b){const{subscr:A}=be;if(A){const E=O=>{const G=`idb://${e}/${o}/${O}`;return A[G]||(A[G]=new Ni)},R=E(""),M=E(":dels"),[k,w]=_[S](b);if(E(k.name||"").add(w),!k.isPrimaryKey){if(S!=="count"){const O=S==="query"&&p&&b.values&&s.query({...b,values:!1});return s[S].apply(this,arguments).then((G=>{if(S==="query"){if(p&&b.values)return O.then((({result:V})=>(R.addKeys(V),G)));const $=b.values?G.result.map(d):G.result;b.values?R.addKeys($):M.addKeys($)}else if(S==="openCursor"){const $=G,V=b.values;return $&&Object.create($,{key:{get:()=>(M.addKey($.primaryKey),$.key)},primaryKey:{get(){const re=$.primaryKey;return M.addKey(re),re}},value:{get:()=>(V&&R.addKey($.primaryKey),$.value)}})}return G}))}M.add(i)}}return s[S].apply(this,arguments)}})),m}}}};class Fo{constructor(e,i){this._middlewares={},this.verno=0;const o=Fo.dependencies;this._options=i={addons:Fo.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,...i},this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};const{addons:s}=i;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:tt,dbReadyPromise:null,cancelOpen:tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var c;l.dbReadyPromise=new ye((d=>{l.dbReadyResolve=d})),l.openCanceller=new ye(((d,p)=>{l.cancelOpen=p})),this._state=l,this.name=e,this.on=pa(this,"populate","blocked","versionchange","close",{ready:[rp,tt]}),this.on.ready.subscribe=US(this.on.ready.subscribe,(d=>(p,m)=>{Fo.vip((()=>{const y=this._state;if(y.openComplete)y.dbOpenError||ye.resolve().then(p),m&&d(p);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(p),m&&d(p);else{d(p);const _=this;m||d((function S(){_.on.ready.unsubscribe(p),_.on.ready.unsubscribe(S)}))}}))})),this.Collection=(c=this,oa(yI.prototype,(function(d,p){this.db=c;let m=tT,y=null;if(p)try{m=p()}catch(A){y=A}const _=d._ctx,S=_.table,b=S.hook.reading.fire;this._ctx={table:S,index:_.index,isPrimKey:!_.index||S.schema.primKey.keyPath&&_.index===S.schema.primKey.name,range:m,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:y,or:_.or,valueMapper:b!==Sa?b:null}}))),this.Table=(function(d){return oa(gI.prototype,(function(p,m,y){this.db=d,this._tx=y,this.name=p,this.schema=m,this.hook=d._allTables[p]?d._allTables[p].hook:pa(null,{creating:[oI,tt],reading:[iI,Sa],updating:[sI,tt],deleting:[rI,tt]})}))})(this),this.Transaction=(function(d){return oa(TI.prototype,(function(p,m,y,_,S){this.db=d,this.mode=p,this.storeNames=m,this.schema=y,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=pa(this,"complete","error","abort"),this.parent=S||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ye(((b,A)=>{this._resolve=b,this._reject=A})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(b=>{var A=this.active;return this.active=!1,this.on.error.fire(b),this.parent?this.parent._reject(b):A&&this.idbtrans&&this.idbtrans.abort(),Lt(b)}))}))})(this),this.Version=(function(d){return oa(AI.prototype,(function(p){this.db=d,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))})(this),this.WhereClause=(function(d){return oa(iT.prototype,(function(p,m,y){this.db=d,this._ctx={table:p,index:m===":id"?null:m,or:y};const _=d._deps.indexedDB;if(!_)throw new Re.MissingAPI;this._cmp=this._ascending=_.cmp.bind(_),this._descending=(S,b)=>_.cmp(b,S),this._max=(S,b)=>_.cmp(S,b)>0?S:b,this._min=(S,b)=>_.cmp(S,b)<0?S:b,this._IDBKeyRange=d._deps.IDBKeyRange}))})(this),this.on("versionchange",(d=>{d.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(d=>{!d.newVersion||d.newVersion<d.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${d.oldVersion/10}`)})),this._maxKey=Ca(i.IDBKeyRange),this._createTransaction=(d,p,m,y)=>new this.Transaction(d,p,m,this._options.chromeTransactionDurability,y),this._fireOnBlocked=d=>{this.on("blocked").fire(d),ha.filter((p=>p.name===this.name&&p!==this&&!p._state.vcFired)).map((p=>p.on("versionchange").fire(d)))},this.use(NI),this.use(II),this.use(UI),this.use(DI),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach((d=>d(this)))}version(e){if(isNaN(e)||e<.1)throw new Re.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const i=this._versions;var o=i.filter((s=>s._cfg.version===e))[0];return o||(o=new this.Version(e),i.push(o),i.sort(CI),o.stores({}),this._state.autoSchema=!1,o)}_whenReady(e){return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?e():new ye(((i,o)=>{if(this._state.openComplete)return o(new Re.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void o(new Re.DatabaseClosed);this.open().catch(tt)}this._state.dbReadyPromise.then(i,o)})).then(e)}use({stack:e,create:i,level:o,name:s}){s&&this.unuse({stack:e,name:s});const l=this._middlewares[e]||(this._middlewares[e]=[]);return l.push({stack:e,create:i,level:o??10,name:s}),l.sort(((c,d)=>c.level-d.level)),this}unuse({stack:e,name:i,create:o}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((s=>o?s.create!==o:!!i&&s.name!==i))),this}open(){return wI(this)}_close(){const e=this._state,i=ha.indexOf(this);if(i>=0&&ha.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new ye((o=>{e.dbReadyResolve=o})),e.openCanceller=new ye(((o,s)=>{e.cancelOpen=s}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Re.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,i=this._state;return new ye(((o,s)=>{const l=()=>{this.close();var c=this._deps.indexedDB.deleteDatabase(this.name);c.onsuccess=pt((()=>{(function({indexedDB:d,IDBKeyRange:p},m){!cp(d)&&m!==tc&&up(d,p).delete(m).catch(tt)})(this._deps,this.name),o()})),c.onerror=si(s),c.onblocked=this._fireOnBlocked};if(e)throw new Re.InvalidArgument("Arguments not allowed in db.delete()");i.isBeingOpened?i.dbReadyPromise.then(l):l()}))}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Mt(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=MI.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,i,o){let s=be.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const l=e.indexOf("?")!==-1;let c,d;e=e.replace("!","").replace("?","");try{if(d=i.map((m=>{var y=m instanceof this.Table?m.name:m;if(typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y})),e=="r"||e===Ad)c=Ad;else{if(e!="rw"&&e!=Rd)throw new Re.InvalidArgument("Invalid transaction mode: "+e);c=Rd}if(s){if(s.mode===Ad&&c===Rd){if(!l)throw new Re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&d.forEach((m=>{if(s&&s.storeNames.indexOf(m)===-1){if(!l)throw new Re.SubTransaction("Table "+m+" not included in parent transaction.");s=null}})),l&&s&&!s.active&&(s=null)}}catch(m){return s?s._promise(null,((y,_)=>{_(m)})):Lt(m)}const p=aT.bind(null,this,c,d,s,o);return s?s._promise(c,p,"lock"):be.trans?ss(be.transless,(()=>this._whenReady(p))):this._whenReady(p)}table(e){if(!In(this._allTables,e))throw new Re.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const PI=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class LI{constructor(e){this._subscribe=e}subscribe(e,i,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:i,complete:o})}[PI](){return this}}function uT(t,e){return Mt(e).forEach((i=>{Hu(t[i]||(t[i]=new Ni),e[i])})),t}function zI(t){let e,i=!1;const o=new LI((s=>{const l=np(t);let c=!1,d={},p={};const m={get closed(){return c},unsubscribe:()=>{c=!0,yo.storagemutated.unsubscribe(b)}};s.start&&s.start(m);let y=!1,_=!1;function S(){return Mt(p).some((E=>d[E]&&kI(d[E],p[E])))}const b=E=>{uT(d,E),S()&&A()},A=()=>{if(y||c)return;d={};const E={},R=(function(M){l&&rs();const k=()=>mo(t,{subscr:M,trans:null}),w=be.trans?ss(be.transless,k):k();return l&&w.then(Li,Li),w})(E);_||(yo(ba,b),_=!0),y=!0,Promise.resolve(R).then((M=>{i=!0,e=M,y=!1,c||(S()?A():(d={},p=E,s.next&&s.next(M)))}),(M=>{y=!1,i=!1,s.error&&s.error(M),m.unsubscribe()}))};return A(),m}));return o.hasValue=()=>i,o.getValue=()=>e,o}let bh;try{bh={indexedDB:ft.indexedDB||ft.mozIndexedDB||ft.webkitIndexedDB||ft.msIndexedDB,IDBKeyRange:ft.IDBKeyRange||ft.webkitIDBKeyRange}}catch{bh={indexedDB:null,IDBKeyRange:null}}const zo=Fo;function Tu(t){let e=Di;try{Di=!0,yo.storagemutated.fire(t)}finally{Di=e}}es(zo,{...mu,delete:t=>new zo(t,{addons:[]}).delete(),exists:t=>new zo(t,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(t){try{return(function({indexedDB:e,IDBKeyRange:i}){return cp(e)?Promise.resolve(e.databases()).then((o=>o.map((s=>s.name)).filter((s=>s!==tc)))):up(e,i).toCollection().primaryKeys()})(zo.dependencies).then(t)}catch{return Lt(new Re.MissingAPI)}},defineClass:()=>function(t){un(this,t)},ignoreTransaction:t=>be.trans?ss(be.transless,t):t(),vip:Sh,async:function(t){return function(){try{var e=Th(t.apply(this,arguments));return e&&typeof e.then=="function"?e:ye.resolve(e)}catch(i){return Lt(i)}}},spawn:function(t,e,i){try{var o=Th(t.apply(i,e||[]));return o&&typeof o.then=="function"?o:ye.resolve(o)}catch(s){return Lt(s)}},currentTransaction:{get:()=>be.trans||null},waitFor:function(t,e){const i=ye.resolve(typeof t=="function"?zo.ignoreTransaction(t):t).timeout(e||6e4);return be.trans?be.trans.waitFor(i):i},Promise:ye,debug:{get:()=>ci,set:t=>{GS(t,t==="dexie"?()=>!0:eT)}},derive:Qr,extend:un,props:es,override:US,Events:pa,on:yo,liveQuery:zI,extendObservabilitySet:uT,getByKeyPath:Ui,setByKeyPath:jn,delByKeyPath:function(t,e){typeof e=="string"?jn(t,e,void 0):"length"in e&&[].map.call(e,(function(i){jn(t,i,void 0)}))},shallowClone:zS,deepClone:Da,getObjectDiff:fp,cmp:an,asap:PS,minKey:dh,addons:[],connections:ha,errnames:op,dependencies:bh,semVer:c_,version:c_.split(".").map((t=>parseInt(t))).reduce(((t,e,i)=>t+e/Math.pow(10,2*i)))}),zo.maxKey=Ca(zo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(yo(ba,(t=>{if(!Di){let e;ec?(e=document.createEvent("CustomEvent"),e.initCustomEvent(po,!0,!0,t)):e=new CustomEvent(po,{detail:t}),Di=!0,dispatchEvent(e),Di=!1}})),addEventListener(po,(({detail:t})=>{Di||Tu(t)})));let Di=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(po);typeof t.unref=="function"&&t.unref(),yo(ba,(e=>{Di||t.postMessage(e)})),t.onmessage=e=>{e.data&&Tu(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){yo(ba,(e=>{try{Di||(typeof localStorage<"u"&&localStorage.setItem(po,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((i=>i.postMessage({type:po,changedParts:e}))))}catch{}})),typeof addEventListener<"u"&&addEventListener("storage",(e=>{if(e.key===po){const i=JSON.parse(e.newValue);i&&Tu(i.changedParts)}}));const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",(function({data:e}){e&&e.type===po&&Tu(e.changedParts)}))}ye.rejectionMapper=function(t,e){if(!t||t instanceof Zr||t instanceof TypeError||t instanceof SyntaxError||!t.name||!s_[t.name])return t;var i=new s_[t.name](e||t.message,t);return"stack"in t&&ki(i,"stack",{get:function(){return this.inner.stack}}),i},GS(ci,eT);class OI extends Fo{constructor(){super("MTGAnnouncerDB"),this.version(1).stores({cards:"id, oracle_id, name, set_code, [colors], type_line",sets:"code, name, released_at",rules:"id, rule_number, *keywords",rulings:"id, oracle_id",triggers:"++id, oracle_id, trigger_type",userTokens:"++id, name, created_at",metadata:"key",players:"++id, name",matches:"++id, winner_id, match_type"})}async saveGameSettings(e){await this.metadata.put({key:"current_game_settings",value:e})}async getGameSettings(){const e=await this.metadata.get("current_game_settings");return e?e.value:void 0}async getTriggersForPhase(e,i){return await this.triggers.where("trigger_type").equals(i).and(o=>e.includes(o.oracle_id)).toArray()}async getCardByName(e){let i=await this.cards.where("name").equals(e).first();if(i)return i;const o=e.toLowerCase();if(i=await this.cards.filter(s=>s.name.toLowerCase()===o).first(),i)return i}async registerSessionPlayers(e){const i=[];return await this.transaction("rw",this.players,async()=>{for(const o of e){const s=o.trim();let l=await this.players.filter(c=>c.name.toLowerCase()===s.toLowerCase()).first();l||(l={id:await this.players.add({name:s,created_at:new Date}),name:s,created_at:new Date}),i.push(l)}}),i}async recordMatchResult(e,i,o){const s=[e,...i],l=await this.registerSessionPlayers(s),c=l.find(p=>p.name.toLowerCase()===e.toLowerCase()),d=l.filter(p=>i.some(m=>m.toLowerCase()===p.name.toLowerCase()));c&&d.length>0&&await this.matches.add({winner_id:c.id,loser_ids:d.map(p=>p.id),match_type:o,timestamp:new Date})}async getPlayerStats(e,i){const o=await this.players.filter(y=>y.name.toLowerCase()===e.toLowerCase()).first(),s=await this.players.filter(y=>y.name.toLowerCase()===i.toLowerCase()).first();if(!o||!s)return null;const l=await this.matches.toArray();let c=0,d=0,p=0,m=0;for(const y of l)y.winner_id===o.id&&y.loser_ids.includes(s.id)&&(c++,y.match_type==="1v1"&&d++),y.winner_id===s.id&&y.loser_ids.includes(o.id)&&(p++,y.match_type==="1v1"&&m++);return{p1Name:o.name,p2Name:s.name,p1WinsTotal:c,p1Wins1v1:d,p2WinsTotal:p,p2Wins1v1:m}}}const et=new OI,BI="https://api.scryfall.com/bulk-data",cT=async t=>{try{if(!navigator.onLine){const y=await et.cards.count();t(y===0?"Offline and database empty. Features limited.":"Offline mode ready.");return}t("Checking for card updates...");const e=await fetch(BI);if(!e.ok)throw new Error("Could not reach Scryfall API");const o=(await e.json()).data.find(y=>y.type==="oracle_cards");if(!o)throw new Error("Oracle cards data source not found");const s=await et.metadata.get("oracle_cards_updated_at");if(s&&s.value===o.updated_at&&await et.cards.count()>0){t("Database up to date.");return}t("Downloading card database (this may take a minute)...");const l=await fetch(o.download_uri);if(!l.ok)throw new Error("Download failed");const c=await l.json();t(`Processing ${c.length} cards...`);const d=2e3,p=[],m=[];for(const y of c){const _={id:y.id,oracle_id:y.oracle_id,name:y.name,lang:y.lang,released_at:y.released_at,uri:y.uri,layout:y.layout,mana_cost:y.mana_cost||"",cmc:y.cmc||0,type_line:y.type_line||"",oracle_text:y.oracle_text||"",power:y.power,toughness:y.toughness,loyalty:y.loyalty,colors:y.colors||[],color_identity:y.color_identity||[],set_code:y.set,set_name:y.set_name,rarity:y.rarity,image_uris:y.image_uris,legalities:y.legalities||{}};m.push(_);const S=(y.oracle_text||"").toLowerCase();(S.includes("at the beginning of your upkeep")||S.includes("at the beginning of each player's upkeep"))&&p.push({oracle_id:y.oracle_id,trigger_type:"Upkeep",trigger_text:"Upkeep Trigger",is_mandatory:!S.includes("you may")}),(S.includes("at the beginning of your end step")||S.includes("at the beginning of the end step"))&&p.push({oracle_id:y.oracle_id,trigger_type:"EndStep",trigger_text:"End Step Trigger",is_mandatory:!S.includes("you may")}),S.includes("enters the battlefield")&&p.push({oracle_id:y.oracle_id,trigger_type:"ETB",trigger_text:"ETB Trigger",is_mandatory:!S.includes("you may")}),S.includes("when")&&S.includes("dies")&&p.push({oracle_id:y.oracle_id,trigger_type:"Death",trigger_text:"Death Trigger",is_mandatory:!S.includes("you may")})}t("Saving to offline storage..."),await et.transaction("rw",et.cards,et.triggers,et.metadata,async()=>{await et.cards.clear(),await et.triggers.clear();for(let y=0;y<m.length;y+=d)await et.cards.bulkPut(m.slice(y,y+d));for(let y=0;y<p.length;y+=d)await et.triggers.bulkPut(p.slice(y,y+d));await et.metadata.put({key:"oracle_cards_updated_at",value:o.updated_at})}),t("Database Synchronized!")}catch(e){throw console.error("Sync failed",e),t(`Sync Error: ${e.message||"Unknown error"}`),e}},v_=t=>{const e=t.toLowerCase();return e.includes("counter")&&e.includes("+")?{icon:"fa-arrow-up",color:"bg-green-600 text-white"}:e.includes("counter")&&e.includes("-")?{icon:"fa-arrow-down",color:"bg-red-600 text-white"}:e.includes("hexproof")?{icon:"fa-shield-halved",color:"bg-cyan-600 text-white"}:e.includes("indestructible")?{icon:"fa-shield",color:"bg-yellow-600 text-black"}:e.includes("flying")?{icon:"fa-feather",color:"bg-sky-500 text-white"}:e.includes("trample")?{icon:"fa-shoe-prints",color:"bg-orange-600 text-white"}:e.includes("haste")?{icon:"fa-bolt",color:"bg-red-500 text-white"}:e.includes("vigilance")?{icon:"fa-eye",color:"bg-white text-black"}:e.includes("deathtouch")?{icon:"fa-skull",color:"bg-purple-600 text-white"}:e.includes("lifelink")?{icon:"fa-heart",color:"bg-pink-600 text-white"}:e.includes("stun")?{icon:"fa-snowflake",color:"bg-blue-400 text-white"}:e.includes("summoning sick")?{icon:"fa-dizzy",color:"bg-green-800 text-white"}:e.includes("goaded")?{icon:"fa-bullhorn",color:"bg-red-700 text-white"}:{icon:"fa-circle-info",color:"bg-zinc-700 text-white"}},GI={name:"register_players",description:"Registers the names of the players for the current game session after the user has listed them.",parameters:{type:nt.OBJECT,properties:{playerNames:{type:nt.ARRAY,items:{type:nt.STRING},description:"List of player names spoken by the user."}},required:["playerNames"]}},VI={name:"set_game_format",description:"Sets the Magic: The Gathering format for the session (e.g. Commander, Standard).",parameters:{type:nt.OBJECT,properties:{format:{type:nt.STRING,description:"The format name (e.g., Commander, Standard, Modern)."}},required:["format"]}},HI={name:"set_custom_rules",description:"Records any custom rules or house rules the players are using.",parameters:{type:nt.OBJECT,properties:{rules:{type:nt.STRING,description:"The description of the custom rules."}},required:["rules"]}},qI={name:"get_player_stats",description:"Retrieves the win/loss history between two players.",parameters:{type:nt.OBJECT,properties:{player1:{type:nt.STRING},player2:{type:nt.STRING},mode:{type:nt.STRING,enum:["total","one_on_one"],description:"Whether to return total wins in all games or only 1v1 head-to-head records."}},required:["player1","player2","mode"]}},FI={name:"record_win",description:"Records the winner of the current game.",parameters:{type:nt.OBJECT,properties:{winnerName:{type:nt.STRING}},required:["winnerName"]}},JI={name:"manage_board",description:"Updates the virtual board state when cards are played, removed, or change status (tapped, counters, etc).",parameters:{type:nt.OBJECT,properties:{action:{type:nt.STRING,enum:["play","remove","update_status"]},cardName:{type:nt.STRING,description:"The name of the card to modify."},playerName:{type:nt.STRING,description:"The player who controls the card."},status:{type:nt.STRING,description:"The status/effect name (e.g. 'tapped', 'hexproof', '+1/+1 counter'). Required if action is update_status."},statusOperation:{type:nt.STRING,enum:["add","remove"],description:"Whether to add or remove the status. Defaults to add."}},required:["action","cardName","playerName"]}},KI=(t,e=[])=>{const[i,o]=le.useState({isConnected:!1,isStreaming:!1,error:null}),[s,l]=le.useState(0),[c,d]=le.useState([]),[p,m]=le.useState({}),[y,_]=le.useState(!1),[S,b]=le.useState("Commander"),[A,E]=le.useState(""),R=le.useRef(null),M=le.useRef(null),k=le.useRef(null),w=le.useRef(null),O=le.useRef(new Map),G=le.useRef(null),$=le.useRef(new Set),V=le.useRef(0),re=le.useRef(null),Y=le.useRef([]),me=le.useRef([]),ge=le.useRef(!1);le.useEffect(()=>{ge.current=y},[y]);const Ee=W=>{const fe=atob(W),se=fe.length,ae=new Uint8Array(se);for(let Ae=0;Ae<se;Ae++)ae[Ae]=fe.charCodeAt(Ae);return ae},U=W=>{let fe="";const se=W.byteLength;for(let ae=0;ae<se;ae++)fe+=String.fromCharCode(W[ae]);return btoa(fe)},ne=W=>{const fe=W.length,se=new Int16Array(fe);for(let ae=0;ae<fe;ae++)se[ae]=Math.max(-1,Math.min(1,W[ae]))*32767;return{data:U(new Uint8Array(se.buffer)),mimeType:"audio/pcm;rate=16000"}},j=async(W,fe,se,ae)=>{const Ae=new Int16Array(W.buffer),we=Ae.length/ae,Ct=fe.createBuffer(ae,we,se);for(let Xe=0;Xe<ae;Xe++){const It=Ct.getChannelData(Xe);for(let fn=0;fn<we;fn++)It[fn]=Ae[fn*ae+Xe]/32768}return Ct},D=W=>new Promise((fe,se)=>{const ae=new FileReader;ae.onloadend=()=>{const we=ae.result.split(",")[1];fe(we)},ae.onerror=se,ae.readAsDataURL(W)});le.useEffect(()=>{if(!i.isConnected||!M.current||!w.current)return;const W=M.current,fe=w.current,se=new Set(e.map(ae=>ae.peerId));e.forEach(ae=>{if(!O.current.has(ae.peerId)&&ae.stream.getAudioTracks().length>0)try{console.log(`Adding audio source for peer ${ae.peerId}`);const Ae=W.createMediaStreamSource(ae.stream);Ae.connect(fe),O.current.set(ae.peerId,Ae)}catch(Ae){console.warn(`Could not add audio for peer ${ae.peerId}`,Ae)}}),O.current.forEach((ae,Ae)=>{if(!se.has(Ae)){console.log(`Removing audio source for peer ${Ae}`);try{ae.disconnect()}catch{}O.current.delete(Ae)}})},[e,i.isConnected]);const z=async W=>{const fe=await et.registerSessionPlayers(W);me.current=fe,d(fe);const se={};fe.forEach(ae=>se[ae.name]=[]),m(se),R.current&&R.current.then(ae=>{try{ae.sendRealtimeInput({content:{parts:[{text:`SYSTEM UPDATE: The active players are now: ${W.join(", ")}.`}]}})}catch(Ae){console.warn(Ae)}})},oe=W=>{b(W),et.saveGameSettings({format:W,customRules:A}),R.current&&R.current.then(fe=>{try{fe.sendRealtimeInput({content:{parts:[{text:`SYSTEM UPDATE: The Game Format is now set to ${W}. Skip asking for format.`}]}})}catch(se){console.warn(se)}})},ue=W=>{E(W),et.saveGameSettings({format:S,customRules:W}),R.current&&R.current.then(fe=>{try{fe.sendRealtimeInput({content:{parts:[{text:`SYSTEM UPDATE: Custom Rules have been updated to: ${W}. Skip asking for rules.`}]}})}catch(se){console.warn(se)}})},de=le.useCallback((W,fe)=>{m(se=>{const ae=[...se[W]||[]],Ae=ae.findIndex(we=>we.instanceId===fe);if(Ae>-1){const we={...ae[Ae]};return we.tapped=!we.tapped,ae[Ae]=we,R.current&&R.current.then(Ct=>{try{Ct.sendRealtimeInput({content:{parts:[{text:`SYSTEM UPDATE: ${W} manually ${we.tapped?"tapped":"untapped"} ${we.name}.`}]}})}catch(Xe){console.warn(Xe)}}),{...se,[W]:ae}}return se})},[]),N=le.useCallback((W,fe,se,ae)=>{m(Ae=>{const we=[...Ae[W]||[]],Ct=we.findIndex(Xe=>Xe.instanceId===fe);if(Ct>-1){const Xe={...we[Ct]};if(ae==="add"){if(!Xe.statuses.some(It=>It.label===se)){const It=v_(se);Xe.statuses=[...Xe.statuses,{id:crypto.randomUUID(),label:se,icon:It.icon,color:It.color}]}}else Xe.statuses=Xe.statuses.filter(It=>It.label!==se);return we[Ct]=Xe,R.current&&R.current.then(It=>{try{It.sendRealtimeInput({content:{parts:[{text:`SYSTEM UPDATE: ${W} manually ${ae}ed status '${se}' on ${Xe.name}.`}]}})}catch(fn){console.warn(fn)}}),{...Ae,[W]:we}}return Ae})},[]),J=le.useCallback(async()=>{try{const W=localStorage.getItem("gemini_api_key")||null;if(!W)throw new Error("AI features require a Gemini API key. Configure it in Settings to enable the Announcer.");const fe=new KN({apiKey:W}),se=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),ae=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});M.current=se,k.current=ae;const Ae=await navigator.mediaDevices.getUserMedia({audio:!0});Y.current.push(Ae);const we=se.createGain();w.current=we,se.createMediaStreamSource(Ae).connect(we);const Xe=se.createScriptProcessor(4096,1,1);we.connect(Xe),Xe.onaudioprocess=it=>{const ot=it.inputBuffer.getChannelData(0);let rt=0;for(let st=0;st<ot.length;st++)rt+=ot[st]*ot[st];l(Math.sqrt(rt/ot.length));const tn=ne(ot);R.current&&R.current.then(st=>{st.sendRealtimeInput({media:tn})})},Xe.connect(se.destination),ae.createGain().connect(ae.destination);const fn=fe.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[va.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Fenrir"}}},tools:[{functionDeclarations:[GI,VI,HI,qI,FI,JI]}],systemInstruction:`
            You are "The Announcer", an elite esports commentator and Level 3 Judge for Magic: The Gathering.
            
            **INITIALIZATION PROTOCOL (Follow strictly in order):**
            1. **Intro**: Introduce yourself energetically.
            2. **Players**: Ask for player names. (Wait for user or tool execution).
            3. **Format**: Ask what format they are playing (Standard, Commander, etc.). (If user says "I'll enter it", stop asking and wait for system update).
            4. **Custom Rules**: Ask if there are any custom rules/house rules. (If user says "I'll enter it", stop asking and wait for system update).
            
            **GAMEPLAY MANDATES (Level 3 Judge Mode):**
            1. **Visual Vigilance**: You have a video feed (possibly multiple cameras stitched together). You must identify cards played.
            2. **Mandatory Action Enforcement**:
               - When you identify a card via \`manage_board\`, READ its oracle text internally.
               - If it has a **Static Ability** (e.g. "Creatures enter tapped", "Players play with top card revealed"), you must MONITOR the board to ensure players comply.
               - If it has a **Triggered Ability** (e.g. "At the beginning of upkeep, sacrifice a creature"), you must ANNOUNCE it at the correct phase.
               - If a player misses a mandatory action (e.g. failing to discard), CALL IT OUT IMMEDIATELY: "Judge! [Player] needs to discard 2 cards due to [Card Name]!"
            3. **Status Tracking**:
               - Call \`manage_board(action='update_status', ...)\` when cards are tapped, get +1/+1 counters, become hexproof, etc.
               - Track these statuses meticulously.
            
            **BEHAVIOR:**
            - Professional, energetic, accurate.
            - Do not hallucinate rules. If unsure, ask: "I see a card that looks like [Name], is that correct?"
          `},callbacks:{onopen:()=>{console.log("Session Opened"),o(rt=>({...rt,isConnected:!0,isStreaming:!0}));const it=document.createElement("canvas"),ot=it.getContext("2d");G.current=window.setInterval(()=>{if(!ot)return;const rt=t.current.filter(tn=>tn&&tn.readyState===4&&!tn.paused);if(rt.length>0){const tn=rt.length,st=1920,Dt=1080;it.width=st,it.height=Dt,ot.fillStyle="#000",ot.fillRect(0,0,st,Dt),tn===1?ot.drawImage(rt[0],0,0,st,Dt):(rt[0]&&ot.drawImage(rt[0],0,0,st/2,Dt/2),rt[1]&&ot.drawImage(rt[1],st/2,0,st/2,Dt/2),rt[2]&&ot.drawImage(rt[2],0,Dt/2,st/2,Dt/2),rt[3]&&ot.drawImage(rt[3],st/2,Dt/2,st/2,Dt/2)),it.toBlob(async Dn=>{if(Dn&&R.current){const ei=await D(Dn);R.current.then(dn=>{dn.sendRealtimeInput({media:{data:ei,mimeType:"image/jpeg"}})})}},"image/jpeg",.6)}},1e3)},onmessage:async it=>{var rt,tn,st,Dt,Dn,ei;if(it.toolCall){const dn=[];for(const dt of it.toolCall.functionCalls){let Ve={error:"Unknown tool"};if(dt.name==="register_players"){const mt=dt.args.playerNames,St=await et.registerSessionPlayers(mt);me.current=St,d(St);const ie={};St.forEach(he=>ie[he.name]=[]),m(ie),Ve={success:!0,registeredCount:St.length}}else if(dt.name==="set_game_format"){const{format:mt}=dt.args;b(mt),await et.saveGameSettings({format:mt,customRules:A}),Ve={success:!0,formatSetTo:mt}}else if(dt.name==="set_custom_rules"){const{rules:mt}=dt.args;E(mt),await et.saveGameSettings({format:S,customRules:mt}),Ve={success:!0,rulesRecorded:!0}}else if(dt.name==="manage_board"){const{action:mt,cardName:St,playerName:ie,status:he,statusOperation:ke}=dt.args,Je=await et.getCardByName(St);m(Tt=>{var Ht,Xt;const nn=[...Tt[ie]||[]];if(mt==="play"&&Je){const qt={instanceId:crypto.randomUUID(),oracle_id:Je.oracle_id,name:Je.name,type_line:Je.type_line,image_uri:((Ht=Je.image_uris)==null?void 0:Ht.small)||((Xt=Je.image_uris)==null?void 0:Xt.normal),controller:ie,tapped:!1,oracle_text:Je.oracle_text,statuses:[]};return{...Tt,[ie]:[...nn,qt]}}else if(mt==="remove"){const qt=nn.findIndex(at=>at.name.toLowerCase()===St.toLowerCase());if(qt>-1)return nn.splice(qt,1),{...Tt,[ie]:nn}}else if(mt==="update_status"&&he){const qt=nn.findIndex(at=>at.name.toLowerCase()===St.toLowerCase());if(qt>-1){const at={...nn[qt]},ic=ke||"add",as=he.toLowerCase();if(as.includes("tap")||as.includes("untap"))at.tapped=!as.includes("untap");else if(ic==="add"){if(!at.statuses.some(Bi=>Bi.label===he)){const Bi=v_(he);at.statuses=[...at.statuses,{id:crypto.randomUUID(),label:he,icon:Bi.icon,color:Bi.color}]}}else at.statuses=at.statuses.filter(Bi=>Bi.label!==he);return nn[qt]=at,{...Tt,[ie]:nn}}}return Tt}),Ve={success:!0,message:`Action ${mt} performed on ${St}`}}else if(dt.name==="get_player_stats"){const{player1:mt,player2:St,mode:ie}=dt.args,he=await et.getPlayerStats(mt,St);he?ie==="one_on_one"?Ve={text:`In 1v1 games, ${he.p1Name} has won ${he.p1Wins1v1} times and ${he.p2Name} has won ${he.p2Wins1v1} times.`}:Ve={text:`Overall against anyone, ${he.p1Name} has ${he.p1WinsTotal} wins and ${he.p2Name} has ${he.p2WinsTotal} wins in games they played together.`}:Ve={error:"Players not found in history."}}else if(dt.name==="record_win"){const mt=dt.args.winnerName,St=me.current,ie=St.find(he=>he.name.toLowerCase()===mt.toLowerCase());if(ie){const he=St.filter(Je=>Je.id!==ie.id).map(Je=>Je.name),ke=St.length===2?"1v1":"multiplayer";await et.recordMatchResult(ie.name,he,ke),Ve={success:!0,saved:!0}}else Ve={error:"Winner not found in current session players."}}dn.push({id:dt.id,name:dt.name,response:{result:Ve}})}R.current&&R.current.then(dt=>{dt.sendToolResponse({functionResponses:dn})})}const ot=(Dn=(Dt=(st=(tn=(rt=it.serverContent)==null?void 0:rt.modelTurn)==null?void 0:tn.parts)==null?void 0:st[0])==null?void 0:Dt.inlineData)==null?void 0:Dn.data;if(ot&&k.current&&!ge.current){const dn=k.current;V.current=Math.max(V.current,dn.currentTime);const dt=await j(Ee(ot),dn,24e3,1),Ve=dn.createBufferSource();Ve.buffer=dt,Ve.connect(k.current.destination),Ve.addEventListener("ended",()=>{$.current.delete(Ve)}),Ve.start(V.current),V.current+=dt.duration,$.current.add(Ve)}(ei=it.serverContent)!=null&&ei.interrupted&&($.current.forEach(dn=>dn.stop()),$.current.clear(),V.current=0)},onclose:()=>o(it=>({...it,isConnected:!1,isStreaming:!1})),onerror:it=>o(ot=>({...ot,error:"Connection Error"}))}});R.current=fn,fn.then(it=>re.current=it)}catch(W){console.error(W),o(fe=>({...fe,error:W.message||"Failed to connect"}))}},[t,S,A]),ce=le.useCallback(()=>{re.current&&re.current.close(),G.current&&clearInterval(G.current),M.current&&M.current.close(),k.current&&k.current.close(),Y.current.forEach(W=>W.getTracks().forEach(fe=>fe.stop())),Y.current=[],O.current.forEach(W=>W.disconnect()),O.current.clear(),$.current.forEach(W=>W.stop()),$.current.clear(),o({isConnected:!1,isStreaming:!1,error:null}),d([]),me.current=[],m({})},[]);return{connect:J,disconnect:ce,setManualPlayers:z,setManualFormat:oe,setManualRules:ue,toggleCardTap:de,manualUpdateStatus:N,setIsOutputMuted:_,isOutputMuted:y,state:i,volume:s,sessionPlayers:c,battlefield:p,gameFormat:S,customRules:A}};class YI{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const i of this._parts)e.push(i);return $I(e).buffer}}function $I(t){let e=0;for(const s of t)e+=s.byteLength;const i=new Uint8Array(e);let o=0;for(const s of t){const l=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);i.set(l,o),o+=s.byteLength}return i}function fT(t){return new XI(t).unpack()}function dT(t){const e=new QI,i=e.pack(t);return i instanceof Promise?i.then(()=>e.getBuffer()):e.getBuffer()}class XI{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let i;if((i=e^160)<=15)return this.unpack_raw(i);if((i=e^176)<=15)return this.unpack_string(i);if((i=e^144)<=15)return this.unpack_array(i);if((i=e^128)<=15)return this.unpack_map(i);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return i=this.unpack_uint16(),this.unpack_string(i);case 217:return i=this.unpack_uint32(),this.unpack_string(i);case 218:return i=this.unpack_uint16(),this.unpack_raw(i);case 219:return i=this.unpack_uint32(),this.unpack_raw(i);case 220:return i=this.unpack_uint16(),this.unpack_array(i);case 221:return i=this.unpack_uint32(),this.unpack_array(i);case 222:return i=this.unpack_uint16(),this.unpack_map(i);case 223:return i=this.unpack_uint32(),this.unpack_map(i)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),i=(e[0]&255)*256+(e[1]&255);return this.index+=2,i}unpack_uint32(){const e=this.read(4),i=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,i}unpack_uint64(){const e=this.read(8),i=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,i}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const i=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,i}unpack_string(e){const i=this.read(e);let o=0,s="",l,c;for(;o<e;)l=i[o],l<160?(c=l,o++):(l^192)<32?(c=(l&31)<<6|i[o+1]&63,o+=2):(l^224)<16?(c=(l&15)<<12|(i[o+1]&63)<<6|i[o+2]&63,o+=3):(c=(l&7)<<18|(i[o+1]&63)<<12|(i[o+2]&63)<<6|i[o+3]&63,o+=4),s+=String.fromCodePoint(c);return this.index+=e,s}unpack_array(e){const i=new Array(e);for(let o=0;o<e;o++)i[o]=this.unpack();return i}unpack_map(e){const i={};for(let o=0;o<e;o++){const s=this.unpack();i[s]=this.unpack()}return i}unpack_float(){const e=this.unpack_uint32(),i=e>>31,o=(e>>23&255)-127,s=e&8388607|8388608;return(i===0?1:-1)*s*2**(o-23)}unpack_double(){const e=this.unpack_uint32(),i=this.unpack_uint32(),o=e>>31,s=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(s-20)+i*2**(s-52);return(o===0?1:-1)*c}read(e){const i=this.index;if(i+e<=this.length)return this.dataView.subarray(i,i+e);throw new Error("BinaryPackFailure: read index out of range")}}class QI{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const i=e.constructor;if(e instanceof Array){const o=this.pack_array(e);if(o instanceof Promise)return o.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const o=e;this.pack_bin(new Uint8Array(o.buffer,o.byteOffset,o.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(o=>{this.pack_bin(new Uint8Array(o)),this._bufferBuilder.flush()});if(i==Object||i.toString().startsWith("class")){const o=this.pack_object(e);if(o instanceof Promise)return o.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${i.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const i=e.length;if(i<=15)this.pack_uint8(160+i);else if(i<=65535)this._bufferBuilder.append(218),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const i=this._textEncoder.encode(e),o=i.length;if(o<=15)this.pack_uint8(176+o);else if(o<=65535)this._bufferBuilder.append(216),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(o);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(i)}pack_array(e){const i=e.length;if(i<=15)this.pack_uint8(144+i);else if(i<=65535)this._bufferBuilder.append(220),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(i);else throw new Error("Invalid length");const o=s=>{if(s<i){const l=this.pack(e[s]);return l instanceof Promise?l.then(()=>o(s+1)):o(s+1)}};return o(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let i=0;e<0&&(i=1,e=-e);const o=Math.floor(Math.log(e)/Math.LN2),s=e/2**o-1,l=Math.floor(s*2**52),c=2**32,d=i<<31|o+1023<<20|l/c&1048575,p=l%c;this._bufferBuilder.append(203),this.pack_int32(d),this.pack_int32(p)}pack_object(e){const i=Object.keys(e),o=i.length;if(o<=15)this.pack_uint8(128+o);else if(o<=65535)this._bufferBuilder.append(222),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(o);else throw new Error("Invalid length");const s=l=>{if(l<i.length){const c=i[l];if(e.hasOwnProperty(c)){this.pack(c);const d=this.pack(e[c]);if(d instanceof Promise)return d.then(()=>s(l+1))}return s(l+1)}};return s(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const i=e&4294967295;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_uint64(e){const i=e/4294967296,o=e%2**32;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255),this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const i=Math.floor(e/4294967296),o=e%2**32;this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255),this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255)}constructor(){this._bufferBuilder=new YI,this._textEncoder=new TextEncoder}}let hT=!0,pT=!0;function ua(t,e,i){const o=t.match(e);return o&&o.length>=i&&parseFloat(o[i],10)}function Zo(t,e,i){if(!t.RTCPeerConnection)return;const o=t.RTCPeerConnection.prototype,s=o.addEventListener;o.addEventListener=function(c,d){if(c!==e)return s.apply(this,arguments);const p=m=>{const y=i(m);y&&(d.handleEvent?d.handleEvent(y):d(y))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(d,p),s.apply(this,[c,p])};const l=o.removeEventListener;o.removeEventListener=function(c,d){if(c!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(d))return l.apply(this,arguments);const p=this._eventMap[e].get(d);return this._eventMap[e].delete(d),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[c,p])},Object.defineProperty(o,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function ZI(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(hT=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function jI(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(pT=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function mT(){if(typeof window=="object"){if(hT)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function hp(t,e){pT&&console.warn(t+" is deprecated, please use "+e+" instead.")}function WI(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:i}=t;if(i.mozGetUserMedia)e.browser="firefox",e.version=parseInt(ua(i.userAgent,/Firefox\/(\d+)\./,1));else if(i.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(ua(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(ua(i.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=ua(i.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function __(t){return Object.prototype.toString.call(t)==="[object Object]"}function gT(t){return __(t)?Object.keys(t).reduce(function(e,i){const o=__(t[i]),s=o?gT(t[i]):t[i],l=o&&!Object.keys(s).length;return s===void 0||l?e:Object.assign(e,{[i]:s})},{}):t}function Ch(t,e,i){!e||i.has(e.id)||(i.set(e.id,e),Object.keys(e).forEach(o=>{o.endsWith("Id")?Ch(t,t.get(e[o]),i):o.endsWith("Ids")&&e[o].forEach(s=>{Ch(t,t.get(s),i)})}))}function S_(t,e,i){const o=i?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const l=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&l.push(c)}),l.forEach(c=>{t.forEach(d=>{d.type===o&&d.trackId===c.id&&Ch(t,d,s)})}),s}const T_=mT;function yT(t,e){const i=t&&t.navigator;if(!i.mediaDevices)return;const o=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const p={};return Object.keys(d).forEach(m=>{if(m==="require"||m==="advanced"||m==="mediaSource")return;const y=typeof d[m]=="object"?d[m]:{ideal:d[m]};y.exact!==void 0&&typeof y.exact=="number"&&(y.min=y.max=y.exact);const _=function(S,b){return S?S+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(y.ideal!==void 0){p.optional=p.optional||[];let S={};typeof y.ideal=="number"?(S[_("min",m)]=y.ideal,p.optional.push(S),S={},S[_("max",m)]=y.ideal,p.optional.push(S)):(S[_("",m)]=y.ideal,p.optional.push(S))}y.exact!==void 0&&typeof y.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[_("",m)]=y.exact):["min","max"].forEach(S=>{y[S]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[_(S,m)]=y[S])})}),d.advanced&&(p.optional=(p.optional||[]).concat(d.advanced)),p},s=function(d,p){if(e.version>=61)return p(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const m=function(y,_,S){_ in y&&!(S in y)&&(y[S]=y[_],delete y[_])};d=JSON.parse(JSON.stringify(d)),m(d.audio,"autoGainControl","googAutoGainControl"),m(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=o(d.audio)}if(d&&typeof d.video=="object"){let m=d.video.facingMode;m=m&&(typeof m=="object"?m:{ideal:m});const y=e.version<66;if(m&&(m.exact==="user"||m.exact==="environment"||m.ideal==="user"||m.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!y)){delete d.video.facingMode;let _;if(m.exact==="environment"||m.ideal==="environment"?_=["back","rear"]:(m.exact==="user"||m.ideal==="user")&&(_=["front"]),_)return i.mediaDevices.enumerateDevices().then(S=>{S=S.filter(A=>A.kind==="videoinput");let b=S.find(A=>_.some(E=>A.label.toLowerCase().includes(E)));return!b&&S.length&&_.includes("back")&&(b=S[S.length-1]),b&&(d.video.deviceId=m.exact?{exact:b.deviceId}:{ideal:b.deviceId}),d.video=o(d.video),T_("chrome: "+JSON.stringify(d)),p(d)})}d.video=o(d.video)}return T_("chrome: "+JSON.stringify(d)),p(d)},l=function(d){return e.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(d,p,m){s(d,y=>{i.webkitGetUserMedia(y,p,_=>{m&&m(l(_))})})};if(i.getUserMedia=c.bind(i),i.mediaDevices.getUserMedia){const d=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(p){return s(p,m=>d(m).then(y=>{if(m.audio&&!y.getAudioTracks().length||m.video&&!y.getVideoTracks().length)throw y.getTracks().forEach(_=>{_.stop()}),new DOMException("","NotFoundError");return y},y=>Promise.reject(l(y))))}}}function eD(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(o){return e(o).then(s=>{const l=o.video&&o.video.width,c=o.video&&o.video.height,d=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:d||3}},l&&(o.video.mandatory.maxWidth=l),c&&(o.video.mandatory.maxHeight=c),t.navigator.mediaDevices.getUserMedia(o)})}}}function vT(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function _T(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",s=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(d=>d.track&&d.track.id===s.track.id):l={track:s.track};const c=new Event("track");c.track=s.track,c.receiver=l,c.transceiver={receiver:l},c.streams=[o.stream],this.dispatchEvent(c)}),o.stream.getTracks().forEach(s=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(d=>d.track&&d.track.id===s.id):l={track:s};const c=new Event("track");c.track=s,c.receiver=l,c.transceiver={receiver:l},c.streams=[o.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Zo(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function ST(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=s.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(d,p){let m=s.apply(this,arguments);return m||(m=e(this,d),this._senders.push(m)),m};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(d){l.apply(this,arguments);const p=this._senders.indexOf(d);p!==-1&&this._senders.splice(p,1)}}const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const o=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],o.apply(this,[l]),l.getTracks().forEach(c=>{const d=this._senders.find(p=>p.track===c);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(s=>s._pc=this),o},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function TT(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;if(arguments.length>0&&typeof o=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof o!="function"))return e.apply(this,[]);const c=function(p){const m={};return p.result().forEach(_=>{const S={id:_.id,timestamp:_.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[_.type]||_.type};_.names().forEach(b=>{S[b]=_.stat(b)}),m[S.id]=S}),m},d=function(p){return new Map(Object.keys(p).map(m=>[m,p[m]]))};if(arguments.length>=2){const p=function(m){s(d(c(m)))};return e.apply(this,[p,o])}return new Promise((p,m)=>{e.apply(this,[function(y){p(d(c(y)))},m])}).then(s,l)}}function xT(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const i=t.RTCPeerConnection.prototype.getSenders;i&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(c=>c._pc=this),l});const o=t.RTCPeerConnection.prototype.addTrack;o&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=o.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(c=>S_(c,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=i.apply(this,[]);return s.forEach(l=>l._pc=this),s}),Zo(t,"track",o=>(o.receiver._pc=o.srcElement,o)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>S_(l,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const o=arguments[0];let s,l,c;return this.getSenders().forEach(d=>{d.track===o&&(s?c=!0:s=d)}),this.getReceivers().forEach(d=>(d.track===o&&(l?c=!0:l=d),d.track===o)),c||s&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function bT(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,d){if(!d)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=e.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(p)===-1&&this._shimmedLocalStreams[d.id].push(p):this._shimmedLocalStreams[d.id]=[d,p],p};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(m=>{if(this.getSenders().find(_=>_.track===m))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();i.apply(this,arguments);const p=this.getSenders().filter(m=>d.indexOf(m)===-1);this._shimmedLocalStreams[c.id]=[c].concat(p)};const o=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],o.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const p=this._shimmedLocalStreams[d].indexOf(c);p!==-1&&this._shimmedLocalStreams[d].splice(p,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),s.apply(this,arguments)}}function CT(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return bT(t);const i=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const y=i.apply(this);return this._reverseStreams=this._reverseStreams||{},y.map(_=>this._reverseStreams[_.id])};const o=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(y){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},y.getTracks().forEach(_=>{if(this.getSenders().find(b=>b.track===_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[y.id]){const _=new t.MediaStream(y.getTracks());this._streams[y.id]=_,this._reverseStreams[_.id]=y,y=_}o.apply(this,[y])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(y){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[y.id]||y]),delete this._reverseStreams[this._streams[y.id]?this._streams[y.id].id:y.id],delete this._streams[y.id]},t.RTCPeerConnection.prototype.addTrack=function(y,_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const S=[].slice.call(arguments,1);if(S.length!==1||!S[0].getTracks().find(E=>E===y))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(E=>E.track===y))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const A=this._streams[_.id];if(A)A.addTrack(y),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const E=new t.MediaStream([y]);this._streams[_.id]=E,this._reverseStreams[E.id]=_,this.addStream(E)}return this.getSenders().find(E=>E.track===y)};function l(m,y){let _=y.sdp;return Object.keys(m._reverseStreams||[]).forEach(S=>{const b=m._reverseStreams[S],A=m._streams[b.id];_=_.replace(new RegExp(A.id,"g"),b.id)}),new RTCSessionDescription({type:y.type,sdp:_})}function c(m,y){let _=y.sdp;return Object.keys(m._reverseStreams||[]).forEach(S=>{const b=m._reverseStreams[S],A=m._streams[b.id];_=_.replace(new RegExp(b.id,"g"),A.id)}),new RTCSessionDescription({type:y.type,sdp:_})}["createOffer","createAnswer"].forEach(function(m){const y=t.RTCPeerConnection.prototype[m],_={[m](){const S=arguments;return arguments.length&&typeof arguments[0]=="function"?y.apply(this,[A=>{const E=l(this,A);S[0].apply(null,[E])},A=>{S[1]&&S[1].apply(null,A)},arguments[2]]):y.apply(this,arguments).then(A=>l(this,A))}};t.RTCPeerConnection.prototype[m]=_[m]});const d=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=c(this,arguments[0]),d.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const m=p.get.apply(this);return m.type===""?m:l(this,m)}}),t.RTCPeerConnection.prototype.removeTrack=function(y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!y._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(y._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let S;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(E=>y.track===E)&&(S=this._streams[b])}),S&&(S.getTracks().length===1?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(y.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Eh(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]})}function ET(t,e){Zo(t,"negotiationneeded",i=>{const o=i.target;if(!((e.version<72||o.getConfiguration&&o.getConfiguration().sdpSemantics==="plan-b")&&o.signalingState!=="stable"))return i})}const x_=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ET,shimAddTrackRemoveTrack:CT,shimAddTrackRemoveTrackWithNative:bT,shimGetDisplayMedia:eD,shimGetSendersWithDtmf:ST,shimGetStats:TT,shimGetUserMedia:yT,shimMediaStream:vT,shimOnTrack:_T,shimPeerConnection:Eh,shimSenderReceiverGetStats:xT},Symbol.toStringTag,{value:"Module"}));function AT(t,e){const i=t&&t.navigator,o=t&&t.MediaStreamTrack;if(i.getUserMedia=function(s,l,c){hp("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(s).then(l,c)},!(e.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const s=function(c,d,p){d in c&&!(p in c)&&(c[p]=c[d],delete c[d])},l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),s(c.audio,"autoGainControl","mozAutoGainControl"),s(c.audio,"noiseSuppression","mozNoiseSuppression")),l(c)},o&&o.prototype.getSettings){const c=o.prototype.getSettings;o.prototype.getSettings=function(){const d=c.apply(this,arguments);return s(d,"mozAutoGainControl","autoGainControl"),s(d,"mozNoiseSuppression","noiseSuppression"),d}}if(o&&o.prototype.applyConstraints){const c=o.prototype.applyConstraints;o.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),s(d,"autoGainControl","mozAutoGainControl"),s(d,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[d])}}}}function tD(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(o){if(!(o&&o.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return o.video===!0?o.video={mediaSource:e}:o.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(o)})}function RT(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ah(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const l=t.RTCPeerConnection.prototype[s],c={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=c[s]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,c,d]=arguments;return o.apply(this,[l||null]).then(p=>{if(e.version<53&&!c)try{p.forEach(m=>{m.type=i[m.type]||m.type})}catch(m){if(m.name!=="TypeError")throw m;p.forEach((y,_)=>{p.set(_,Object.assign({},y,{type:i[y.type]||y.type}))})}return p}).then(c,d)}}function wT(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(l=>l._pc=this),s});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function MT(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const o=e.apply(this,[]);return o.forEach(s=>s._pc=this),o}),Zo(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function NT(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(i){hp("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&i.getTracks().includes(o.track)&&this.removeTrack(o)})})}function IT(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function DT(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let o=arguments[1]&&arguments[1].sendEncodings;o===void 0&&(o=[]),o=[...o];const s=o.length>0;s&&o.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(s){const{sender:c}=l,d=c.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=o,c.sendEncodings=o,this.setParametersPromises.push(c.setParameters(d).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return l})}function kT(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const o=e.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function UT(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function PT(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const b_=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:DT,shimCreateAnswer:PT,shimCreateOffer:UT,shimGetDisplayMedia:tD,shimGetParameters:kT,shimGetUserMedia:AT,shimOnTrack:RT,shimPeerConnection:Ah,shimRTCDataChannel:IT,shimReceiverGetStats:MT,shimRemoveStream:NT,shimSenderGetStats:wT},Symbol.toStringTag,{value:"Module"}));function LT(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(s=>e.call(this,s,o)),o.getVideoTracks().forEach(s=>e.call(this,s,o))},t.RTCPeerConnection.prototype.addTrack=function(o,...s){return s&&s.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(i);if(o===-1)return;this._localStreams.splice(o,1);const s=i.getTracks();this.getSenders().forEach(l=>{s.includes(l.track)&&this.removeTrack(l)})})}}function zT(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=o=>{o.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,this.dispatchEvent(l)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(l=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(l)>=0)return;o._remoteStreams.push(l);const c=new Event("addstream");c.stream=l,o.dispatchEvent(c)})}),e.apply(o,arguments)}}}function OT(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,i=e.createOffer,o=e.createAnswer,s=e.setLocalDescription,l=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(m,y){const _=arguments.length>=2?arguments[2]:arguments[0],S=i.apply(this,[_]);return y?(S.then(m,y),Promise.resolve()):S},e.createAnswer=function(m,y){const _=arguments.length>=2?arguments[2]:arguments[0],S=o.apply(this,[_]);return y?(S.then(m,y),Promise.resolve()):S};let d=function(p,m,y){const _=s.apply(this,[p]);return y?(_.then(m,y),Promise.resolve()):_};e.setLocalDescription=d,d=function(p,m,y){const _=l.apply(this,[p]);return y?(_.then(m,y),Promise.resolve()):_},e.setRemoteDescription=d,d=function(p,m,y){const _=c.apply(this,[p]);return y?(_.then(m,y),Promise.resolve()):_},e.addIceCandidate=d}function BT(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const i=e.mediaDevices,o=i.getUserMedia.bind(i);e.mediaDevices.getUserMedia=s=>o(GT(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(o,s,l){e.mediaDevices.getUserMedia(o).then(s,l)}).bind(e))}function GT(t){return t&&t.video!==void 0?Object.assign({},t,{video:gT(t.video)}):t}function VT(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(o,s){if(o&&o.iceServers){const l=[];for(let c=0;c<o.iceServers.length;c++){let d=o.iceServers[c];d.urls===void 0&&d.url?(hp("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,l.push(d)):l.push(o.iceServers[c])}o.iceServers=l}return new e(o,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function HT(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qT(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const s=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");o.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):o.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const l=this.getTransceivers().find(c=>c.receiver.track.kind==="video");o.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):o.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function FT(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const C_=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:FT,shimCallbacksAPI:OT,shimConstraints:GT,shimCreateOfferLegacy:qT,shimGetUserMedia:BT,shimLocalStreamsAPI:LT,shimRTCIceServerUrls:VT,shimRemoteStreamsAPI:zT,shimTrackEventTransceiver:HT},Symbol.toStringTag,{value:"Module"}));var Dd={exports:{}},E_;function nD(){return E_||(E_=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(i){return i.trim().split(`
`).map(o=>o.trim())},e.splitSections=function(i){return i.split(`
m=`).map((s,l)=>(l>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(i){const o=e.splitSections(i);return o&&o[0]},e.getMediaSections=function(i){const o=e.splitSections(i);return o.shift(),o},e.matchPrefix=function(i,o){return e.splitLines(i).filter(s=>s.indexOf(o)===0)},e.parseCandidate=function(i){let o;i.indexOf("a=candidate:")===0?o=i.substring(12).split(" "):o=i.substring(10).split(" ");const s={foundation:o[0],component:{1:"rtp",2:"rtcp"}[o[1]]||o[1],protocol:o[2].toLowerCase(),priority:parseInt(o[3],10),ip:o[4],address:o[4],port:parseInt(o[5],10),type:o[7]};for(let l=8;l<o.length;l+=2)switch(o[l]){case"raddr":s.relatedAddress=o[l+1];break;case"rport":s.relatedPort=parseInt(o[l+1],10);break;case"tcptype":s.tcpType=o[l+1];break;case"ufrag":s.ufrag=o[l+1],s.usernameFragment=o[l+1];break;default:s[o[l]]===void 0&&(s[o[l]]=o[l+1]);break}return s},e.writeCandidate=function(i){const o=[];o.push(i.foundation);const s=i.component;s==="rtp"?o.push(1):s==="rtcp"?o.push(2):o.push(s),o.push(i.protocol.toUpperCase()),o.push(i.priority),o.push(i.address||i.ip),o.push(i.port);const l=i.type;return o.push("typ"),o.push(l),l!=="host"&&i.relatedAddress&&i.relatedPort&&(o.push("raddr"),o.push(i.relatedAddress),o.push("rport"),o.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(o.push("tcptype"),o.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(o.push("ufrag"),o.push(i.usernameFragment||i.ufrag)),"candidate:"+o.join(" ")},e.parseIceOptions=function(i){return i.substring(14).split(" ")},e.parseRtpMap=function(i){let o=i.substring(9).split(" ");const s={payloadType:parseInt(o.shift(),10)};return o=o[0].split("/"),s.name=o[0],s.clockRate=parseInt(o[1],10),s.channels=o.length===3?parseInt(o[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(i){let o=i.payloadType;i.preferredPayloadType!==void 0&&(o=i.preferredPayloadType);const s=i.channels||i.numChannels||1;return"a=rtpmap:"+o+" "+i.name+"/"+i.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(i){const o=i.substring(9).split(" ");return{id:parseInt(o[0],10),direction:o[0].indexOf("/")>0?o[0].split("/")[1]:"sendrecv",uri:o[1],attributes:o.slice(2).join(" ")}},e.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},e.parseFmtp=function(i){const o={};let s;const l=i.substring(i.indexOf(" ")+1).split(";");for(let c=0;c<l.length;c++)s=l[c].trim().split("="),o[s[0].trim()]=s[1];return o},e.writeFmtp=function(i){let o="",s=i.payloadType;if(i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const l=[];Object.keys(i.parameters).forEach(c=>{i.parameters[c]!==void 0?l.push(c+"="+i.parameters[c]):l.push(c)}),o+="a=fmtp:"+s+" "+l.join(";")+`\r
`}return o},e.parseRtcpFb=function(i){const o=i.substring(i.indexOf(" ")+1).split(" ");return{type:o.shift(),parameter:o.join(" ")}},e.writeRtcpFb=function(i){let o="",s=i.payloadType;return i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(l=>{o+="a=rtcp-fb:"+s+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),o},e.parseSsrcMedia=function(i){const o=i.indexOf(" "),s={ssrc:parseInt(i.substring(7,o),10)},l=i.indexOf(":",o);return l>-1?(s.attribute=i.substring(o+1,l),s.value=i.substring(l+1)):s.attribute=i.substring(o+1),s},e.parseSsrcGroup=function(i){const o=i.substring(13).split(" ");return{semantics:o.shift(),ssrcs:o.map(s=>parseInt(s,10))}},e.getMid=function(i){const o=e.matchPrefix(i,"a=mid:")[0];if(o)return o.substring(6)},e.parseFingerprint=function(i){const o=i.substring(14).split(" ");return{algorithm:o[0].toLowerCase(),value:o[1].toUpperCase()}},e.getDtlsParameters=function(i,o){return{role:"auto",fingerprints:e.matchPrefix(i+o,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(i,o){let s="a=setup:"+o+`\r
`;return i.fingerprints.forEach(l=>{s+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),s},e.parseCryptoLine=function(i){const o=i.substring(9).split(" ");return{tag:parseInt(o[0],10),cryptoSuite:o[1],keyParams:o[2],sessionParams:o.slice(3)}},e.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?e.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const o=i.substring(7).split("|");return{keyMethod:"inline",keySalt:o[0],lifeTime:o[1],mkiValue:o[2]?o[2].split(":")[0]:void 0,mkiLength:o[2]?o[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},e.getCryptoParameters=function(i,o){return e.matchPrefix(i+o,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(i,o){const s=e.matchPrefix(i+o,"a=ice-ufrag:")[0],l=e.matchPrefix(i+o,"a=ice-pwd:")[0];return s&&l?{usernameFragment:s.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(i){let o="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(o+=`a=ice-lite\r
`),o},e.parseRtpParameters=function(i){const o={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(i)[0].split(" ");o.profile=l[2];for(let d=3;d<l.length;d++){const p=l[d],m=e.matchPrefix(i,"a=rtpmap:"+p+" ")[0];if(m){const y=e.parseRtpMap(m),_=e.matchPrefix(i,"a=fmtp:"+p+" ");switch(y.parameters=_.length?e.parseFmtp(_[0]):{},y.rtcpFeedback=e.matchPrefix(i,"a=rtcp-fb:"+p+" ").map(e.parseRtcpFb),o.codecs.push(y),y.name.toUpperCase()){case"RED":case"ULPFEC":o.fecMechanisms.push(y.name.toUpperCase());break}}}e.matchPrefix(i,"a=extmap:").forEach(d=>{o.headerExtensions.push(e.parseExtmap(d))});const c=e.matchPrefix(i,"a=rtcp-fb:* ").map(e.parseRtcpFb);return o.codecs.forEach(d=>{c.forEach(p=>{d.rtcpFeedback.find(y=>y.type===p.type&&y.parameter===p.parameter)||d.rtcpFeedback.push(p)})}),o},e.writeRtpDescription=function(i,o){let s="";s+="m="+i+" ",s+=o.codecs.length>0?"9":"0",s+=" "+(o.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=o.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,o.codecs.forEach(c=>{s+=e.writeRtpMap(c),s+=e.writeFmtp(c),s+=e.writeRtcpFb(c)});let l=0;return o.codecs.forEach(c=>{c.maxptime>l&&(l=c.maxptime)}),l>0&&(s+="a=maxptime:"+l+`\r
`),o.headerExtensions&&o.headerExtensions.forEach(c=>{s+=e.writeExtmap(c)}),s},e.parseRtpEncodingParameters=function(i){const o=[],s=e.parseRtpParameters(i),l=s.fecMechanisms.indexOf("RED")!==-1,c=s.fecMechanisms.indexOf("ULPFEC")!==-1,d=e.matchPrefix(i,"a=ssrc:").map(S=>e.parseSsrcMedia(S)).filter(S=>S.attribute==="cname"),p=d.length>0&&d[0].ssrc;let m;const y=e.matchPrefix(i,"a=ssrc-group:FID").map(S=>S.substring(17).split(" ").map(A=>parseInt(A,10)));y.length>0&&y[0].length>1&&y[0][0]===p&&(m=y[0][1]),s.codecs.forEach(S=>{if(S.name.toUpperCase()==="RTX"&&S.parameters.apt){let b={ssrc:p,codecPayloadType:parseInt(S.parameters.apt,10)};p&&m&&(b.rtx={ssrc:m}),o.push(b),l&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:p,mechanism:c?"red+ulpfec":"red"},o.push(b))}}),o.length===0&&p&&o.push({ssrc:p});let _=e.matchPrefix(i,"b=");return _.length&&(_[0].indexOf("b=TIAS:")===0?_=parseInt(_[0].substring(7),10):_[0].indexOf("b=AS:")===0?_=parseInt(_[0].substring(5),10)*1e3*.95-2e3*8:_=void 0,o.forEach(S=>{S.maxBitrate=_})),o},e.parseRtcpParameters=function(i){const o={},s=e.matchPrefix(i,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="cname")[0];s&&(o.cname=s.value,o.ssrc=s.ssrc);const l=e.matchPrefix(i,"a=rtcp-rsize");o.reducedSize=l.length>0,o.compound=l.length===0;const c=e.matchPrefix(i,"a=rtcp-mux");return o.mux=c.length>0,o},e.writeRtcpParameters=function(i){let o="";return i.reducedSize&&(o+=`a=rtcp-rsize\r
`),i.mux&&(o+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(o+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),o},e.parseMsid=function(i){let o;const s=e.matchPrefix(i,"a=msid:");if(s.length===1)return o=s[0].substring(7).split(" "),{stream:o[0],track:o[1]};const l=e.matchPrefix(i,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(l.length>0)return o=l[0].value.split(" "),{stream:o[0],track:o[1]}},e.parseSctpDescription=function(i){const o=e.parseMLine(i),s=e.matchPrefix(i,"a=max-message-size:");let l;s.length>0&&(l=parseInt(s[0].substring(19),10)),isNaN(l)&&(l=65536);const c=e.matchPrefix(i,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:o.fmt,maxMessageSize:l};const d=e.matchPrefix(i,"a=sctpmap:");if(d.length>0){const p=d[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:l}}},e.writeSctpDescription=function(i,o){let s=[];return i.protocol!=="DTLS/SCTP"?s=["m="+i.kind+" 9 "+i.protocol+" "+o.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+o.port+`\r
`]:s=["m="+i.kind+" 9 "+i.protocol+" "+o.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+o.port+" "+o.protocol+` 65535\r
`],o.maxMessageSize!==void 0&&s.push("a=max-message-size:"+o.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(i,o,s){let l;const c=o!==void 0?o:2;return i?l=i:l=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+l+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(i,o){const s=e.splitLines(i);for(let l=0;l<s.length;l++)switch(s[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[l].substring(2)}return o?e.getDirection(o):"sendrecv"},e.getKind=function(i){return e.splitLines(i)[0].split(" ")[0].substring(2)},e.isRejected=function(i){return i.split(" ",2)[1]==="0"},e.parseMLine=function(i){const s=e.splitLines(i)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(i){const s=e.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const o=e.splitLines(i);for(let s=0;s<o.length;s++)if(o[s].length<2||o[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(Dd)),Dd.exports}var JT=nD();const Wr=qh(JT),iD=xC({__proto__:null,default:Wr},[JT]);function xu(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(o){if(typeof o=="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&(o=JSON.parse(JSON.stringify(o)),o.candidate=o.candidate.substring(2)),o.candidate&&o.candidate.length){const s=new e(o),l=Wr.parseCandidate(o.candidate);for(const c in l)c in s||Object.defineProperty(s,c,{value:l[c]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(o)},t.RTCIceCandidate.prototype=e.prototype,Zo(t,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new t.RTCIceCandidate(i.candidate),writable:"false"}),i))}function Rh(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Zo(t,"icecandidate",e=>{if(e.candidate){const i=Wr.parseCandidate(e.candidate.candidate);i.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return e})}function bu(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const i=function(d){if(!d||!d.sdp)return!1;const p=Wr.splitSections(d.sdp);return p.shift(),p.some(m=>{const y=Wr.parseMLine(m);return y&&y.kind==="application"&&y.protocol.indexOf("SCTP")!==-1})},o=function(d){const p=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const m=parseInt(p[1],10);return m!==m?-1:m},s=function(d){let p=65536;return e.browser==="firefox"&&(e.version<57?d===-1?p=16384:p=2147483637:e.version<60?p=e.version===57?65535:65536:p=2147483637),p},l=function(d,p){let m=65536;e.browser==="firefox"&&e.version===57&&(m=65535);const y=Wr.matchPrefix(d.sdp,"a=max-message-size:");return y.length>0?m=parseInt(y[0].substring(19),10):e.browser==="firefox"&&p!==-1&&(m=2147483637),m},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const p=o(arguments[0]),m=s(p),y=l(arguments[0],p);let _;m===0&&y===0?_=Number.POSITIVE_INFINITY:m===0||y===0?_=Math.max(m,y):_=Math.min(m,y);const S={};Object.defineProperty(S,"maxMessageSize",{get(){return _}}),this._sctp=S}return c.apply(this,arguments)}}function Cu(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(o,s){const l=o.send;o.send=function(){const d=arguments[0],p=d.length||d.size||d.byteLength;if(o.readyState==="open"&&s.sctp&&p>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return l.apply(o,arguments)}}const i=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=i.apply(this,arguments);return e(s,this),s},Zo(t,"datachannel",o=>(e(o.channel,o.target),o))}function wh(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const o=e[i];e[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const l=s.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const c=new Event("connectionstatechange",s);l.dispatchEvent(c)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),o.apply(this,arguments)}})}function Mh(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=s.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:l}):s.sdp=l}return i.apply(this,arguments)}}function Eu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const i=t.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Au(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const i=t.RTCPeerConnection.prototype.setLocalDescription;!i||i.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return i.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?i.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>i.apply(this,[c]))})}const oD=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Mh,shimAddIceCandidateNullOrEmpty:Eu,shimConnectionState:wh,shimMaxMessageSize:bu,shimParameterlessSetLocalDescription:Au,shimRTCIceCandidate:xu,shimRTCIceCandidateRelayProtocol:Rh,shimSendThrowTypeError:Cu},Symbol.toStringTag,{value:"Module"}));function rD({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const i=mT,o=WI(t),s={browserDetails:o,commonShim:oD,extractVersion:ua,disableLog:ZI,disableWarnings:jI,sdp:iD};switch(o.browser){case"chrome":if(!x_||!Eh||!e.shimChrome)return i("Chrome shim is not included in this adapter release."),s;if(o.version===null)return i("Chrome shim can not determine version, not shimming."),s;i("adapter.js shimming chrome."),s.browserShim=x_,Eu(t,o),Au(t),yT(t,o),vT(t),Eh(t,o),_T(t),CT(t,o),ST(t),TT(t),xT(t),ET(t,o),xu(t),Rh(t),wh(t),bu(t,o),Cu(t),Mh(t,o);break;case"firefox":if(!b_||!Ah||!e.shimFirefox)return i("Firefox shim is not included in this adapter release."),s;i("adapter.js shimming firefox."),s.browserShim=b_,Eu(t,o),Au(t),AT(t,o),Ah(t,o),RT(t),NT(t),wT(t),MT(t),IT(t),DT(t),kT(t),UT(t),PT(t),xu(t),wh(t),bu(t,o),Cu(t);break;case"safari":if(!C_||!e.shimSafari)return i("Safari shim is not included in this adapter release."),s;i("adapter.js shimming safari."),s.browserShim=C_,Eu(t,o),Au(t),VT(t),qT(t),OT(t),LT(t),zT(t),HT(t),BT(t),FT(t),xu(t),Rh(t),bu(t,o),Cu(t),Mh(t,o);break;default:i("Unsupported browser!");break}return s}const A_=rD({window:typeof window>"u"?void 0:window});let Nh;try{Nh=new TextDecoder}catch{}let _e,Jo,ee=0;const sD=105,aD=57342,lD=57343,R_=57337,w_=6,Gr={};let Ge={},_t,qu,Fu=0,Aa=0,Pt,Xn,Nt=[],Ih=[],Tn,sn,ca,M_={useRecords:!1,mapsAsObjects:!0},Ra=!1,KT=2;try{new Function("")}catch{KT=1/0}class wa{constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[i,o]of Object.entries(e.keyMap))this.mapKey.set(o,i)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let i=new Map;for(let[o,s]of Object.entries(e))i.set(this._keyMap.hasOwnProperty(o)?this._keyMap[o]:o,s);return i}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[o,s]of Object.entries(this._keyMap))this._mapKey.set(s,o)}let i={};return e.forEach((o,s)=>i[qn(this._mapKey.has(s)?this._mapKey.get(s):s)]=o),i}mapDecode(e,i){let o=this.decode(e);if(this._keyMap)switch(o.constructor.name){case"Array":return o.map(s=>this.decodeKeys(s))}return o}decode(e,i){if(_e)return QT(()=>(Ph(),this?this.decode(e,i):wa.prototype.decode.call(M_,e,i)));Jo=i>-1?i:e.length,ee=0,Aa=0,qu=null,Pt=null,_e=e;try{sn=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(o){throw _e=null,e instanceof Uint8Array?o:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof wa){if(Ge=this,Tn=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return _t=this.structures,fu();(!_t||_t.length>0)&&(_t=[])}else Ge=M_,(!_t||_t.length>0)&&(_t=[]),Tn=null;return fu()}decodeMultiple(e,i){let o,s=0;try{let l=e.length;Ra=!0;let c=this?this.decode(e,l):gp.decode(e,l);if(i){if(i(c)===!1)return;for(;ee<l;)if(s=ee,i(fu())===!1)return}else{for(o=[c];ee<l;)s=ee,o.push(fu());return o}}catch(l){throw l.lastPosition=s,l.values=o,l}finally{Ra=!1,Ph()}}}function fu(){try{let t=Be();if(Pt){if(ee>=Pt.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}ee=Pt.postBundlePosition,Pt=null}if(ee==Jo)_t=null,_e=null,Xn&&(Xn=null);else if(ee>Jo){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}else if(!Ra)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Ph(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function Be(){let t=_e[ee++],e=t>>5;if(t=t&31,t>23)switch(t){case 24:t=_e[ee++];break;case 25:if(e==7)return dD();t=sn.getUint16(ee),ee+=2;break;case 26:if(e==7){let i=sn.getFloat32(ee);if(Ge.useFloat32>2){let o=mp[(_e[ee]&127)<<1|_e[ee+1]>>7];return ee+=4,(o*i+(i>0?.5:-.5)>>0)/o}return ee+=4,i}t=sn.getUint32(ee),ee+=4;break;case 27:if(e==7){let i=sn.getFloat64(ee);return ee+=8,i}if(e>1){if(sn.getUint32(ee)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");t=sn.getUint32(ee+4)}else Ge.int64AsNumber?(t=sn.getUint32(ee)*4294967296,t+=sn.getUint32(ee+4)):t=sn.getBigUint64(ee);ee+=8;break;case 31:switch(e){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let i=[],o,s=0;for(;(o=Be())!=Gr;)i[s++]=o;return e==4?i:e==3?i.join(""):Buffer.concat(i);case 5:let l;if(Ge.mapsAsObjects){let c={};if(Ge.keyMap)for(;(l=Be())!=Gr;)c[qn(Ge.decodeKey(l))]=Be();else for(;(l=Be())!=Gr;)c[qn(l)]=Be();return c}else{ca&&(Ge.mapsAsObjects=!0,ca=!1);let c=new Map;if(Ge.keyMap)for(;(l=Be())!=Gr;)c.set(Ge.decodeKey(l),Be());else for(;(l=Be())!=Gr;)c.set(l,Be());return c}case 7:return Gr;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return fD(t);case 3:if(Aa>=ee)return qu.slice(ee-Fu,(ee+=t)-Fu);if(Aa==0&&Jo<140&&t<32){let s=t<16?YT(t):cD(t);if(s!=null)return s}return uD(t);case 4:let i=new Array(t);for(let s=0;s<t;s++)i[s]=Be();return i;case 5:if(Ge.mapsAsObjects){let s={};if(Ge.keyMap)for(let l=0;l<t;l++)s[qn(Ge.decodeKey(Be()))]=Be();else for(let l=0;l<t;l++)s[qn(Be())]=Be();return s}else{ca&&(Ge.mapsAsObjects=!0,ca=!1);let s=new Map;if(Ge.keyMap)for(let l=0;l<t;l++)s.set(Ge.decodeKey(Be()),Be());else for(let l=0;l<t;l++)s.set(Be(),Be());return s}case 6:if(t>=R_){let s=_t[t&8191];if(s)return s.read||(s.read=Dh(s)),s.read();if(t<65536){if(t==lD){let l=Kr(),c=Be(),d=Be();Uh(c,d);let p={};if(Ge.keyMap)for(let m=2;m<l;m++){let y=Ge.decodeKey(d[m-2]);p[qn(y)]=Be()}else for(let m=2;m<l;m++){let y=d[m-2];p[qn(y)]=Be()}return p}else if(t==aD){let l=Kr(),c=Be();for(let d=2;d<l;d++)Uh(c++,Be());return Be()}else if(t==R_)return vD();if(Ge.getShared&&(pp(),s=_t[t&8191],s))return s.read||(s.read=Dh(s)),s.read()}}let o=Nt[t];if(o)return o.handlesRead?o(Be):o(Be());{let s=Be();for(let l=0;l<Ih.length;l++){let c=Ih[l](t,s);if(c!==void 0)return c}return new $o(s,t)}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let s=(Tn||Bo())[t];if(s!==void 0)return s;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let s=new Error("Unexpected end of CBOR data");throw s.incomplete=!0,s}throw new Error("Unknown CBOR token "+t)}}const N_=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Dh(t){function e(){let i=_e[ee++];if(i=i&31,i>23)switch(i){case 24:i=_e[ee++];break;case 25:i=sn.getUint16(ee),ee+=2;break;case 26:i=sn.getUint32(ee),ee+=4;break;default:throw new Error("Expected array header, but got "+_e[ee-1])}let o=this.compiledReader;for(;o;){if(o.propertyCount===i)return o(Be);o=o.next}if(this.slowReads++>=KT){let l=this.length==i?this:this.slice(0,i);return o=Ge.keyMap?new Function("r","return {"+l.map(c=>Ge.decodeKey(c)).map(c=>N_.test(c)?qn(c)+":r()":"["+JSON.stringify(c)+"]:r()").join(",")+"}"):new Function("r","return {"+l.map(c=>N_.test(c)?qn(c)+":r()":"["+JSON.stringify(c)+"]:r()").join(",")+"}"),this.compiledReader&&(o.next=this.compiledReader),o.propertyCount=i,this.compiledReader=o,o(Be)}let s={};if(Ge.keyMap)for(let l=0;l<i;l++)s[qn(Ge.decodeKey(this[l]))]=Be();else for(let l=0;l<i;l++)s[qn(this[l])]=Be();return s}return t.slowReads=0,e}function qn(t){return t==="__proto__"?"__proto_":t}let uD=kh;function kh(t){let e;if(t<16&&(e=YT(t)))return e;if(t>64&&Nh)return Nh.decode(_e.subarray(ee,ee+=t));const i=ee+t,o=[];for(e="";ee<i;){const s=_e[ee++];if((s&128)===0)o.push(s);else if((s&224)===192){const l=_e[ee++]&63;o.push((s&31)<<6|l)}else if((s&240)===224){const l=_e[ee++]&63,c=_e[ee++]&63;o.push((s&31)<<12|l<<6|c)}else if((s&248)===240){const l=_e[ee++]&63,c=_e[ee++]&63,d=_e[ee++]&63;let p=(s&7)<<18|l<<12|c<<6|d;p>65535&&(p-=65536,o.push(p>>>10&1023|55296),p=56320|p&1023),o.push(p)}else o.push(s);o.length>=4096&&(e+=Bt.apply(String,o),o.length=0)}return o.length>0&&(e+=Bt.apply(String,o)),e}let Bt=String.fromCharCode;function cD(t){let e=ee,i=new Array(t);for(let o=0;o<t;o++){const s=_e[ee++];if((s&128)>0){ee=e;return}i[o]=s}return Bt.apply(String,i)}function YT(t){if(t<4)if(t<2){if(t===0)return"";{let e=_e[ee++];if((e&128)>1){ee-=1;return}return Bt(e)}}else{let e=_e[ee++],i=_e[ee++];if((e&128)>0||(i&128)>0){ee-=2;return}if(t<3)return Bt(e,i);let o=_e[ee++];if((o&128)>0){ee-=3;return}return Bt(e,i,o)}else{let e=_e[ee++],i=_e[ee++],o=_e[ee++],s=_e[ee++];if((e&128)>0||(i&128)>0||(o&128)>0||(s&128)>0){ee-=4;return}if(t<6){if(t===4)return Bt(e,i,o,s);{let l=_e[ee++];if((l&128)>0){ee-=5;return}return Bt(e,i,o,s,l)}}else if(t<8){let l=_e[ee++],c=_e[ee++];if((l&128)>0||(c&128)>0){ee-=6;return}if(t<7)return Bt(e,i,o,s,l,c);let d=_e[ee++];if((d&128)>0){ee-=7;return}return Bt(e,i,o,s,l,c,d)}else{let l=_e[ee++],c=_e[ee++],d=_e[ee++],p=_e[ee++];if((l&128)>0||(c&128)>0||(d&128)>0||(p&128)>0){ee-=8;return}if(t<10){if(t===8)return Bt(e,i,o,s,l,c,d,p);{let m=_e[ee++];if((m&128)>0){ee-=9;return}return Bt(e,i,o,s,l,c,d,p,m)}}else if(t<12){let m=_e[ee++],y=_e[ee++];if((m&128)>0||(y&128)>0){ee-=10;return}if(t<11)return Bt(e,i,o,s,l,c,d,p,m,y);let _=_e[ee++];if((_&128)>0){ee-=11;return}return Bt(e,i,o,s,l,c,d,p,m,y,_)}else{let m=_e[ee++],y=_e[ee++],_=_e[ee++],S=_e[ee++];if((m&128)>0||(y&128)>0||(_&128)>0||(S&128)>0){ee-=12;return}if(t<14){if(t===12)return Bt(e,i,o,s,l,c,d,p,m,y,_,S);{let b=_e[ee++];if((b&128)>0){ee-=13;return}return Bt(e,i,o,s,l,c,d,p,m,y,_,S,b)}}else{let b=_e[ee++],A=_e[ee++];if((b&128)>0||(A&128)>0){ee-=14;return}if(t<15)return Bt(e,i,o,s,l,c,d,p,m,y,_,S,b,A);let E=_e[ee++];if((E&128)>0){ee-=15;return}return Bt(e,i,o,s,l,c,d,p,m,y,_,S,b,A,E)}}}}}function fD(t){return Ge.copyBuffers?Uint8Array.prototype.slice.call(_e,ee,ee+=t):_e.subarray(ee,ee+=t)}let $T=new Float32Array(1),du=new Uint8Array($T.buffer,0,4);function dD(){let t=_e[ee++],e=_e[ee++],i=(t&127)>>2;if(i===31)return e||t&3?NaN:t&128?-1/0:1/0;if(i===0){let o=((t&3)<<8|e)/16777216;return t&128?-o:o}return du[3]=t&128|(i>>1)+56,du[2]=(t&7)<<5|e>>3,du[1]=e<<5,du[0]=0,$T[0]}new Array(4096);class $o{constructor(e,i){this.value=e,this.tag=i}}Nt[0]=t=>new Date(t);Nt[1]=t=>new Date(Math.round(t*1e3));Nt[2]=t=>{let e=BigInt(0);for(let i=0,o=t.byteLength;i<o;i++)e=BigInt(t[i])+e<<BigInt(8);return e};Nt[3]=t=>BigInt(-1)-Nt[2](t);Nt[4]=t=>+(t[1]+"e"+t[0]);Nt[5]=t=>t[1]*Math.exp(t[0]*Math.log(2));const Uh=(t,e)=>{t=t-57344;let i=_t[t];i&&i.isShared&&((_t.restoreStructures||(_t.restoreStructures=[]))[t]=i),_t[t]=e,e.read=Dh(e)};Nt[sD]=t=>{let e=t.length,i=t[1];Uh(t[0],i);let o={};for(let s=2;s<e;s++){let l=i[s-2];o[qn(l)]=t[s]}return o};Nt[14]=t=>Pt?Pt[0].slice(Pt.position0,Pt.position0+=t):new $o(t,14);Nt[15]=t=>Pt?Pt[1].slice(Pt.position1,Pt.position1+=t):new $o(t,15);let hD={Error,RegExp};Nt[27]=t=>(hD[t[0]]||Error)(t[1],t[2]);const XT=t=>{if(_e[ee++]!=132)throw new Error("Packed values structure must be followed by a 4 element array");let e=t();return Tn=Tn?e.concat(Tn.slice(e.length)):e,Tn.prefixes=t(),Tn.suffixes=t(),t()};XT.handlesRead=!0;Nt[51]=XT;Nt[w_]=t=>{if(!Tn)if(Ge.getShared)pp();else return new $o(t,w_);if(typeof t=="number")return Tn[16+(t>=0?2*t:-2*t-1)];throw new Error("No support for non-integer packed references yet")};Nt[28]=t=>{Xn||(Xn=new Map,Xn.id=0);let e=Xn.id++,i=_e[ee],o;i>>5==4?o=[]:o={};let s={target:o};Xn.set(e,s);let l=t();return s.used?Object.assign(o,l):(s.target=l,l)};Nt[28].handlesRead=!0;Nt[29]=t=>{let e=Xn.get(t);return e.used=!0,e.target};Nt[258]=t=>new Set(t);(Nt[259]=t=>(Ge.mapsAsObjects&&(Ge.mapsAsObjects=!1,ca=!0),t())).handlesRead=!0;function Vr(t,e){return typeof t=="string"?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}function Bo(){if(!Tn)if(Ge.getShared)pp();else throw new Error("No packed values available");return Tn}const pD=1399353956;Ih.push((t,e)=>{if(t>=225&&t<=255)return Vr(Bo().prefixes[t-224],e);if(t>=28704&&t<=32767)return Vr(Bo().prefixes[t-28672],e);if(t>=1879052288&&t<=2147483647)return Vr(Bo().prefixes[t-1879048192],e);if(t>=216&&t<=223)return Vr(e,Bo().suffixes[t-216]);if(t>=27647&&t<=28671)return Vr(e,Bo().suffixes[t-27639]);if(t>=1811940352&&t<=1879048191)return Vr(e,Bo().suffixes[t-1811939328]);if(t==pD)return{packedValues:Tn,structures:_t.slice(0),version:e};if(t==55799)return e});const mD=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,I_=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],gD=[64,68,69,70,71,72,77,78,79,85,86];for(let t=0;t<I_.length;t++)yD(I_[t],gD[t]);function yD(t,e){let i="get"+t.name.slice(0,-5),o;typeof t=="function"?o=t.BYTES_PER_ELEMENT:t=null;for(let s=0;s<2;s++){if(!s&&o==1)continue;let l=o==2?1:o==4?2:3;Nt[s?e:e-4]=o==1||s==mD?c=>{if(!t)throw new Error("Could not find typed array for code "+e);return new t(Uint8Array.prototype.slice.call(c,0).buffer)}:c=>{if(!t)throw new Error("Could not find typed array for code "+e);let d=new DataView(c.buffer,c.byteOffset,c.byteLength),p=c.length>>l,m=new t(p),y=d[i];for(let _=0;_<p;_++)m[_]=y.call(d,_<<l,s);return m}}}function vD(){let t=Kr(),e=ee+Be();for(let o=2;o<t;o++){let s=Kr();ee+=s}let i=ee;return ee=e,Pt=[kh(Kr()),kh(Kr())],Pt.position0=0,Pt.position1=0,Pt.postBundlePosition=ee,ee=i,Be()}function Kr(){let t=_e[ee++]&31;if(t>23)switch(t){case 24:t=_e[ee++];break;case 25:t=sn.getUint16(ee),ee+=2;break;case 26:t=sn.getUint32(ee),ee+=4;break}return t}function pp(){if(Ge.getShared){let t=QT(()=>(_e=null,Ge.getShared()))||{},e=t.structures||[];Ge.sharedVersion=t.version,Tn=Ge.sharedValues=t.packedValues,_t===!0?Ge.structures=_t=e:_t.splice.apply(_t,[0,e.length].concat(e))}}function QT(t){let e=Jo,i=ee,o=Fu,s=Aa,l=qu,c=Xn,d=Pt,p=new Uint8Array(_e.slice(0,Jo)),m=_t,y=Ge,_=Ra,S=t();return Jo=e,ee=i,Fu=o,Aa=s,qu=l,Xn=c,Pt=d,_e=p,Ra=_,_t=m,Ge=y,sn=new DataView(_e.buffer,_e.byteOffset,_e.byteLength),S}function Ph(){_e=null,Xn=null,_t=null}const mp=new Array(147);for(let t=0;t<256;t++)mp[t]=+("1e"+Math.floor(45.15-t*.30103));let gp=new wa({useRecords:!1});gp.decode;gp.decodeMultiple;let Ru;try{Ru=new TextEncoder}catch{}let Lh,ZT;const nc=typeof globalThis=="object"&&globalThis.Buffer,Pa=typeof nc<"u",kd=Pa?nc.allocUnsafeSlow:Uint8Array,D_=Pa?nc:Uint8Array,k_=256,U_=Pa?4294967296:2144337920;let Ud,F,ct,P=0,co,Ut=null;const _D=61440,SD=/[\u0080-\uFFFF]/,Mn=Symbol("record-id");class TD extends wa{constructor(e){super(e),this.offset=0;let i,o,s,l,c;e=e||{};let d=D_.prototype.utf8Write?function(U,ne,j){return F.utf8Write(U,ne,j)}:Ru&&Ru.encodeInto?function(U,ne){return Ru.encodeInto(U,F.subarray(ne)).written}:!1,p=this,m=e.structures||e.saveStructures,y=e.maxSharedStructures;if(y==null&&(y=m?128:0),y>8190)throw new Error("Maximum maxSharedStructure is 8190");let _=e.sequential;_&&(y=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let S,b,A=e.sharedValues,E;if(A){E=Object.create(null);for(let U=0,ne=A.length;U<ne;U++)E[A[U]]=U}let R=[],M=0,k=0;this.mapEncode=function(U,ne){if(this._keyMap&&!this._mapped)switch(U.constructor.name){case"Array":U=U.map(j=>this.encodeKeys(j));break}return this.encode(U,ne)},this.encode=function(U,ne){if(F||(F=new kd(8192),ct=new DataView(F.buffer,0,8192),P=0),co=F.length-10,co-P<2048?(F=new kd(F.length),ct=new DataView(F.buffer,0,F.length),co=F.length-10,P=0):ne===O_&&(P=P+7&2147483640),i=P,p.useSelfDescribedHeader&&(ct.setUint32(P,3654940416),P+=3),c=p.structuredClone?new Map:null,p.bundleStrings&&typeof U!="string"?(Ut=[],Ut.size=1/0):Ut=null,o=p.structures,o){if(o.uninitialized){let D=p.getShared()||{};p.structures=o=D.structures||[],p.sharedVersion=D.version;let z=p.sharedValues=D.packedValues;if(z){E={};for(let oe=0,ue=z.length;oe<ue;oe++)E[z[oe]]=oe}}let j=o.length;if(j>y&&!_&&(j=y),!o.transitions){o.transitions=Object.create(null);for(let D=0;D<j;D++){let z=o[D];if(!z)continue;let oe,ue=o.transitions;for(let de=0,N=z.length;de<N;de++){ue[Mn]===void 0&&(ue[Mn]=D);let J=z[de];oe=ue[J],oe||(oe=ue[J]=Object.create(null)),ue=oe}ue[Mn]=D|1048576}}_||(o.nextId=j)}if(s&&(s=!1),l=o||[],b=E,e.pack){let j=new Map;if(j.values=[],j.encoder=p,j.maxValues=e.maxPrivatePackedValues||(E?16:1/0),j.objectMap=E||!1,j.samplingPackedValues=S,wu(U,j),j.values.length>0){F[P++]=216,F[P++]=51,ai(4);let D=j.values;w(D),ai(0),ai(0),b=Object.create(E||null);for(let z=0,oe=D.length;z<oe;z++)b[D[z]]=z}}Ud=ne&Ld;try{if(Ud)return;if(w(U),Ut&&z_(i,w),p.offset=P,c&&c.idsToInsert){P+=c.idsToInsert.length*2,P>co&&G(P),p.offset=P;let j=CD(F.subarray(i,P),c.idsToInsert);return c=null,j}return ne&O_?(F.start=i,F.end=P,F):F.subarray(i,P)}finally{if(o){if(k<10&&k++,o.length>y&&(o.length=y),M>1e4)o.transitions=null,k=0,M=0,R.length>0&&(R=[]);else if(R.length>0&&!_){for(let j=0,D=R.length;j<D;j++)R[j][Mn]=void 0;R=[]}}if(s&&p.saveShared){p.structures.length>y&&(p.structures=p.structures.slice(0,y));let j=F.subarray(i,P);return p.updateSharedData()===!1?p.encode(U):j}ne&ED&&(P=i)}},this.findCommonStringsToPack=()=>(S=new Map,E||(E=Object.create(null)),U=>{let ne=U&&U.threshold||4,j=this.pack?U.maxPrivatePackedValues||16:0;A||(A=this.sharedValues=[]);for(let[D,z]of S)z.count>ne&&(E[D]=j++,A.push(D),s=!0);for(;this.saveShared&&this.updateSharedData()===!1;);S=null});const w=U=>{P>co&&(F=G(P));var ne=typeof U,j;if(ne==="string"){if(b){let ue=b[U];if(ue>=0){ue<16?F[P++]=ue+224:(F[P++]=198,ue&1?w(15-ue>>1):w(ue-16>>1));return}else if(S&&!e.pack){let de=S.get(U);de?de.count++:S.set(U,{count:1})}}let D=U.length;if(Ut&&D>=4&&D<1024){if((Ut.size+=D)>_D){let de,N=(Ut[0]?Ut[0].length*3+Ut[1].length:0)+10;P+N>co&&(F=G(P+N)),F[P++]=217,F[P++]=223,F[P++]=249,F[P++]=Ut.position?132:130,F[P++]=26,de=P-i,P+=4,Ut.position&&z_(i,w),Ut=["",""],Ut.size=0,Ut.position=de}let ue=SD.test(U);Ut[ue?0:1]+=U,F[P++]=ue?206:207,w(D);return}let z;D<32?z=1:D<256?z=2:D<65536?z=3:z=5;let oe=D*3;if(P+oe>co&&(F=G(P+oe)),D<64||!d){let ue,de,N,J=P+z;for(ue=0;ue<D;ue++)de=U.charCodeAt(ue),de<128?F[J++]=de:de<2048?(F[J++]=de>>6|192,F[J++]=de&63|128):(de&64512)===55296&&((N=U.charCodeAt(ue+1))&64512)===56320?(de=65536+((de&1023)<<10)+(N&1023),ue++,F[J++]=de>>18|240,F[J++]=de>>12&63|128,F[J++]=de>>6&63|128,F[J++]=de&63|128):(F[J++]=de>>12|224,F[J++]=de>>6&63|128,F[J++]=de&63|128);j=J-P-z}else j=d(U,P+z,oe);j<24?F[P++]=96|j:j<256?(z<2&&F.copyWithin(P+2,P+1,P+1+j),F[P++]=120,F[P++]=j):j<65536?(z<3&&F.copyWithin(P+3,P+2,P+2+j),F[P++]=121,F[P++]=j>>8,F[P++]=j&255):(z<5&&F.copyWithin(P+5,P+3,P+3+j),F[P++]=122,ct.setUint32(P,j),P+=4),P+=j}else if(ne==="number")if(!this.alwaysUseFloat&&U>>>0===U)U<24?F[P++]=U:U<256?(F[P++]=24,F[P++]=U):U<65536?(F[P++]=25,F[P++]=U>>8,F[P++]=U&255):(F[P++]=26,ct.setUint32(P,U),P+=4);else if(!this.alwaysUseFloat&&U>>0===U)U>=-24?F[P++]=31-U:U>=-256?(F[P++]=56,F[P++]=~U):U>=-65536?(F[P++]=57,ct.setUint16(P,~U),P+=2):(F[P++]=58,ct.setUint32(P,~U),P+=4);else{let D;if((D=this.useFloat32)>0&&U<4294967296&&U>=-2147483648){F[P++]=250,ct.setFloat32(P,U);let z;if(D<4||(z=U*mp[(F[P]&127)<<1|F[P+1]>>7])>>0===z){P+=4;return}else P--}F[P++]=251,ct.setFloat64(P,U),P+=8}else if(ne==="object")if(!U)F[P++]=246;else{if(c){let z=c.get(U);if(z){if(F[P++]=216,F[P++]=29,F[P++]=25,!z.references){let oe=c.idsToInsert||(c.idsToInsert=[]);z.references=[],oe.push(z)}z.references.push(P-i),P+=2;return}else c.set(U,{offset:P-i})}let D=U.constructor;if(D===Object)O(U,!0);else if(D===Array){j=U.length,j<24?F[P++]=128|j:ai(j);for(let z=0;z<j;z++)w(U[z])}else if(D===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(F[P++]=217,F[P++]=1,F[P++]=3),j=U.size,j<24?F[P++]=160|j:j<256?(F[P++]=184,F[P++]=j):j<65536?(F[P++]=185,F[P++]=j>>8,F[P++]=j&255):(F[P++]=186,ct.setUint32(P,j),P+=4),p.keyMap)for(let[z,oe]of U)w(p.encodeKey(z)),w(oe);else for(let[z,oe]of U)w(z),w(oe);else{for(let z=0,oe=Lh.length;z<oe;z++){let ue=ZT[z];if(U instanceof ue){let de=Lh[z],N=de.tag;N==null&&(N=de.getTag&&de.getTag.call(this,U)),N<24?F[P++]=192|N:N<256?(F[P++]=216,F[P++]=N):N<65536?(F[P++]=217,F[P++]=N>>8,F[P++]=N&255):N>-1&&(F[P++]=218,ct.setUint32(P,N),P+=4),de.encode.call(this,U,w,G);return}}if(U[Symbol.iterator]){if(Ud){let z=new Error("Iterable should be serialized as iterator");throw z.iteratorNotHandled=!0,z}F[P++]=159;for(let z of U)w(z);F[P++]=255;return}if(U[Symbol.asyncIterator]||Pd(U)){let z=new Error("Iterable/blob should be serialized as iterator");throw z.iteratorNotHandled=!0,z}if(this.useToJSON&&U.toJSON){const z=U.toJSON();if(z!==U)return w(z)}O(U,!U.hasOwnProperty)}}else if(ne==="boolean")F[P++]=U?245:244;else if(ne==="bigint"){if(U<BigInt(1)<<BigInt(64)&&U>=0)F[P++]=27,ct.setBigUint64(P,U);else if(U>-(BigInt(1)<<BigInt(64))&&U<0)F[P++]=59,ct.setBigUint64(P,-U-BigInt(1));else if(this.largeBigIntToFloat)F[P++]=251,ct.setFloat64(P,Number(U));else throw new RangeError(U+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");P+=8}else if(ne==="undefined")F[P++]=247;else throw new Error("Unknown type: "+ne)},O=this.useRecords===!1?this.variableMapSize?U=>{let ne=Object.keys(U),j=Object.values(U),D=ne.length;if(D<24?F[P++]=160|D:D<256?(F[P++]=184,F[P++]=D):D<65536?(F[P++]=185,F[P++]=D>>8,F[P++]=D&255):(F[P++]=186,ct.setUint32(P,D),P+=4),p.keyMap)for(let z=0;z<D;z++)w(p.encodeKey(ne[z])),w(j[z]);else for(let z=0;z<D;z++)w(ne[z]),w(j[z])}:(U,ne)=>{F[P++]=185;let j=P-i;P+=2;let D=0;if(p.keyMap)for(let z in U)(ne||U.hasOwnProperty(z))&&(w(p.encodeKey(z)),w(U[z]),D++);else for(let z in U)(ne||U.hasOwnProperty(z))&&(w(z),w(U[z]),D++);F[j+++i]=D>>8,F[j+i]=D&255}:(U,ne)=>{let j,D=l.transitions||(l.transitions=Object.create(null)),z=0,oe=0,ue,de;if(this.keyMap){de=Object.keys(U).map(J=>this.encodeKey(J)),oe=de.length;for(let J=0;J<oe;J++){let ce=de[J];j=D[ce],j||(j=D[ce]=Object.create(null),z++),D=j}}else for(let J in U)(ne||U.hasOwnProperty(J))&&(j=D[J],j||(D[Mn]&1048576&&(ue=D[Mn]&65535),j=D[J]=Object.create(null),z++),D=j,oe++);let N=D[Mn];if(N!==void 0)N&=65535,F[P++]=217,F[P++]=N>>8|224,F[P++]=N&255;else if(de||(de=D.__keys__||(D.__keys__=Object.keys(U))),ue===void 0?(N=l.nextId++,N||(N=0,l.nextId=1),N>=k_&&(l.nextId=(N=y)+1)):N=ue,l[N]=de,N<y){F[P++]=217,F[P++]=N>>8|224,F[P++]=N&255,D=l.transitions;for(let J=0;J<oe;J++)(D[Mn]===void 0||D[Mn]&1048576)&&(D[Mn]=N),D=D[de[J]];D[Mn]=N|1048576,s=!0}else{if(D[Mn]=N,ct.setUint32(P,3655335680),P+=3,z&&(M+=k*z),R.length>=k_-y&&(R.shift()[Mn]=void 0),R.push(D),ai(oe+2),w(57344+N),w(de),ne===null)return;for(let J in U)(ne||U.hasOwnProperty(J))&&w(U[J]);return}if(oe<24?F[P++]=128|oe:ai(oe),ne!==null)for(let J in U)(ne||U.hasOwnProperty(J))&&w(U[J])},G=U=>{let ne;if(U>16777216){if(U-i>U_)throw new Error("Encoded buffer would be larger than maximum buffer size");ne=Math.min(U_,Math.round(Math.max((U-i)*(U>67108864?1.25:2),4194304)/4096)*4096)}else ne=(Math.max(U-i<<2,F.length-1)>>12)+1<<12;let j=new kd(ne);return ct=new DataView(j.buffer,0,ne),F.copy?F.copy(j,0,i,U):j.set(F.slice(i,U)),P-=i,i=0,co=j.length-10,F=j};let $=100,V=1e3;this.encodeAsIterable=function(U,ne){return ge(U,ne,re)},this.encodeAsAsyncIterable=function(U,ne){return ge(U,ne,Ee)};function*re(U,ne,j){let D=U.constructor;if(D===Object){let z=p.useRecords!==!1;z?O(U,null):P_(Object.keys(U).length,160);for(let oe in U){let ue=U[oe];z||w(oe),ue&&typeof ue=="object"?ne[oe]?yield*re(ue,ne[oe]):yield*Y(ue,ne,oe):w(ue)}}else if(D===Array){let z=U.length;ai(z);for(let oe=0;oe<z;oe++){let ue=U[oe];ue&&(typeof ue=="object"||P-i>$)?ne.element?yield*re(ue,ne.element):yield*Y(ue,ne,"element"):w(ue)}}else if(U[Symbol.iterator]){F[P++]=159;for(let z of U)z&&(typeof z=="object"||P-i>$)?ne.element?yield*re(z,ne.element):yield*Y(z,ne,"element"):w(z);F[P++]=255}else Pd(U)?(P_(U.size,64),yield F.subarray(i,P),yield U,me()):U[Symbol.asyncIterator]?(F[P++]=159,yield F.subarray(i,P),yield U,me(),F[P++]=255):w(U);j&&P>i?yield F.subarray(i,P):P-i>$&&(yield F.subarray(i,P),me())}function*Y(U,ne,j){let D=P-i;try{w(U),P-i>$&&(yield F.subarray(i,P),me())}catch(z){if(z.iteratorNotHandled)ne[j]={},P=i+D,yield*re.call(this,U,ne[j]);else throw z}}function me(){$=V,p.encode(null,Ld)}function ge(U,ne,j){return ne&&ne.chunkThreshold?$=V=ne.chunkThreshold:$=100,U&&typeof U=="object"?(p.encode(null,Ld),j(U,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(U)]}async function*Ee(U,ne){for(let j of re(U,ne,!0)){let D=j.constructor;if(D===D_||D===Uint8Array)yield j;else if(Pd(j)){let z=j.stream().getReader(),oe;for(;!(oe=await z.read()).done;)yield oe.value}else if(j[Symbol.asyncIterator])for await(let z of j)me(),z?yield*Ee(z,ne.async||(ne.async={})):yield p.encode(z);else yield j}}}useBuffer(e){F=e,ct=new DataView(F.buffer,F.byteOffset,F.byteLength),P=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let i=this.structures.slice(0),o=new jT(i,this.sharedValues,this.sharedVersion),s=this.saveShared(o,l=>(l&&l.version||0)==e);return s===!1?(o=this.getShared()||{},this.structures=o.structures||[],this.sharedValues=o.packedValues,this.sharedVersion=o.version,this.structures.nextId=this.structures.length):i.forEach((l,c)=>this.structures[c]=l),s}}function P_(t,e){t<24?F[P++]=e|t:t<256?(F[P++]=e|24,F[P++]=t):t<65536?(F[P++]=e|25,F[P++]=t>>8,F[P++]=t&255):(F[P++]=e|26,ct.setUint32(P,t),P+=4)}class jT{constructor(e,i,o){this.structures=e,this.packedValues=i,this.version=o}}function ai(t){t<24?F[P++]=128|t:t<256?(F[P++]=152,F[P++]=t):t<65536?(F[P++]=153,F[P++]=t>>8,F[P++]=t&255):(F[P++]=154,ct.setUint32(P,t),P+=4)}const xD=typeof Blob>"u"?function(){}:Blob;function Pd(t){if(t instanceof xD)return!0;let e=t[Symbol.toStringTag];return e==="Blob"||e==="File"}function wu(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let o=e.get(t);if(o)++o.count==2&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let s=e.samplingPackedValues.get(t);s?s.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let o=0,s=t.length;o<s;o++)wu(t[o],e);else{let o=!e.encoder.useRecords;for(var i in t)t.hasOwnProperty(i)&&(o&&wu(i,e),wu(t[i],e))}break;case"function":console.log(t)}}const bD=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;ZT=[Date,Set,Error,RegExp,$o,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,jT];Lh=[{tag:1,encode(t,e){let i=t.getTime()/1e3;(this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296?(F[P++]=26,ct.setUint32(P,i),P+=4):(F[P++]=251,ct.setFloat64(P,i),P+=8)}},{tag:258,encode(t,e){let i=Array.from(t);e(i)}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{getTag(t){return t.tag},encode(t,e){e(t.value)}},{encode(t,e,i){L_(t,i)}},{getTag(t){if(t.constructor===Uint8Array&&(this.tagUint8Array||Pa&&this.tagUint8Array!==!1))return 64},encode(t,e,i){L_(t,i)}},ri(68,1),ri(69,2),ri(70,4),ri(71,8),ri(72,1),ri(77,2),ri(78,4),ri(79,8),ri(85,4),ri(86,8),{encode(t,e){let i=t.packedValues||[],o=t.structures||[];if(i.values.length>0){F[P++]=216,F[P++]=51,ai(4);let s=i.values;e(s),ai(0),ai(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let l=0,c=s.length;l<c;l++)packedObjectMap[s[l]]=l}if(o){ct.setUint32(P,3655335424),P+=3;let s=o.slice(0);s.unshift(57344),s.push(new $o(t.version,1399353956)),e(s)}else e(new $o(t.version,1399353956))}}];function ri(t,e){return!bD&&e>1&&(t-=4),{tag:t,encode:function(o,s){let l=o.byteLength,c=o.byteOffset||0,d=o.buffer||o;s(Pa?nc.from(d,c,l):new Uint8Array(d,c,l))}}}function L_(t,e){let i=t.byteLength;i<24?F[P++]=64+i:i<256?(F[P++]=88,F[P++]=i):i<65536?(F[P++]=89,F[P++]=i>>8,F[P++]=i&255):(F[P++]=90,ct.setUint32(P,i),P+=4),P+i>=F.length&&e(P+i),F.set(t.buffer?t:new Uint8Array(t),P),P+=i}function CD(t,e){let i,o=e.length*2,s=t.length-o;e.sort((l,c)=>l.offset>c.offset?1:-1);for(let l=0;l<e.length;l++){let c=e[l];c.id=l;for(let d of c.references)t[d++]=l>>8,t[d]=l&255}for(;i=e.pop();){let l=i.offset;t.copyWithin(l+o,l,s),o-=2;let c=l+o;t[c++]=216,t[c++]=28,s=l}return t}function z_(t,e){ct.setUint32(Ut.position+t,P-Ut.position-t+1);let i=Ut;Ut=null,e(i[0]),e(i[1])}let yp=new TD({useRecords:!1});yp.encode;yp.encodeAsIterable;yp.encodeAsAsyncIterable;const O_=512,ED=1024,Ld=2048;function jo(t,e,i,o){Object.defineProperty(t,e,{get:i,set:o,enumerable:!0,configurable:!0})}class WT{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const i=[],o=e.byteLength,s=Math.ceil(o/this.chunkedMTU);let l=0,c=0;for(;c<o;){const d=Math.min(o,c+this.chunkedMTU),p=e.slice(c,d),m={__peerData:this._dataCount,n:l,data:p,total:s};i.push(m),c=d,l++}return this._dataCount++,i}}}function AD(t){let e=0;for(const s of t)e+=s.byteLength;const i=new Uint8Array(e);let o=0;for(const s of t)i.set(s,o),o+=s.byteLength;return i}const zd=A_.default||A_,ra=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return zd.browserDetails.browser}getVersion(){return zd.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=zd.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let i,o=!1;try{i=new RTCPeerConnection,i.addTransceiver("audio"),o=!0}catch{}finally{i&&i.close()}return o}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},RD=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),ex=()=>Math.random().toString(36).slice(2),B_={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class wD extends WT{noop(){}blobToArrayBuffer(e,i){const o=new FileReader;return o.onload=function(s){s.target&&i(s.target.result)},o.readAsArrayBuffer(e),o}binaryStringToArrayBuffer(e){const i=new Uint8Array(e.length);for(let o=0;o<e.length;o++)i[o]=e.charCodeAt(o)&255;return i.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=B_,this.browser=ra.getBrowser(),this.browserVersion=ra.getVersion(),this.pack=dT,this.unpack=fT,this.supports=(function(){const i={browser:ra.isBrowserSupported(),webRTC:ra.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!i.webRTC)return i;let o;try{o=new RTCPeerConnection(B_),i.audioVideo=!0;let s;try{s=o.createDataChannel("_PEERJSTEST",{ordered:!0}),i.data=!0,i.reliable=!!s.ordered;try{s.binaryType="blob",i.binaryBlob=!ra.isIOS}catch{}}catch{}finally{s&&s.close()}}catch{}finally{o&&o.close()}return i})(),this.validateId=RD,this.randomToken=ex}}const Sn=new wD,MD="PeerJS: ";var G_;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(G_||(G_={}));class ND{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...i){const o=[MD,...i];for(const s in o)o[s]instanceof Error&&(o[s]="("+o[s].name+") "+o[s].message);e>=3?console.log(...o):e>=2?console.warn("WARNING",...o):e>=1&&console.error("ERROR",...o)}constructor(){this._logLevel=0}}var Se=new ND,vp={},ID=Object.prototype.hasOwnProperty,cn="~";function Ma(){}Object.create&&(Ma.prototype=Object.create(null),new Ma().__proto__||(cn=!1));function DD(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function tx(t,e,i,o,s){if(typeof i!="function")throw new TypeError("The listener must be a function");var l=new DD(i,o||t,s),c=cn?cn+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],l]:t._events[c].push(l):(t._events[c]=l,t._eventsCount++),t}function Mu(t,e){--t._eventsCount===0?t._events=new Ma:delete t._events[e]}function en(){this._events=new Ma,this._eventsCount=0}en.prototype.eventNames=function(){var e=[],i,o;if(this._eventsCount===0)return e;for(o in i=this._events)ID.call(i,o)&&e.push(cn?o.slice(1):o);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(i)):e};en.prototype.listeners=function(e){var i=cn?cn+e:e,o=this._events[i];if(!o)return[];if(o.fn)return[o.fn];for(var s=0,l=o.length,c=new Array(l);s<l;s++)c[s]=o[s].fn;return c};en.prototype.listenerCount=function(e){var i=cn?cn+e:e,o=this._events[i];return o?o.fn?1:o.length:0};en.prototype.emit=function(e,i,o,s,l,c){var d=cn?cn+e:e;if(!this._events[d])return!1;var p=this._events[d],m=arguments.length,y,_;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),m){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,i),!0;case 3:return p.fn.call(p.context,i,o),!0;case 4:return p.fn.call(p.context,i,o,s),!0;case 5:return p.fn.call(p.context,i,o,s,l),!0;case 6:return p.fn.call(p.context,i,o,s,l,c),!0}for(_=1,y=new Array(m-1);_<m;_++)y[_-1]=arguments[_];p.fn.apply(p.context,y)}else{var S=p.length,b;for(_=0;_<S;_++)switch(p[_].once&&this.removeListener(e,p[_].fn,void 0,!0),m){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,i);break;case 3:p[_].fn.call(p[_].context,i,o);break;case 4:p[_].fn.call(p[_].context,i,o,s);break;default:if(!y)for(b=1,y=new Array(m-1);b<m;b++)y[b-1]=arguments[b];p[_].fn.apply(p[_].context,y)}}return!0};en.prototype.on=function(e,i,o){return tx(this,e,i,o,!1)};en.prototype.once=function(e,i,o){return tx(this,e,i,o,!0)};en.prototype.removeListener=function(e,i,o,s){var l=cn?cn+e:e;if(!this._events[l])return this;if(!i)return Mu(this,l),this;var c=this._events[l];if(c.fn)c.fn===i&&(!s||c.once)&&(!o||c.context===o)&&Mu(this,l);else{for(var d=0,p=[],m=c.length;d<m;d++)(c[d].fn!==i||s&&!c[d].once||o&&c[d].context!==o)&&p.push(c[d]);p.length?this._events[l]=p.length===1?p[0]:p:Mu(this,l)}return this};en.prototype.removeAllListeners=function(e){var i;return e?(i=cn?cn+e:e,this._events[i]&&Mu(this,i)):(this._events=new Ma,this._eventsCount=0),this};en.prototype.off=en.prototype.removeListener;en.prototype.addListener=en.prototype.on;en.prefixed=cn;en.EventEmitter=en;vp=en;var Wo={};jo(Wo,"ConnectionType",()=>ui);jo(Wo,"PeerErrorType",()=>vt);jo(Wo,"BaseConnectionErrorType",()=>Na);jo(Wo,"DataConnectionErrorType",()=>Ia);jo(Wo,"SerializationType",()=>ts);jo(Wo,"SocketEventType",()=>li);jo(Wo,"ServerMessageType",()=>Gt);var ui;(function(t){t.Data="data",t.Media="media"})(ui||(ui={}));var vt;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(vt||(vt={}));var Na;(function(t){t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed"})(Na||(Na={}));var Ia;(function(t){t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big"})(Ia||(Ia={}));var ts;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw"})(ts||(ts={}));var li;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(li||(li={}));var Gt;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(Gt||(Gt={}));var _p={};_p=JSON.parse('{"name":"peerjs","version":"1.5.2","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"1.5.4","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class kD extends vp.EventEmitter{constructor(e,i,o,s,l,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const d=e?"wss://":"ws://";this._baseUrl=d+i+":"+o+s+"peerjs?key="+l}start(e,i){this._id=e;const o=`${this._baseUrl}&id=${e}&token=${i}`;this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+_p.version),this._disconnected=!1,this._socket.onmessage=s=>{let l;try{l=JSON.parse(s.data),Se.log("Server message received:",l)}catch{Se.log("Invalid server message",s.data);return}this.emit(li.Message,l)},this._socket.onclose=s=>{this._disconnected||(Se.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit(li.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Se.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Se.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Gt.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const i of e)this.send(i)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(li.Error,"Invalid message");return}if(!this._wsOpen())return;const i=JSON.stringify(e);this._socket.send(i)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class nx{constructor(e){this.connection=e}startConnection(e){const i=this._startPeerConnection();if(this.connection.peerConnection=i,this.connection.type===ui.Media&&e._stream&&this._addTracksToConnection(e._stream,i),e.originator){const o=this.connection,s={ordered:!!e.reliable},l=i.createDataChannel(o.label,s);o._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Se.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const i=this.connection.peer,o=this.connection.connectionId,s=this.connection.type,l=this.connection.provider;Se.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(Se.log(`Received ICE candidates for ${i}:`,c.candidate),l.socket.send({type:Gt.Candidate,payload:{candidate:c.candidate,type:s,connectionId:o},dst:i}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Se.log("iceConnectionState is failed, closing connections to "+i),this.connection.emitError(Na.NegotiationFailed,"Negotiation of connection to "+i+" failed."),this.connection.close();break;case"closed":Se.log("iceConnectionState is closed, closing connections to "+i),this.connection.emitError(Na.ConnectionClosed,"Connection to "+i+" closed."),this.connection.close();break;case"disconnected":Se.log("iceConnectionState changed to disconnected on the connection with "+i);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Se.log("Listening for data channel"),e.ondatachannel=c=>{Se.log("Received data channel");const d=c.channel;l.getConnection(i,o)._initializeDataChannel(d)},Se.log("Listening for remote stream"),e.ontrack=c=>{Se.log("Received remote stream");const d=c.streams[0],p=l.getConnection(i,o);if(p.type===ui.Media){const m=p;this._addStreamToMediaConnection(d,m)}}}cleanup(){Se.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const i=e.signalingState!=="closed";let o=!1;const s=this.connection.dataChannel;s&&(o=!!s.readyState&&s.readyState!=="closed"),(i||o)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,i=this.connection.provider;try{const o=await e.createOffer(this.connection.options.constraints);Se.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp);try{await e.setLocalDescription(o),Se.log("Set localDescription:",o,`for:${this.connection.peer}`);let s={sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ui.Data){const l=this.connection;s={...s,label:l.label,reliable:l.reliable,serialization:l.serialization}}i.socket.send({type:Gt.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(i.emitError(vt.WebRTC,s),Se.log("Failed to setLocalDescription, ",s))}}catch(o){i.emitError(vt.WebRTC,o),Se.log("Failed to createOffer, ",o)}}async _makeAnswer(){const e=this.connection.peerConnection,i=this.connection.provider;try{const o=await e.createAnswer();Se.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp);try{await e.setLocalDescription(o),Se.log("Set localDescription:",o,`for:${this.connection.peer}`),i.socket.send({type:Gt.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){i.emitError(vt.WebRTC,s),Se.log("Failed to setLocalDescription, ",s)}}catch(o){i.emitError(vt.WebRTC,o),Se.log("Failed to create answer, ",o)}}async handleSDP(e,i){i=new RTCSessionDescription(i);const o=this.connection.peerConnection,s=this.connection.provider;Se.log("Setting remote description",i);const l=this;try{await o.setRemoteDescription(i),Se.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(c){s.emitError(vt.WebRTC,c),Se.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){Se.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Se.log(`Added ICE candidate for:${this.connection.peer}`)}catch(i){this.connection.provider.emitError(vt.WebRTC,i),Se.log("Failed to handleCandidate, ",i)}}_addTracksToConnection(e,i){if(Se.log(`add tracks from stream ${e.id} to peer connection`),!i.addTrack)return Se.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(o=>{i.addTrack(o,e)})}_addStreamToMediaConnection(e,i){Se.log(`add stream ${e.id} to media connection ${i.connectionId}`),i.addStream(e)}}class ix extends vp.EventEmitter{emitError(e,i){Se.error("Error:",i),this.emit("error",new UD(`${e}`,i))}}class UD extends Error{constructor(e,i){typeof i=="string"?super(i):(super(),Object.assign(this,i)),this.type=e}}class ox extends ix{get open(){return this._open}constructor(e,i,o){super(),this.peer=e,this.provider=i,this.options=o,this._open=!1,this.metadata=o.metadata}}var Bh;const ga=class ga extends ox{get type(){return ui.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,i,o){super(e,i,o),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||ga.ID_PREFIX+Sn.randomToken(),this._negotiator=new nx(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Se.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const i=e.type,o=e.payload;switch(e.type){case Gt.Answer:this._negotiator.handleSDP(i,o.sdp),this._open=!0;break;case Gt.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:Se.warn(`Unrecognized message type:${i} from peer:${this.peer}`);break}}answer(e,i={}){if(this._localStream){Se.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,i&&i.sdpTransform&&(this.options.sdpTransform=i.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const o=this.provider._getMessages(this.connectionId);for(const s of o)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Bh=new WeakMap,Ws(ga,Bh,ga.ID_PREFIX="mc_");let Ju=ga;class PD{constructor(e){this._options=e}_buildRequest(e){const i=this._options.secure?"https":"http",{host:o,port:s,path:l,key:c}=this._options,d=new URL(`${i}://${o}:${s}${l}${c}/${e}`);return d.searchParams.set("ts",`${Date.now()}${Math.random()}`),d.searchParams.set("version",_p.version),fetch(d.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Se.error("Error retrieving ID",e);let i="";throw this._options.path==="/"&&this._options.host!==Sn.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let i="";throw this._options.host===Sn.CLOUD_HOST?i="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":i="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+i)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Se.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Gh,Vh;const Go=class Go extends ox{get type(){return ui.Data}constructor(e,i,o){super(e,i,o),this.connectionId=this.options.connectionId||Go.ID_PREFIX+ex(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new nx(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=i=>{Se.log(`DC#${this.connectionId} dc onmessage:`,i.data)},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,i=!1){if(!this.open){this.emitError(Ia.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,i)}async handleMessage(e){const i=e.payload;switch(e.type){case Gt.Answer:await this._negotiator.handleSDP(e.type,i.sdp);break;case Gt.Candidate:await this._negotiator.handleCandidate(i.candidate);break;default:Se.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Gh=new WeakMap,Vh=new WeakMap,Ws(Go,Gh,Go.ID_PREFIX="dc_"),Ws(Go,Vh,Go.MAX_BUFFERED_AMOUNT=8388608);let Ku=Go;class Sp extends Ku{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",i=>this._handleDataMessage(i))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Ku.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(i){return Se.error(`DC#:${this.connectionId} Error when sending:`,i),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Od extends Sp{close(e){super.close(e),this._chunkedData={}}constructor(e,i,o){super(e,i,o),this.chunker=new WT,this.serialization=ts.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const i=fT(e),o=i.__peerData;if(o){if(o.type==="close"){this.close();return}this._handleChunk(i);return}this.emit("data",i)}_handleChunk(e){const i=e.__peerData,o=this._chunkedData[i]||{data:[],count:0,total:e.total};if(o.data[e.n]=new Uint8Array(e.data),o.count++,this._chunkedData[i]=o,o.total===o.count){delete this._chunkedData[i];const s=AD(o.data);this._handleDataMessage({data:s})}}_send(e,i){const o=dT(e);if(o instanceof Promise)return this._send_blob(o);if(!i&&o.byteLength>this.chunker.chunkedMTU){this._sendChunks(o);return}this._bufferedSend(o)}async _send_blob(e){const i=await e;if(i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}_sendChunks(e){const i=this.chunker.chunk(e);Se.log(`DC#${this.connectionId} Try to send ${i.length} chunks...`);for(const o of i)this.send(o,!0)}}class LD extends Sp{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,i){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=ts.None}}class zD extends Sp{_handleDataMessage({data:e}){const i=this.parse(this.decoder.decode(e)),o=i.__peerData;if(o&&o.type==="close"){this.close();return}this.emit("data",i)}_send(e,i){const o=this.encoder.encode(this.stringify(e));if(o.byteLength>=Sn.chunkedMTU){this.emitError(Ia.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(o)}constructor(...e){super(...e),this.serialization=ts.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Hh;const ya=class ya extends ix{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[i,o]of this._connections)e[i]=o;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,i){super(),this._serializers={raw:LD,json:zD,binary:Od,"binary-utf8":Od,default:Od},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let o;if(e&&e.constructor==Object?i=e:e&&(o=e.toString()),i={debug:0,host:Sn.CLOUD_HOST,port:Sn.CLOUD_PORT,path:"/",key:ya.DEFAULT_KEY,token:Sn.randomToken(),config:Sn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...i},this._options=i,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Sn.CLOUD_HOST?this._options.secure=Sn.isSecure():this._options.host==Sn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Se.setLogFunction(this._options.logFunction),Se.logLevel=this._options.debug||0,this._api=new PD(i),this._socket=this._createServerConnection(),!Sn.supports.audioVideo&&!Sn.supports.data){this._delayedAbort(vt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(o&&!Sn.validateId(o)){this._delayedAbort(vt.InvalidID,`ID "${o}" is invalid`);return}o?this._initialize(o):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(vt.ServerError,s))}_createServerConnection(){const e=new kD(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(li.Message,i=>{this._handleMessage(i)}),e.on(li.Error,i=>{this._abort(vt.SocketError,i)}),e.on(li.Disconnected,()=>{this.disconnected||(this.emitError(vt.Network,"Lost connection to server."),this.disconnect())}),e.on(li.Close,()=>{this.disconnected||this._abort(vt.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const i=e.type,o=e.payload,s=e.src;switch(i){case Gt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Gt.Error:this._abort(vt.ServerError,o.msg);break;case Gt.IdTaken:this._abort(vt.UnavailableID,`ID "${this.id}" is taken`);break;case Gt.InvalidKey:this._abort(vt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Gt.Leave:Se.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case Gt.Expire:this.emitError(vt.PeerUnavailable,`Could not connect to peer ${s}`);break;case Gt.Offer:{const l=o.connectionId;let c=this.getConnection(s,l);if(c&&(c.close(),Se.warn(`Offer received for existing Connection ID:${l}`)),o.type===ui.Media){const p=new Ju(s,this,{connectionId:l,_payload:o,metadata:o.metadata});c=p,this._addConnection(s,c),this.emit("call",p)}else if(o.type===ui.Data){const p=new this._serializers[o.serialization](s,this,{connectionId:l,_payload:o,metadata:o.metadata,label:o.label,serialization:o.serialization,reliable:o.reliable});c=p,this._addConnection(s,c),this.emit("connection",p)}else{Se.warn(`Received malformed connection type:${o.type}`);return}const d=this._getMessages(l);for(const p of d)c.handleMessage(p);break}default:{if(!o){Se.warn(`You received a malformed message from ${s} of type ${i}`);return}const l=o.connectionId,c=this.getConnection(s,l);c&&c.peerConnection?c.handleMessage(e):l?this._storeMessage(l,e):Se.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,i){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(i)}_getMessages(e){const i=this._lostMessages.get(e);return i?(this._lostMessages.delete(e),i):[]}connect(e,i={}){if(i={serialization:"default",...i},this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(vt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const o=new this._serializers[i.serialization](e,this,i);return this._addConnection(e,o),o}call(e,i,o={}){if(this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(vt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!i){Se.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const s=new Ju(e,this,{...o,_stream:i});return this._addConnection(e,s),s}_addConnection(e,i){Se.log(`add connection ${i.type}:${i.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(i)}_removeConnection(e){const i=this._connections.get(e.peer);if(i){const o=i.indexOf(e);o!==-1&&i.splice(o,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,i){const o=this._connections.get(e);if(!o)return null;for(const s of o)if(s.connectionId===i)return s;return null}_delayedAbort(e,i){setTimeout(()=>{this._abort(e,i)},0)}_abort(e,i){Se.error("Aborting!"),this.emitError(e,i),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Se.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const i=this._connections.get(e);if(i)for(const o of i)o.close()}disconnect(){if(this.disconnected)return;const e=this.id;Se.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Se.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Se.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=i=>{}){this._api.listAllPeers().then(i=>e(i)).catch(i=>this._abort(vt.ServerError,i))}};Hh=new WeakMap,Ws(ya,Hh,ya.DEFAULT_KEY="peerjs");let zh=ya;var OD=zh;const rx=({role:t,roomId:e,localStream:i})=>{const[o,s]=le.useState(""),[l,c]=le.useState([]),[d,p]=le.useState([]),[m,y]=le.useState(null),[_,S]=le.useState(null),[b,A]=le.useState(!1),E=le.useRef(null);le.useEffect(()=>{const w=t==="host"?`mtg-${Math.floor(Math.random()*9e3+1e3)}`:`player-${Math.floor(Math.random()*1e5)}`,O=new OD(w,{debug:1});return E.current=O,O.on("open",G=>{console.log(`My peer ID is: ${G}`),s(G),t==="client"&&e&&R(e)}),O.on("error",G=>{console.error(G),S("Network error: "+G.type)}),t==="host"&&(O.on("connection",G=>{console.log("New data connection",G.peer),M(G)}),O.on("call",G=>{console.log("Incoming video call",G.peer),G.answer(),G.on("stream",$=>{p(V=>V.find(re=>re.peerId===G.peer)?V:[...V,{peerId:G.peer,stream:$}])})})),()=>{O.destroy()}},[]);const R=w=>{if(!E.current)return;console.log(`Connecting to ${w}...`);const O=E.current.connect(w);O.on("open",()=>{console.log("Connected to host!"),A(!0),M(O),i&&(console.log("Calling host with stream..."),E.current.call(w,i))}),O.on("error",G=>{console.error("Connection failed",G),S("Could not find host. Check Room ID.")})},M=w=>{c(O=>[...O,w]),w.on("data",O=>{y(O)}),w.on("close",()=>{c(O=>O.filter(G=>G.peer!==w.peer)),p(O=>O.filter(G=>G.peerId!==w.peer)),t==="client"&&A(!1)})};return{peerId:o,connections:l,remoteStreams:d,incomingData:m,error:_,isConnected:b,broadcast:w=>{l.forEach(O=>{O.open&&O.send(w)})}}};var Oh=(t=>(t.Untap="Untap",t.Upkeep="Upkeep",t.Draw="Draw",t.Main1="Main 1",t.Combat="Combat",t.Main2="Main 2",t.End="End",t.Cleanup="Cleanup",t))(Oh||{}),sx=(t=>(t.Standard="Standard",t.Commander="Commander",t.Modern="Modern",t.Pioneer="Pioneer",t.Legacy="Legacy",t.Vintage="Vintage",t.Pauper="Pauper",t.Draft="Draft",t.Sealed="Sealed",t.Custom="Custom",t))(sx||{}),Yr=(t=>(t.Announcer="Announcer",t.ARView="AR View",t.JoinGame="Join Game",t))(Yr||{});const La=({isOpen:t,onClose:e,title:i,children:o})=>t?x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fadeIn",onClick:e,children:x.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl max-w-lg w-full max-h-[80vh] flex flex-col relative",onClick:s=>s.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-zinc-800 bg-zinc-900 rounded-t-xl",children:[x.jsxs("h3",{className:"text-xl font-serif font-bold text-white flex items-center gap-2",children:[x.jsx("i",{className:"fa-solid fa-circle-question text-indigo-500"})," ",i]}),x.jsx("button",{onClick:e,className:"text-zinc-500 hover:text-white transition-colors w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-800",children:x.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]}),x.jsx("div",{className:"p-6 overflow-y-auto text-sm text-zinc-300 space-y-4 leading-relaxed custom-scrollbar",children:o}),x.jsx("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/50 rounded-b-xl flex justify-end",children:x.jsx("button",{onClick:e,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-bold text-xs uppercase tracking-wide transition-colors shadow-lg shadow-indigo-900/20",children:"Got it"})})]})}):null,BD=({appMode:t})=>{var dt,Ve,mt,St;const[e,i]=le.useState([]),o=le.useRef([]),[s,l]=le.useState(null),[c,d]=le.useState(!1),[p,m]=le.useState([]),[y,_]=le.useState(""),[S,b]=le.useState([]),[A,E]=le.useState(!0),[R,M]=le.useState(!0),[k,w]=le.useState(!1),[O,G]=le.useState({}),[$,V]=le.useState(!1),[re,Y]=le.useState(null),[me,ge]=le.useState(!1),{peerId:Ee,remoteStreams:U,broadcast:ne}=rx({role:"host"}),{connect:j,disconnect:D,setManualPlayers:z,setManualFormat:oe,setManualRules:ue,toggleCardTap:de,manualUpdateStatus:N,setIsOutputMuted:J,isOutputMuted:ce,state:W,volume:fe,sessionPlayers:se,battlefield:ae,gameFormat:Ae,customRules:we}=KI(o,U),[Ct,Xe]=le.useState({}),[It,fn]=le.useState(Oh.Main1);le.useEffect(()=>{se.length>0&&ne({type:"GAME_STATE",payload:{players:se,battlefield:ae,phase:It,currentLife:Ct,commanderDamage:O}})},[se,ae,It,Ct,O]),le.useEffect(()=>{t===Yr.ARView?J(!0):J(!1)},[t,J]);const it=["+1/+1 Counter","-1/-1 Counter","Flying","Hexproof","Indestructible","Trample","Vigilance","Deathtouch","Lifelink","Haste","Stun Counter","Summoning Sick","Goaded"];le.useEffect(()=>{(async()=>{try{const ke=(await navigator.mediaDevices.enumerateDevices()).filter(Je=>Je.kind==="videoinput");m(ke),ke.length>0&&e.length===0&&i([ke[0].deviceId])}catch(he){console.warn("Could not enumerate devices",he)}})()},[]),le.useEffect(()=>{if(se.length>0){const ie={};se.forEach(he=>{ie[he.name]=Ct[he.name]||40}),Xe(ie),b(se.map(he=>he.name)),E(!1)}},[se]);const ot=()=>{W.isConnected?D():j()},rt=ie=>{e.includes(ie)?i(he=>he.filter(ke=>ke!==ie)):e.length<4&&i(he=>[...he,ie])},tn=(ie,he)=>{Xe(ke=>({...ke,[ie]:(ke[ie]||40)+he}))},st=(ie,he,ke)=>{G(Je=>{const Tt=Je[ie]||{},nn=Tt[he]||0,Ht=Math.max(0,nn+ke);return{...Je,[ie]:{...Tt,[he]:Ht}}})},Dt=ie=>{const he=O[ie];return he?Object.entries(he).filter(([ke,Je])=>Je>=21).map(([ke])=>ke):[]},Dn=()=>{if(y.trim()&&S.length<8){const ie=[...S,y.trim()];b(ie),_(""),z(ie)}},ei=ie=>{const he=S.filter(ke=>ke!==ie);b(he),z(he)},dn=(ie,he,ke,Je)=>{ie.preventDefault(),Y({player:he,cardId:ke,cardName:Je})};return x.jsxs("div",{className:"h-full flex flex-col md:flex-row bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] bg-zinc-950",children:[x.jsx(La,{isOpen:me,onClose:()=>ge(!1),title:"Announcer Command Center",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Starting the Game"}),x.jsx("p",{children:'1. Enter player names in the "Planeswalkers" panel or simply tell the Announcer who is playing once connected.'}),x.jsx("p",{children:"2. Select your camera sources using the View menu (Top Right). You can select multiple local cameras."}),x.jsxs("p",{children:["3. Share the ",x.jsx("strong",{children:"Room ID"})," (Top Left) with friends so they can join via their phones."]}),x.jsxs("p",{children:["4. Click ",x.jsx("strong",{children:"ESTABLISH LINK"})," to connect to the AI."]})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Interacting with AI"}),x.jsx("p",{children:"The Announcer is listening! You can speak naturally."}),x.jsxs("ul",{className:"list-disc pl-4 text-zinc-400 mt-1 space-y-1",children:[x.jsx("li",{children:'"I cast Sol Ring."'}),x.jsx("li",{children:'"I attack Player B with everything."'}),x.jsx("li",{children:'"End my turn."'}),x.jsx("li",{children:'"Add a +1/+1 counter to my Commander."'})]})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Manual Controls"}),x.jsx("p",{children:"If the AI misses something, you can manually adjust Life Totals, Phase, and Tap states (Click card)."}),x.jsxs("p",{children:[x.jsx("strong",{children:"Right Click"})," (or Long Press) on a card to manually add/remove Status Effects like Flying or Poison."]})]})]})}),x.jsxs("div",{className:"flex-1 relative flex items-center justify-center overflow-hidden bg-black border-r-4 border-zinc-900 shadow-[inset_0_0_20px_rgba(0,0,0,0.8)]",children:[s&&!c?x.jsxs("div",{className:"absolute top-20 z-10 bg-red-950/90 border border-red-500 text-red-200 px-6 py-4 rounded-xl shadow-2xl",children:[x.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),s]}):null,c?x.jsxs("div",{className:"flex flex-col items-center justify-center text-zinc-600",children:[x.jsx("i",{className:"fa-solid fa-microphone-lines text-6xl mb-4 animate-pulse-slow text-indigo-900"}),x.jsx("p",{className:"font-serif text-indigo-800/50 tracking-widest uppercase",children:"Blind Seer Mode Active"})]}):x.jsxs("div",{className:`w-full h-full grid ${e.length+U.length>1?"grid-cols-2 grid-rows-2":"grid-cols-1 grid-rows-1"} gap-1 bg-zinc-900`,children:[e.map((ie,he)=>x.jsxs("div",{className:"relative bg-black flex items-center justify-center overflow-hidden",children:[x.jsx("video",{ref:ke=>{ke&&(o.current[he]=ke,ke.srcObject||navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:ie}}}).then(Je=>{ke.srcObject=Je,ke.play()}).catch(console.error))},autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),x.jsxs("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-[10px] px-2 py-1 rounded",children:["Host Cam ",he+1]})]},ie)),U.map((ie,he)=>x.jsxs("div",{className:"relative bg-black flex items-center justify-center overflow-hidden border-2 border-indigo-500/50",children:[x.jsx("video",{ref:ke=>{ke&&(o.current[e.length+he]=ke,ke.srcObject=ie.stream,ke.play())},autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),x.jsxs("div",{className:"absolute top-2 left-2 bg-indigo-900/80 text-white text-[10px] px-2 py-1 rounded",children:["Player Cam ",he+1]})]},ie.peerId))]}),x.jsxs("div",{className:"absolute top-4 left-4 z-20",children:[x.jsxs("div",{className:`px-4 py-1.5 rounded-sm border-2 text-xs font-serif font-bold uppercase tracking-widest backdrop-blur-md shadow-[0_0_15px_rgba(0,0,0,0.5)] flex items-center gap-2 ${W.isConnected?"bg-indigo-950/80 border-indigo-400 text-indigo-200 shadow-indigo-500/20":"bg-red-950/80 border-red-900 text-red-400"}`,children:[W.isConnected?" Linked":" Unlinked",W.isConnected&&ce&&x.jsxs("span",{className:"text-yellow-400 ml-2",children:[x.jsx("i",{className:"fa-solid fa-volume-xmark"})," Muted"]})]}),Ee&&x.jsxs("div",{className:"mt-2 bg-zinc-900/90 border border-zinc-600 px-3 py-2 rounded text-zinc-300 text-xs",children:[x.jsx("div",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:"Session Room ID"}),x.jsx("div",{className:"font-mono text-lg font-bold text-white select-all tracking-wider",children:Ee.split("-")[1]||Ee}),x.jsx("div",{className:"text-[10px] text-zinc-500 mt-1",children:"Players can join using this code"})]})]}),x.jsxs("div",{className:"absolute top-4 right-4 z-20 flex flex-col items-end gap-2",children:[x.jsx("button",{onClick:()=>ge(!0),className:"w-8 h-8 rounded-full bg-zinc-800 border border-zinc-600 text-zinc-400 hover:text-white hover:border-indigo-500 hover:bg-indigo-600 transition-all flex items-center justify-center shadow-lg",children:x.jsx("i",{className:"fa-solid fa-question text-xs"})}),x.jsxs("div",{className:"relative group",children:[x.jsxs("button",{onClick:()=>w(!k),className:"bg-black/60 hover:bg-black/80 backdrop-blur text-white px-3 py-2 rounded-lg border border-white/10 flex items-center gap-2 text-xs uppercase tracking-wide",children:[x.jsx("i",{className:"fa-solid fa-video"})," ",e.length+U.length," View",e.length+U.length!==1?"s":"",x.jsx("i",{className:"fa-solid fa-chevron-down text-[10px]"})]}),k&&x.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl overflow-hidden z-30",children:[x.jsxs("div",{className:"p-2 text-xs text-zinc-500 font-bold uppercase border-b border-zinc-800",children:["Active Feeds (",e.length+U.length,")"]}),p.map(ie=>{const he=e.includes(ie.deviceId);return x.jsxs("button",{onClick:()=>rt(ie.deviceId),disabled:!he&&e.length>=4,className:`w-full text-left px-4 py-2 text-xs truncate flex justify-between items-center ${he?"bg-indigo-900/30 text-indigo-300":"text-zinc-400 hover:bg-zinc-800"} ${!he&&e.length>=4?"opacity-50 cursor-not-allowed":""}`,children:[x.jsx("span",{children:ie.label||`Camera ${ie.deviceId.slice(0,5)}...`}),he&&x.jsx("i",{className:"fa-solid fa-check text-indigo-500"})]},ie.deviceId)}),U.length>0&&x.jsxs("div",{className:"bg-zinc-950 p-2 border-t border-zinc-800",children:[x.jsx("div",{className:"text-[10px] text-indigo-400 uppercase font-bold mb-1",children:"Network Feeds"}),U.map((ie,he)=>x.jsxs("div",{className:"text-xs text-zinc-400 px-2 py-1",children:["Remote Player ",he+1," (Connected)"]},ie.peerId))]}),x.jsx("button",{onClick:()=>d(!c),className:"w-full text-left px-4 py-2 text-xs text-yellow-500 hover:bg-zinc-800 border-t border-zinc-800",children:c?"Enable Video":"Disable Video (Audio Only)"})]})]})]}),W.isConnected&&!ce&&x.jsx("div",{className:"absolute bottom-4 right-4 flex items-end gap-1 h-12 pointer-events-none mix-blend-screen",children:[...Array(8)].map((ie,he)=>x.jsx("div",{className:"w-2 bg-gradient-to-t from-indigo-600 to-cyan-400 rounded-t-sm transition-all duration-75 shadow-[0_0_10px_#4f46e5]",style:{height:`${Math.max(10,fe*150*(Math.random()+.5))}px`}},he))})]}),x.jsxs("div",{className:"w-full md:w-96 bg-zinc-900 border-l-4 border-zinc-800 flex flex-col h-full shadow-[inset_10px_0_20px_rgba(0,0,0,0.5)] relative transition-all",children:[x.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 pointer-events-none"}),x.jsxs("div",{className:"p-4 border-b-2 border-zinc-800 relative z-10 bg-gradient-to-b from-zinc-800 to-zinc-900",children:[x.jsx("button",{onClick:ot,className:`w-full py-3 rounded-lg font-serif font-bold text-lg shadow-lg border-2 transition-all transform active:scale-95 flex items-center justify-center gap-3 ${W.isConnected?"bg-red-900 hover:bg-red-800 border-red-500 text-red-100 shadow-red-900/50":"bg-indigo-900 hover:bg-indigo-800 border-indigo-500 text-indigo-100 shadow-indigo-900/50"}`,children:W.isConnected?x.jsxs(x.Fragment,{children:[x.jsx("i",{className:"fa-solid fa-hand"})," CEASE LINK"]}):x.jsxs(x.Fragment,{children:[x.jsx("i",{className:"fa-solid fa-link"})," ESTABLISH LINK"]})}),W.error&&x.jsx("div",{className:"mt-2 text-center text-xs text-red-400 font-serif",children:W.error})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 relative z-10 custom-scrollbar",children:[x.jsxs("div",{className:"bg-zinc-950 rounded-lg border-2 border-zinc-700 shadow-lg overflow-hidden",children:[x.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer bg-zinc-900/50",onClick:()=>M(!R),children:[x.jsx("h3",{className:"text-zinc-400 text-xs font-serif uppercase tracking-widest font-bold",children:"Game Ritual Setup"}),x.jsx("i",{className:`fa-solid fa-chevron-${R?"up":"down"} text-zinc-500`})]}),R&&x.jsxs("div",{className:"p-3 space-y-4 animate-fadeIn border-t border-zinc-800",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold block mb-1",children:"Format"}),x.jsx("select",{value:Ae,onChange:ie=>oe(ie.target.value),className:"w-full bg-zinc-900 border border-zinc-600 rounded px-2 py-1.5 text-sm text-zinc-200 focus:border-indigo-500 outline-none font-serif",children:Object.values(sx).map(ie=>x.jsx("option",{value:ie,children:ie},ie))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold block mb-1",children:"Custom / House Rules"}),x.jsx("textarea",{value:we,onChange:ie=>ue(ie.target.value),placeholder:"e.g. No infinite combos, free mulligan...",className:"w-full bg-zinc-900 border border-zinc-600 rounded px-2 py-1.5 text-sm text-zinc-200 focus:border-indigo-500 outline-none font-serif h-16 resize-none"})]})]})]}),x.jsx("div",{className:`transition-all duration-300 ${A&&S.length===0?"block":"hidden md:block"}`,children:x.jsxs("div",{className:"bg-zinc-950 rounded-lg p-3 border-2 border-zinc-700 shadow-lg",children:[x.jsxs("div",{className:"flex justify-between items-center cursor-pointer mb-2",onClick:()=>E(!A),children:[x.jsxs("h3",{className:"text-zinc-400 text-xs font-serif uppercase tracking-widest font-bold",children:["Planeswalkers (",S.length,"/8)"]}),x.jsx("i",{className:`fa-solid fa-chevron-${A?"up":"down"} text-zinc-500`})]}),A&&x.jsxs("div",{className:"space-y-3 animate-fadeIn",children:[x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:y,onChange:ie=>_(ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&Dn(),placeholder:"Enter Name...",className:"flex-1 bg-zinc-900 border border-zinc-600 rounded px-3 py-1 text-sm text-zinc-200 placeholder-zinc-600 focus:border-indigo-500 focus:outline-none font-serif"}),x.jsx("button",{onClick:Dn,disabled:S.length>=8,className:"px-3 py-1 bg-zinc-800 hover:bg-zinc-700 border border-zinc-600 rounded text-zinc-300 disabled:opacity-50",children:x.jsx("i",{className:"fa-solid fa-plus"})})]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(ie=>x.jsxs("div",{className:"flex items-center gap-2 bg-indigo-900/30 border border-indigo-500/30 rounded px-2 py-1 text-xs text-indigo-200",children:[ie,x.jsx("button",{onClick:()=>ei(ie),className:"hover:text-white",children:x.jsx("i",{className:"fa-solid fa-xmark"})})]},ie))})]})]})}),x.jsx("div",{className:`transition-all duration-300 ${se.length>1?"block":"hidden"}`,children:x.jsxs("div",{className:"bg-zinc-950 rounded-lg p-3 border-2 border-zinc-700 shadow-lg",children:[x.jsxs("div",{className:"flex justify-between items-center cursor-pointer mb-2",onClick:()=>V(!$),children:[x.jsx("h3",{className:"text-zinc-400 text-xs font-serif uppercase tracking-widest font-bold",children:"Commander Damage"}),x.jsx("i",{className:`fa-solid fa-chevron-${$?"up":"down"} text-zinc-500`})]}),$&&x.jsx("div",{className:"space-y-4 animate-fadeIn overflow-y-auto max-h-60 custom-scrollbar pr-1",children:se.map(ie=>x.jsxs("div",{className:"bg-zinc-900/50 p-2 rounded border border-zinc-800",children:[x.jsxs("div",{className:"text-xs font-bold text-zinc-300 mb-2 flex justify-between",children:[x.jsxs("span",{children:[ie.name," (Takes Dmg)"]}),Dt(ie.name).length>0&&x.jsxs("span",{className:"text-red-500 animate-pulse",children:[x.jsx("i",{className:"fa-solid fa-skull"})," Lethal"]})]}),x.jsx("div",{className:"space-y-1",children:se.filter(he=>he.name!==ie.name).map(he=>{var Je;const ke=((Je=O[ie.name])==null?void 0:Je[he.name])||0;return x.jsxs("div",{className:"flex justify-between items-center text-xs",children:[x.jsxs("span",{className:"text-zinc-500 w-24 truncate",children:["vs ",he.name]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:()=>st(ie.name,he.name,-1),className:"w-5 h-5 flex items-center justify-center bg-zinc-800 hover:bg-zinc-700 rounded text-zinc-400",children:"-"}),x.jsx("span",{className:`w-6 text-center font-mono font-bold ${ke>=21?"text-red-500":"text-zinc-200"}`,children:ke}),x.jsx("button",{onClick:()=>st(ie.name,he.name,1),className:"w-5 h-5 flex items-center justify-center bg-zinc-800 hover:bg-zinc-700 rounded text-zinc-400",children:"+"})]})]},he.name)})})]},ie.name))})]})}),x.jsx("div",{className:"space-y-4",children:se.length===0?x.jsx("div",{className:"text-center py-12 text-zinc-600 font-serif italic border-2 border-dashed border-zinc-800 rounded-lg",children:'"Summon the players to begin..."'}):se.map(ie=>{var Je;const ke=Dt(ie.name).length>0;return x.jsxs("div",{className:`bg-zinc-900 rounded-xl overflow-hidden border-2 ${ke?"border-red-600 shadow-[0_0_15px_rgba(220,38,38,0.5)]":"border-[#b8860b] shadow-[0_0_15px_rgba(184,134,11,0.1)]"} relative group transition-all duration-300`,children:[x.jsxs("div",{className:"bg-gradient-to-r from-zinc-800 via-[#3d3318] to-zinc-800 p-2 border-b border-[#b8860b] flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"font-serif font-bold text-[#eecfa1] tracking-wide text-sm drop-shadow-md",children:ie.name}),ke&&x.jsx("i",{className:"fa-solid fa-skull text-red-500 text-xs animate-pulse",title:"Lethal Commander Damage"})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:()=>tn(ie.name,-1),className:"w-6 h-6 rounded flex items-center justify-center bg-black/40 hover:bg-red-900/80 text-[#eecfa1] border border-[#b8860b]/30",children:"-"}),x.jsx("span",{className:"font-mono font-bold text-xl w-10 text-center text-white drop-shadow-[0_0_5px_rgba(255,255,255,0.5)]",children:Ct[ie.name]||40}),x.jsx("button",{onClick:()=>tn(ie.name,1),className:"w-6 h-6 rounded flex items-center justify-center bg-black/40 hover:bg-green-900/80 text-[#eecfa1] border border-[#b8860b]/30",children:"+"})]})]}),x.jsxs("div",{className:"p-3 bg-zinc-950/80 min-h-[100px]",children:[x.jsx("div",{className:"text-[10px] uppercase text-[#8a7e66] font-bold mb-2 tracking-widest border-b border-[#8a7e66]/30 pb-1",children:"Battlefield"}),x.jsx("div",{className:"flex flex-wrap gap-4 px-2 py-2",children:((Je=ae[ie.name])==null?void 0:Je.length)>0?ae[ie.name].map(Tt=>{var nn;return x.jsxs("div",{className:"relative group/card",children:[x.jsx("div",{onClick:()=>de(ie.name,Tt.instanceId),onContextMenu:Ht=>dn(Ht,ie.name,Tt.instanceId,Tt.name),className:`w-16 h-24 bg-black rounded border border-zinc-600 cursor-pointer relative transition-transform duration-200 ease-out hover:scale-105 hover:shadow-[0_0_15px_rgba(167,139,250,0.5)] hover:z-20 ${Tt.tapped?"rotate-90 brightness-75 border-zinc-500":""}`,children:Tt.image_uri?x.jsx("img",{src:Tt.image_uri,alt:Tt.name,className:"w-full h-full object-cover rounded-[3px]"}):x.jsx("div",{className:"p-1 text-[8px] text-center text-zinc-300 leading-tight flex items-center justify-center h-full",children:Tt.name})}),x.jsx("div",{className:"absolute -top-2 -right-2 flex flex-col gap-1 z-20 pointer-events-none scale-75 origin-top-right",children:(nn=Tt.statuses)==null?void 0:nn.map(Ht=>x.jsx("div",{className:`${Ht.color} rounded-full w-5 h-5 flex items-center justify-center shadow-md border border-white/20`,title:Ht.label,children:x.jsx("i",{className:`fa-solid ${Ht.icon} text-[10px]`})},Ht.id))})]},Tt.instanceId)}):x.jsx("div",{className:"w-full text-center text-zinc-700 text-xs italic py-4",children:"No permanents detected"})})]})]},ie.id)})}),x.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border-2 border-zinc-700",children:[x.jsx("h3",{className:"text-zinc-400 text-xs font-serif uppercase tracking-widest font-bold mb-2",children:"Turn Phase"}),x.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.values(Oh).map(ie=>x.jsx("button",{onClick:()=>fn(ie),className:`text-[10px] py-1.5 px-2 rounded border transition-all font-serif uppercase tracking-wider ${It===ie?"bg-[#3d3318] border-[#b8860b] text-[#eecfa1] shadow-[0_0_10px_rgba(184,134,11,0.2)]":"bg-black/40 border-zinc-800 text-zinc-600 hover:text-zinc-400"}`,children:ie},ie))})]})]})]}),re&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>Y(null),children:x.jsxs("div",{className:"bg-zinc-900 border border-zinc-600 p-5 rounded-xl shadow-2xl max-w-sm w-full animate-fadeIn",onClick:ie=>ie.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-zinc-700 pb-2",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-white font-serif font-bold text-lg",children:re.cardName}),x.jsx("p",{className:"text-zinc-400 text-xs uppercase tracking-wide",children:"Edit Status Effects"})]}),x.jsx("button",{onClick:()=>Y(null),className:"text-zinc-500 hover:text-white",children:x.jsx("i",{className:"fa-solid fa-xmark text-lg"})})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("h4",{className:"text-xs text-zinc-500 uppercase font-bold mb-2",children:"Active Statuses"}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[((Ve=(dt=ae[re.player])==null?void 0:dt.find(ie=>ie.instanceId===re.cardId))==null?void 0:Ve.statuses.length)===0&&x.jsx("span",{className:"text-zinc-600 text-xs italic",children:"No active statuses."}),(St=(mt=ae[re.player])==null?void 0:mt.find(ie=>ie.instanceId===re.cardId))==null?void 0:St.statuses.map(ie=>x.jsxs("button",{onClick:()=>N(re.player,re.cardId,ie.label,"remove"),className:`${ie.color} px-2 py-1 rounded text-xs font-bold flex items-center gap-1 hover:brightness-110`,children:[x.jsx("i",{className:`fa-solid ${ie.icon}`})," ",ie.label," ",x.jsx("i",{className:"fa-solid fa-xmark ml-1 opacity-50"})]},ie.id))]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"text-xs text-zinc-500 uppercase font-bold mb-2",children:"Add Status"}),x.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto pr-1",children:it.map(ie=>x.jsxs("button",{onClick:()=>N(re.player,re.cardId,ie,"add"),className:"text-left px-2 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 text-xs rounded border border-zinc-700 hover:border-indigo-500 transition-colors truncate",children:[x.jsx("i",{className:"fa-solid fa-plus text-[10px] mr-1 text-indigo-400"})," ",ie]},ie))})]})]})})]})},GD=({roomId:t,onBack:e})=>{const i=le.useRef(null),[o,s]=le.useState(null),[l,c]=le.useState(!1),[d,p]=le.useState(!1);le.useEffect(()=>((async()=>{try{const R=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280}},audio:!0});R.getAudioTracks().forEach(M=>{M.enabled=!1}),s(R),i.current&&(i.current.srcObject=R,i.current.muted=!0)}catch(R){console.error("Failed to access camera",R)}})(),()=>{o&&o.getTracks().forEach(R=>R.stop())}),[]);const{isConnected:m,incomingData:y,error:_}=rx({role:"client",roomId:t,localStream:o}),S=()=>{o&&(o.getAudioTracks().forEach(E=>E.enabled=!0),c(!0))},b=()=>{o&&(o.getAudioTracks().forEach(E=>E.enabled=!1),c(!1))},A=(y==null?void 0:y.type)==="GAME_STATE"?y.payload:null;return x.jsxs("div",{className:"h-full w-full bg-black relative overflow-hidden",children:[x.jsx(La,{isOpen:d,onClose:()=>p(!1),title:"Player HUD Instructions",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"text-green-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Game Connection"}),x.jsx("p",{children:"You are connected to the Host's game session. Your camera feed is being sent to the AI Announcer so it can see your board."})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Push to Talk"}),x.jsx("p",{children:"The Announcer cannot hear you by default."}),x.jsxs("p",{children:[x.jsx("strong",{children:"Press and Hold"})," the large microphone button at the bottom to open your mic. Release to mute."]}),x.jsx("p",{children:'Use this to announce your plays: "I play a Mountain", "I tap my Elves for mana".'})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-cyan-400 font-bold uppercase text-xs tracking-wider mb-1",children:"HUD Data"}),x.jsx("p",{children:"The overlay displays real-time data from the Announcer, including Life Totals, Phase, and Card Statuses (counters, tapped/untapped)."})]})]})}),x.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),x.jsxs("div",{className:"absolute inset-0 z-10 pointer-events-none p-4 flex flex-col justify-between",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsxs("button",{onClick:e,className:"pointer-events-auto bg-black/50 text-white px-3 py-1 rounded backdrop-blur flex items-center gap-2",children:[x.jsx("i",{className:"fa-solid fa-chevron-left"})," Leave"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>p(!0),className:"pointer-events-auto w-8 h-8 rounded-full bg-black/50 text-white backdrop-blur flex items-center justify-center border border-white/20",children:x.jsx("i",{className:"fa-solid fa-question text-xs"})}),x.jsx("div",{className:`px-4 py-2 rounded-lg backdrop-blur-md border ${m?"bg-indigo-900/60 border-indigo-400":"bg-red-900/60 border-red-400"} text-white text-xs font-bold uppercase tracking-widest`,children:m?`Connected to ${t}`:_||"Connecting..."})]})]}),A?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"self-center bg-black/60 text-white text-center py-2 rounded-lg border border-white/20 backdrop-blur-sm",children:[x.jsx("div",{className:"text-[10px] text-zinc-400 uppercase tracking-widest",children:"Current Phase"}),x.jsx("div",{className:"text-xl font-serif font-bold text-[#eecfa1]",children:A.phase})]}),x.jsx("div",{className:"grid grid-cols-2 gap-2",children:A.players.map(E=>{const R=A.currentLife[E.name],M=A.battlefield[E.name]||[];return x.jsxs("div",{className:"bg-zinc-900/80 p-2 rounded border-l-4 border-indigo-500 backdrop-blur-sm",children:[x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsx("span",{className:"font-bold text-white text-sm shadow-black drop-shadow-md",children:E.name}),x.jsx("span",{className:"font-mono text-xl text-green-400 font-bold",children:R})]}),x.jsxs("div",{className:"flex flex-wrap gap-1",children:[M.map(k=>x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:`w-6 h-8 bg-zinc-700 rounded border border-zinc-500 ${k.tapped?"opacity-50":""}`}),k.statuses.length>0&&x.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-500 rounded-full flex items-center justify-center text-[8px] text-black font-bold",children:k.statuses.length})]},k.instanceId)),M.length===0&&x.jsx("span",{className:"text-[10px] text-zinc-500 italic",children:"Empty board"})]})]},E.name)})})]}):x.jsx("div",{className:"text-center text-white/50 text-sm animate-pulse mt-10",children:"Waiting for game data from host..."})]}),x.jsxs("div",{className:"absolute bottom-8 left-0 right-0 z-20 flex justify-center pointer-events-auto",children:[x.jsx("button",{onPointerDown:S,onPointerUp:b,onPointerLeave:b,className:`w-20 h-20 rounded-full border-4 shadow-2xl transition-all transform active:scale-95 flex items-center justify-center ${l?"bg-red-600 border-red-400 scale-110 shadow-red-500/50":"bg-zinc-800/80 border-zinc-500 backdrop-blur-sm"}`,children:x.jsx("i",{className:`fa-solid fa-microphone text-2xl ${l?"text-white animate-pulse":"text-zinc-400"}`})}),x.jsx("div",{className:"absolute -bottom-6 text-[10px] text-white/70 font-bold uppercase tracking-widest pointer-events-none",children:l?"Transmitting...":"Hold to Announce"})]})]})},VD=()=>{const[t,e]=le.useState(""),[i,o]=le.useState(""),[s,l]=le.useState(""),[c,d]=le.useState(!1),[p,m]=le.useState([]),[y,_]=le.useState([]),[S,b]=le.useState(!1);le.useEffect(()=>{A()},[]);const A=async()=>{const w=await et.userTokens.toArray();_(w.reverse())},E=async()=>{},R=w=>{const O=[],G=w.toLowerCase();return(G.includes("white")||G.includes("plains")||G.includes("angel")||G.includes("soldier"))&&O.push("W"),(G.includes("blue")||G.includes("island")||G.includes("drake")||G.includes("bird"))&&O.push("U"),(G.includes("black")||G.includes("swamp")||G.includes("zombie")||G.includes("horror"))&&O.push("B"),(G.includes("red")||G.includes("mountain")||G.includes("goblin")||G.includes("dragon"))&&O.push("R"),(G.includes("green")||G.includes("forest")||G.includes("saproling")||G.includes("beast"))&&O.push("G"),O},M=async w=>{try{await et.userTokens.add({name:w.name,prompt_used:w.prompt,stats:w.stats,image_base64:w.url,colors:R(w.prompt+" "+w.name),created_at:new Date}),await A()}catch(O){console.error("Failed to save token",O),alert("Could not save token to database.")}},k=async w=>{w&&(await et.userTokens.delete(w),await A())};return x.jsxs("div",{className:"h-full flex flex-col p-6 max-w-6xl mx-auto relative",children:[x.jsx(La,{isOpen:S,onClose:()=>b(!1),title:"Token Forge Guide",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Creating Tokens"}),x.jsx("p",{children:"Use Gemini 3 Pro to generate high-quality custom token art for your games."}),x.jsxs("p",{children:[x.jsx("strong",{children:"Prompt:"}),' Describe the visual appearance (e.g. "A mechanical dragon breathing blue fire").']}),x.jsxs("p",{children:[x.jsx("strong",{children:"Name & Stats:"}),' Enter the game text (e.g. "Construct", "4/4") to overlay it on the saved token.']})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-green-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Saving & Library"}),x.jsxs("p",{children:["Click ",x.jsx("strong",{children:"SAVE"})," on any generated image to store it in your local library. These tokens are persisted offline and can be viewed anytime."]})]})]})}),x.jsx("button",{onClick:()=>b(!0),className:"absolute top-6 right-6 w-8 h-8 rounded-full bg-zinc-800 border border-zinc-600 text-zinc-400 hover:text-white hover:border-indigo-500 hover:bg-indigo-600 transition-all flex items-center justify-center shadow-lg",children:x.jsx("i",{className:"fa-solid fa-question text-xs"})}),x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-serif tracking-wide",children:"Token Forge"}),x.jsx("p",{className:"text-zinc-400",children:"Create custom tokens for your battlefield using Gemini 3 Pro."})]}),x.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-zinc-800 shadow-lg mb-8",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold block mb-1 ml-1",children:"Prompt Description"}),x.jsx("input",{type:"text",value:t,onChange:w=>e(w.target.value),placeholder:"e.g., A 1/1 green Saproling with glowing spores...",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg px-4 py-2 text-white placeholder-zinc-600 focus:outline-none focus:border-indigo-500 transition-all font-serif"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold block mb-1 ml-1",children:"Token Name"}),x.jsx("input",{type:"text",value:i,onChange:w=>o(w.target.value),placeholder:"e.g. Saproling",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg px-4 py-2 text-white placeholder-zinc-600 focus:outline-none focus:border-indigo-500 transition-all font-serif"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold block mb-1 ml-1",children:"Stats (P/T)"}),x.jsx("input",{type:"text",value:s,onChange:w=>l(w.target.value),placeholder:"e.g. 1/1",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg px-4 py-2 text-white placeholder-zinc-600 focus:outline-none focus:border-indigo-500 transition-all font-serif font-bold"})]})]}),x.jsx("button",{onClick:E,disabled:c||!t,className:`w-full py-3 rounded-lg font-bold text-white shadow-lg transition-all font-serif uppercase tracking-widest ${c?"bg-zinc-700 cursor-wait":"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-900/30 active:scale-[0.99]"}`,children:c?x.jsxs("span",{children:[x.jsx("i",{className:"fa-solid fa-circle-notch fa-spin mr-2"})," Forging Artifact..."]}):x.jsxs("span",{children:[x.jsx("i",{className:"fa-solid fa-wand-magic-sparkles mr-2"})," Generate Token"]})})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-8",children:[p.length>0&&x.jsxs("section",{children:[x.jsxs("h3",{className:"text-indigo-400 font-bold uppercase tracking-widest text-sm mb-4 border-b border-indigo-900/50 pb-2",children:[x.jsx("i",{className:"fa-solid fa-sparkles mr-2"})," Fresh from the Forge"]}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:p.map((w,O)=>x.jsxs("div",{className:"bg-zinc-900 p-3 rounded-xl border border-zinc-700 shadow-xl hover:border-indigo-500 transition-all group relative",children:[x.jsxs("div",{className:"aspect-[3/4] rounded-lg overflow-hidden relative mb-2 bg-zinc-950 border border-black",children:[x.jsx("img",{src:w.url,alt:w.prompt,className:"w-full h-full object-cover"}),w.stats&&x.jsx("div",{className:"absolute bottom-2 right-2 bg-zinc-900/90 text-white px-2 py-1 rounded border border-zinc-600 font-bold font-mono text-xs shadow-lg",children:w.stats})]}),x.jsx("div",{className:"flex justify-between items-start mb-2",children:x.jsxs("div",{children:[x.jsx("p",{className:"text-white font-serif font-bold text-sm truncate",children:w.name}),x.jsxs("p",{className:"text-zinc-500 text-[10px] truncate max-w-[100px]",children:['"',w.prompt,'"']})]})}),x.jsxs("button",{onClick:()=>M(w),className:"w-full py-1.5 bg-zinc-800 hover:bg-green-700 text-zinc-300 hover:text-white rounded text-xs font-bold uppercase transition-colors",children:[x.jsx("i",{className:"fa-solid fa-floppy-disk mr-1"})," Save"]})]},O))})]}),x.jsxs("section",{children:[x.jsx("div",{className:"flex justify-between items-end mb-4 border-b border-zinc-800 pb-2",children:x.jsxs("h3",{className:"text-zinc-400 font-bold uppercase tracking-widest text-sm",children:[x.jsx("i",{className:"fa-solid fa-book-open mr-2"})," Token Library (",y.length,")"]})}),y.length===0?x.jsxs("div",{className:"h-32 flex flex-col items-center justify-center text-zinc-600 border-2 border-dashed border-zinc-800 rounded-xl bg-zinc-900/30",children:[x.jsx("i",{className:"fa-regular fa-clone text-3xl mb-2"}),x.jsx("p",{children:"No tokens saved yet."})]}):x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:y.map(w=>x.jsxs("div",{className:"bg-zinc-950 p-2 rounded-lg border border-zinc-800 hover:border-zinc-600 transition-all group",children:[x.jsxs("div",{className:"aspect-[3/4] rounded overflow-hidden relative mb-2 border border-black",children:[x.jsx("img",{src:w.image_base64,alt:w.name,className:"w-full h-full object-cover"}),w.stats&&x.jsx("div",{className:"absolute bottom-1 right-1 bg-black/80 text-white px-1.5 py-0.5 rounded border border-zinc-600 font-bold font-mono text-[10px]",children:w.stats}),x.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2",children:x.jsx("button",{onClick:()=>k(w.id),className:"w-8 h-8 rounded-full bg-red-900/80 text-red-200 hover:bg-red-600 hover:text-white flex items-center justify-center transition-colors",title:"Delete",children:x.jsx("i",{className:"fa-solid fa-trash text-xs"})})})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-zinc-300 font-serif font-bold text-xs truncate",children:w.name}),x.jsx("p",{className:"text-zinc-600 text-[9px] uppercase tracking-wider",children:new Date(w.created_at).toLocaleDateString()})]})]},w.id))})]})]})]})},HD=()=>{const[t,e]=le.useState(0),[i,o]=le.useState("Never"),[s,l]=le.useState(!1),[c,d]=le.useState(""),[p,m]=le.useState(!1),[y,_]=le.useState(""),[S,b]=le.useState(null);le.useEffect(()=>{(async()=>{const k=await et.cards.count(),w=await et.metadata.get("oracle_cards_updated_at");e(k),o(w?new Date(w.value).toLocaleDateString():"Never")})();const M=localStorage.getItem("gemini_api_key");M&&_(M)},[s]);const A=()=>{l(!0),cT(R=>{d(R),(R.includes("Complete")||R.includes("up to date")||R.includes("Error"))&&l(!1)})},E=()=>{y.trim()?(localStorage.setItem("gemini_api_key",y.trim()),b({type:"success",message:"API key saved! Reload the app for it to take effect."}),setTimeout(()=>b(null),5e3)):(localStorage.removeItem("gemini_api_key"),b({type:"success",message:"API key removed. AI features will be disabled."}),setTimeout(()=>b(null),5e3))};return x.jsxs("div",{className:"p-8 max-w-2xl mx-auto h-full overflow-y-auto relative",children:[x.jsx(La,{isOpen:p,onClose:()=>m(!1),title:"System Settings",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Offline Database"}),x.jsx("p",{children:"The app downloads Scryfall's Oracle data (cards, rules, triggers) to your device so you can play without an internet connection later. This ensures low latency lookups for the AI."})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-zinc-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Permissions"}),x.jsxs("p",{children:[x.jsx("strong",{children:"Camera:"})," Required for the Announcer AI to see the table and for AR view."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Microphone:"})," Required to speak to the AI and for Push-to-Talk communication."]})]})]})}),x.jsx("button",{onClick:()=>m(!0),className:"absolute top-8 right-8 w-8 h-8 rounded-full bg-zinc-800 border border-zinc-600 text-zinc-400 hover:text-white hover:border-indigo-500 hover:bg-indigo-600 transition-all flex items-center justify-center shadow-lg",children:x.jsx("i",{className:"fa-solid fa-question text-xs"})}),x.jsx("h2",{className:"text-2xl font-bold mb-6 border-b border-zinc-800 pb-4",children:"Settings"}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800",children:[x.jsx("h3",{className:"font-bold text-lg mb-2 text-indigo-400",children:"Gemini API Key (Optional)"}),x.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:"The AI Announcer requires a free Gemini API key. The app works fine without it - you can manually track games."}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold block mb-1",children:"API Key"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"password",value:y,onChange:R=>_(R.target.value),placeholder:"AIza...",className:"flex-1 bg-zinc-950 border border-zinc-600 rounded px-3 py-2 text-sm text-zinc-200 font-mono focus:border-indigo-500 outline-none"}),x.jsxs("button",{onClick:E,className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded transition-colors flex items-center gap-2",children:[x.jsx("i",{className:"fa-solid fa-save"})," Save"]})]})]}),S&&x.jsx("div",{className:`text-sm p-3 rounded ${S.type==="success"?"bg-green-900/20 text-green-300":"bg-red-900/20 text-red-300"}`,children:S.message}),x.jsxs("details",{className:"text-xs text-zinc-500",children:[x.jsx("summary",{className:"cursor-pointer hover:text-zinc-300",children:"How to get a free Gemini API key"}),x.jsxs("ol",{className:"list-decimal ml-4 mt-2 space-y-1",children:[x.jsxs("li",{children:["Visit ",x.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener",className:"text-indigo-400 underline",children:"aistudio.google.com/apikey"})]}),x.jsx("li",{children:"Sign in with your Google account"}),x.jsx("li",{children:'Click "Create API Key" (free tier includes generous usage)'}),x.jsx("li",{children:"Copy the key and paste it above"})]})]})]})]}),x.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800",children:[x.jsx("h3",{className:"font-bold text-lg mb-2 text-indigo-400",children:"Announcer Personality"}),x.jsxs("p",{className:"text-sm text-zinc-400 mb-4",children:["The current announcer model is set to ",x.jsx("strong",{children:"Gemini 2.5 Live (Fenrir Voice)"}),". This provides the best latency for real-time commentary."]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs("label",{className:"flex items-center gap-2 text-zinc-300",children:[x.jsx("input",{type:"radio",name:"style",defaultChecked:!0,className:"text-indigo-600 focus:ring-indigo-600 bg-zinc-800 border-zinc-600"}),"Esports Hype (Default)"]}),x.jsxs("label",{className:"flex items-center gap-2 text-zinc-300 opacity-50 cursor-not-allowed",children:[x.jsx("input",{type:"radio",name:"style",disabled:!0,className:"text-indigo-600 focus:ring-indigo-600 bg-zinc-800 border-zinc-600"}),"Relaxed LGS Judge (Coming Soon)"]}),x.jsxs("label",{className:"flex items-center gap-2 text-zinc-300 opacity-50 cursor-not-allowed",children:[x.jsx("input",{type:"radio",name:"style",disabled:!0,className:"text-indigo-600 focus:ring-indigo-600 bg-zinc-800 border-zinc-600"}),"Fantasy Innkeeper (Coming Soon)"]})]})]}),x.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsx("h3",{className:"font-bold text-lg text-indigo-400",children:"Offline Database"}),x.jsxs("span",{className:"text-xs bg-zinc-800 text-zinc-400 px-2 py-1 rounded",children:[t.toLocaleString()," Cards"]})]}),x.jsxs("p",{className:"text-sm text-zinc-400 mb-4",children:["Powered by Scryfall Oracle Data.",x.jsx("br",{}),"Last Updated: ",x.jsx("span",{className:"text-white",children:i})]}),s?x.jsxs("div",{className:"bg-indigo-900/20 text-indigo-300 text-sm p-3 rounded border border-indigo-900/50 flex items-center gap-3",children:[x.jsx("i",{className:"fa-solid fa-rotate fa-spin"}),c||"Syncing..."]}):x.jsxs("button",{onClick:A,className:"bg-zinc-800 hover:bg-zinc-700 text-white text-sm px-4 py-2 rounded transition-colors flex items-center gap-2",children:[x.jsx("i",{className:"fa-solid fa-rotate"})," Check for Updates"]})]}),x.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-zinc-800",children:[x.jsx("h3",{className:"font-bold text-lg mb-2 text-indigo-400",children:"Permissions"}),x.jsxs("div",{className:"text-sm text-zinc-400 flex flex-col gap-2",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:"Camera Access"}),x.jsxs("span",{className:"text-green-400",children:[x.jsx("i",{className:"fa-solid fa-check mr-1"})," Granted"]})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:"Microphone Access"}),x.jsxs("span",{className:"text-green-400",children:[x.jsx("i",{className:"fa-solid fa-check mr-1"})," Granted"]})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{children:"Storage (IndexedDB)"}),x.jsx("span",{className:t>0?"text-green-400":"text-yellow-500",children:t>0?x.jsxs(x.Fragment,{children:[x.jsx("i",{className:"fa-solid fa-check mr-1"})," Active"]}):"Empty"})]})]})]})]})]})},qD=()=>{const[t,e]=le.useState("announcer"),[i,o]=le.useState(""),[s,l]=le.useState(!1),[c,d]=le.useState(!1),[p,m]=le.useState(null),[y,_]=le.useState(""),[S,b]=le.useState(!1),[A,E]=le.useState(!1);le.useEffect(()=>{(async()=>{await et.cards.count()===0&&l(!0);const w=setTimeout(()=>{l(!1),d(!0)},1e4);cT(O=>{o(O),(O.includes("Downloading")||O.includes("Processing")||O.includes("Saving"))&&l(!0),(O.includes("Complete")||O.includes("up to date")||O.includes("Error"))&&(clearTimeout(w),setTimeout(()=>l(!1),1500),d(!0))})})()},[]);const R=()=>{y.trim()&&m(Yr.JoinGame)};return p===Yr.JoinGame?x.jsx(GD,{roomId:y,onBack:()=>m(null)}):p?x.jsxs("div",{className:"flex h-screen w-screen overflow-hidden bg-zinc-950 text-white font-sans selection:bg-indigo-500 selection:text-white",children:[x.jsxs("nav",{className:"w-16 md:w-20 flex flex-col items-center py-6 bg-zinc-900 border-r border-zinc-800 z-50",children:[x.jsx("div",{className:"mb-8 w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20",children:x.jsx("i",{className:"fa-solid fa-dragon text-white text-lg"})}),x.jsxs("div",{className:"flex-1 flex flex-col gap-4 w-full px-2",children:[x.jsxs("button",{onClick:()=>e("announcer"),className:`w-full aspect-square rounded-xl flex items-center justify-center transition-all duration-200 group relative ${t==="announcer"?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50":"text-zinc-500 hover:bg-zinc-800 hover:text-indigo-400"}`,title:"Announcer",children:[x.jsx("i",{className:"fa-solid fa-microphone-lines text-xl"}),t==="announcer"&&x.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white/20 rounded-l-full"})]}),x.jsx("button",{onClick:()=>e("tokens"),className:`w-full aspect-square rounded-xl flex items-center justify-center transition-all duration-200 group ${t==="tokens"?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50":"text-zinc-500 hover:bg-zinc-800 hover:text-indigo-400"}`,title:"Token Forge",children:x.jsx("i",{className:"fa-solid fa-wand-magic-sparkles text-xl"})}),x.jsx("button",{onClick:()=>e("settings"),className:`w-full aspect-square rounded-xl flex items-center justify-center transition-all duration-200 group ${t==="settings"?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50":"text-zinc-500 hover:bg-zinc-800 hover:text-indigo-400"}`,title:"Settings",children:x.jsx("i",{className:"fa-solid fa-gear text-xl"})})]}),x.jsxs("div",{className:"mt-auto flex flex-col items-center gap-4",children:[x.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-green-500":"bg-yellow-500 animate-pulse"}`,title:c?"Database Ready":"Syncing..."}),x.jsx("button",{onClick:()=>m(null),className:"w-10 h-10 rounded-full bg-zinc-800 text-zinc-400 hover:text-white hover:bg-red-900 hover:border-red-500 border border-transparent transition-all flex items-center justify-center",title:"Exit to Menu",children:x.jsx("i",{className:"fa-solid fa-power-off"})})]})]}),x.jsxs("main",{className:"flex-1 relative overflow-hidden bg-zinc-950",children:[s&&x.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-indigo-600/90 text-white text-xs font-bold px-4 py-2 flex justify-between items-center shadow-lg backdrop-blur-sm",children:x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx("i",{className:"fa-solid fa-rotate fa-spin"}),i||"Synchronizing Oracle Database..."]})}),t==="announcer"&&x.jsx(BD,{appMode:p}),t==="tokens"&&x.jsx(VD,{}),t==="settings"&&x.jsx(HD,{})]})]}):x.jsxs("div",{className:"h-screen w-screen bg-zinc-950 flex items-center justify-center p-6 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] relative overflow-hidden",children:[x.jsx("button",{onClick:()=>E(!0),className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-zinc-800 border border-zinc-600 text-zinc-400 hover:text-white hover:border-indigo-500 hover:bg-indigo-600 transition-all flex items-center justify-center shadow-lg z-50",children:x.jsx("i",{className:"fa-solid fa-question text-lg"})}),x.jsx(La,{isOpen:A,onClose:()=>E(!1),title:"Choosing Your Interface",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"text-indigo-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Host / Announcer"}),x.jsx("p",{children:"Select this if you are running the game session. The AI uses your camera to watch the table, track life totals, announce triggers, and act as a Judge. You can also see cameras from connected players."})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-cyan-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Offline AR View"}),x.jsx("p",{children:"Use this for solo play or if you just want to track the board state visually using your own camera without connecting to others. The Announcer is muted by default but can be toggled."})]}),x.jsxs("div",{className:"border-t border-zinc-800 pt-3",children:[x.jsx("h4",{className:"text-green-400 font-bold uppercase text-xs tracking-wider mb-1",children:"Join Game"}),x.jsx("p",{children:"Select this to connect to a Host. Your camera feed will be sent to the Host Announcer AI, and you will see the game data (Life, Phase, Statuses) overlaid on your screen. You can use Push-to-Talk to announce your plays."})]})]})}),x.jsxs("div",{className:"max-w-4xl w-full grid grid-cols-1 md:grid-cols-2 gap-8 relative z-10",children:[x.jsxs("div",{className:"md:col-span-2 text-center mb-4",children:[x.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20 mx-auto mb-4",children:x.jsx("i",{className:"fa-solid fa-dragon text-white text-3xl"})}),x.jsx("h1",{className:"text-4xl font-bold text-white font-serif tracking-tight mb-2",children:"MTG Announcer"}),x.jsx("p",{className:"text-zinc-400",children:"Choose your interface mode"})]}),x.jsxs("button",{onClick:()=>m(Yr.Announcer),className:"group bg-zinc-900 border-2 border-zinc-800 hover:border-indigo-500 rounded-2xl p-8 text-left transition-all hover:shadow-[0_0_30px_rgba(99,102,241,0.2)] flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),x.jsx("i",{className:"fa-solid fa-microphone-lines text-4xl text-indigo-400 mb-4 group-hover:scale-110 transition-transform origin-left"}),x.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Host / Announcer"}),x.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Start a new session as the Host. The AI will watch your camera and any connected player cameras to announce the game."})]}),x.jsxs("button",{onClick:()=>m(Yr.ARView),className:"group bg-zinc-900 border-2 border-zinc-800 hover:border-cyan-500 rounded-2xl p-8 text-left transition-all hover:shadow-[0_0_30px_rgba(6,182,212,0.2)] flex flex-col relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),x.jsx("i",{className:"fa-solid fa-glasses text-4xl text-cyan-400 mb-4 group-hover:scale-110 transition-transform origin-left"}),x.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Offline AR View"}),x.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Visual HUD focus. Audio is muted. Use your camera to track board state locally without connecting to a host."})]}),x.jsxs("div",{className:`md:col-span-2 group bg-zinc-900 border-2 border-zinc-800 ${S?"border-green-500":"hover:border-green-500"} rounded-2xl p-8 text-left transition-all hover:shadow-[0_0_30px_rgba(34,197,94,0.2)] flex flex-col relative overflow-hidden`,children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),S?x.jsxs("div",{className:"flex flex-col items-center justify-center animate-fadeIn w-full relative z-10",children:[x.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Enter Room ID"}),x.jsxs("div",{className:"flex gap-2 max-w-md w-full",children:[x.jsx("span",{className:"bg-zinc-800 border border-zinc-700 text-zinc-400 px-3 py-2 rounded-l-lg font-mono",children:"mtg-"}),x.jsx("input",{type:"text",value:y,onChange:M=>_(M.target.value),placeholder:"1234",className:"flex-1 bg-zinc-950 border border-zinc-700 border-l-0 rounded-r-lg px-4 py-2 text-white focus:outline-none focus:border-green-500 font-mono tracking-widest text-lg"})]}),x.jsxs("div",{className:"flex gap-4 mt-6",children:[x.jsx("button",{onClick:()=>b(!1),className:"text-zinc-500 hover:text-white transition-colors",children:"Cancel"}),x.jsx("button",{onClick:R,disabled:!y.trim(),className:"bg-green-600 hover:bg-green-500 text-white px-8 py-2 rounded-lg font-bold uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-green-900/50",children:"Connect"})]})]}):x.jsxs("button",{onClick:()=>b(!0),className:"w-full text-left flex items-start gap-4",children:[x.jsx("i",{className:"fa-solid fa-users-viewfinder text-4xl text-green-400 mb-4 group-hover:scale-110 transition-transform origin-left"}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Join Game"}),x.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Connect to a nearby Host via Room ID. Your camera will be sent to the Announcer, and you will see the game state overlay."})]})]})]})]})]})},ax=document.getElementById("root");if(!ax)throw new Error("Could not find root element to mount to");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});const FD=UC.createRoot(ax);FD.render(x.jsx(AC.StrictMode,{children:x.jsx(qD,{})}));
